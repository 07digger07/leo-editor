<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>leo.core.leoFrame &mdash; Leo API 4.11dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.11dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Leo API 4.11dev documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for leo.core.leoFrame</h1><div class="highlight"><pre>
<span class="c">#@+leo-ver=5-thin</span>
<span class="c">#@+node:ekr.20031218072017.3655: * @file leoFrame.py</span>
<span class="sd">&quot;&quot;&quot;The base classes for all Leo Windows, their body, log and tree panes, key bindings and menus.</span>

<span class="sd">These classes should be overridden to create frames for a particular gui.&quot;&quot;&quot;</span>

<span class="c">#@@language python</span>
<span class="c">#@@tabwidth -4</span>
<span class="c">#@@pagewidth 70</span>

<span class="c">#@+&lt;&lt; imports &gt;&gt;</span>
<span class="c">#@+node:ekr.20120219194520.10464: ** &lt;&lt; imports &gt;&gt; (leoFrame)</span>
<span class="kn">import</span> <span class="nn">leo.core.leoGlobals</span> <span class="kn">as</span> <span class="nn">g</span>
<span class="kn">import</span> <span class="nn">leo.core.leoMenu</span> <span class="kn">as</span> <span class="nn">leoMenu</span>
<span class="kn">import</span> <span class="nn">leo.core.leoNodes</span> <span class="kn">as</span> <span class="nn">leoNodes</span>

<span class="c">#@-&lt;&lt; imports &gt;&gt;</span>
<span class="c">#@+&lt;&lt; About handling events &gt;&gt;</span>
<span class="c">#@+node:ekr.20031218072017.2410: ** &lt;&lt; About handling events &gt;&gt;</span>
<span class="c">#@+at Leo must handle events or commands that change the text in the outline</span>
<span class="c"># or body panes. We must ensure that headline and body text corresponds</span>
<span class="c"># to the vnode corresponding to presently selected outline, and vice</span>
<span class="c"># versa. For example, when the user selects a new headline in the</span>
<span class="c"># outline pane, we must ensure that:</span>
<span class="c"># </span>
<span class="c"># 1) All vnodes have up-to-date information and</span>
<span class="c"># </span>
<span class="c"># 2) the body pane is loaded with the correct data.</span>
<span class="c"># </span>
<span class="c"># Early versions of Leo attempted to satisfy these conditions when the user</span>
<span class="c"># switched outline nodes. Such attempts never worked well; there were too many</span>
<span class="c"># special cases. Later versions of Leo use a much more direct approach: every</span>
<span class="c"># keystroke in the body pane updates the presently selected vnode immediately.</span>
<span class="c"># </span>
<span class="c"># The leoTree class contains all the event handlers for the tree pane, and the</span>
<span class="c"># leoBody class contains the event handlers for the body pane. The following</span>
<span class="c"># convenience methods exists:</span>
<span class="c"># </span>
<span class="c"># - body.updateBody &amp; tree.updateBody:</span>
<span class="c">#     Called by k.masterCommand after any keystroke not handled by k.masterCommand.</span>
<span class="c">#     These are suprising complex.</span>
<span class="c"># </span>
<span class="c"># - body.bodyChanged &amp; tree.headChanged:</span>
<span class="c">#     Called by commands throughout Leo&#39;s core that change the body or headline.</span>
<span class="c">#     These are thin wrappers for updateBody and updateTree.</span>
<span class="c">#@-&lt;&lt; About handling events &gt;&gt;</span>
<span class="c">#@+&lt;&lt; define class DummyHighLevelInterface &gt;&gt;</span>
<span class="c">#@+node:ekr.20111118104929.10211: ** &lt;&lt; define class DummyHighLevelInterface &gt;&gt;</span>
<div class="viewcode-block" id="DummyHighLevelInterface"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface">[docs]</a><span class="k">class</span> <span class="nc">DummyHighLevelInterface</span> <span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;A class to support a do-nothing HighLevelInterface.&#39;&#39;&#39;</span>

    <span class="c"># pylint: disable=R0923</span>
    <span class="c"># Interface not implemented.</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>

    <span class="c"># Mutable methods.</span>
<div class="viewcode-block" id="DummyHighLevelInterface.flashCharacter"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.flashCharacter">[docs]</a>    <span class="k">def</span> <span class="nf">flashCharacter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">,</span><span class="n">fg</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span><span class="n">flashes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">75</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="DummyHighLevelInterface.toPythonIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.toPythonIndex">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>                 <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.toPythonIndexRowCol"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.toPythonIndexRowCol">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndexRowCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>

    <span class="c"># Immutable redirection methods.</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.appendText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.appendText">[docs]</a>    <span class="k">def</span> <span class="nf">appendText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>                         <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.delete"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>                      <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.deleteTextSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.deleteTextSelection">[docs]</a>    <span class="k">def</span> <span class="nf">deleteTextSelection</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                 <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.get"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>                              <span class="k">return</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.getAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getAllText">[docs]</a>    <span class="k">def</span> <span class="nf">getAllText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                           <span class="k">return</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.getInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">getInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                       <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.getSelectedText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getSelectedText">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                      <span class="k">return</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.getSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="k">return</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.getYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                  <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.hasSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.hasSelection">[docs]</a>    <span class="k">def</span> <span class="nf">hasSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                         <span class="k">return</span> <span class="bp">False</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.insert"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>                           <span class="k">pass</span>    </div>
<div class="viewcode-block" id="DummyHighLevelInterface.replace"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.replace">[docs]</a>    <span class="k">def</span> <span class="nf">replace</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>                       <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.see"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.see">[docs]</a>    <span class="k">def</span> <span class="nf">see</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>                                <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.seeInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.seeInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">seeInsertPoint</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                      <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.selectAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.selectAllText">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>           <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setAllText">[docs]</a>    <span class="k">def</span> <span class="nf">setAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>                        <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setBackgroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setBackgroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setBackgroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>             <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setFocus">[docs]</a>    <span class="k">def</span> <span class="nf">setFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                             <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setForegroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setForegroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setForegroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>             <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">setInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>                   <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.setYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.setYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>                <span class="k">pass</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.tag_configure"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.tag_configure">[docs]</a>    <span class="k">def</span> <span class="nf">tag_configure</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">colorName</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>      <span class="k">pass</span>

    <span class="c"># Other immutable methods.</span>
    <span class="c"># These all use leoGlobals functions or leoGui methods.</span></div>
<div class="viewcode-block" id="DummyHighLevelInterface.clipboard_append"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.clipboard_append">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">getTextFromClipboard</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="n">s1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DummyHighLevelInterface.clipboard_clear"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.clipboard_clear">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_clear</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DummyHighLevelInterface.getFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.getFocus">[docs]</a>    <span class="k">def</span> <span class="nf">getFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">get_focus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DummyHighLevelInterface.rowColToGuiIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.DummyHighLevelInterface.rowColToGuiIndex">[docs]</a>    <span class="k">def</span> <span class="nf">rowColToGuiIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">convertRowColToPythonIndex</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>    
</div>
    <span class="n">set_focus</span> <span class="o">=</span> <span class="n">setFocus</span>

<span class="c">#@-&lt;&lt; define class DummyHighLevelInterface &gt;&gt;</span>
<span class="c">#@+&lt;&lt; define class HighLevelInterface &gt;&gt;</span>
<span class="c">#@+node:ekr.20111114102224.9936: ** &lt;&lt; define class HighLevelInterface &gt;&gt;</span></div>
<div class="viewcode-block" id="HighLevelInterface"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface">[docs]</a><span class="k">class</span> <span class="nc">HighLevelInterface</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;A class to specify Leo&#39;s high-level editing interface</span>
<span class="sd">    used throughout Leo&#39;s core.</span>

<span class="sd">    The interface has two parts:</span>

<span class="sd">    1. Standard (immutable) methods that will never be overridden.</span>

<span class="sd">    2. Other (mutable) methods that subclasses may override.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20111114102224.9950: *3* ctor (HighLevelInterface)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mutable_methods</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;flashCharacter&#39;</span><span class="p">,</span>
            <span class="s">&#39;toPythonIndex&#39;</span><span class="p">,</span>
            <span class="s">&#39;toPythonIndexRowCol&#39;</span><span class="p">,</span>
            <span class="c"># &#39;toGuiIndex&#39;, # A synonym.</span>
        <span class="p">)</span>
    <span class="c">#@+node:ekr.20111114102224.9935: *3* mutable methods (HighLevelInterface)</span>
    <span class="c">#@+node:ekr.20111114102224.9946: *4* flashCharacter</span>
<div class="viewcode-block" id="HighLevelInterface.flashCharacter"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.flashCharacter">[docs]</a>    <span class="k">def</span> <span class="nf">flashCharacter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">,</span><span class="n">fg</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span><span class="n">flashes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">75</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c">#@+node:ekr.20111114102224.9943: *4* toPythonIndex (HighLevelInterface)</span></div>
<div class="viewcode-block" id="HighLevelInterface.toPythonIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.toPythonIndex">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">index</span><span class="p">)</span>
</div>
    <span class="n">toGuiIndex</span> <span class="o">=</span> <span class="n">toPythonIndex</span>
    <span class="c">#@+node:ekr.20111114102224.9945: *4* toPythonIndexRowCol (BaseTextWidget)</span>
<div class="viewcode-block" id="HighLevelInterface.toPythonIndexRowCol"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.toPythonIndexRowCol">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndexRowCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>

        <span class="c"># This works, but is much slower that the leoQTextEditWidget method.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">row</span><span class="p">,</span><span class="n">col</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">convertPythonIndexToRowCol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span>
    <span class="c">#@+node:ekr.20111114102224.9937: *3* immutable redirection methods (HighLevelInterface)</span></div>
<div class="viewcode-block" id="HighLevelInterface.appendText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.appendText">[docs]</a>    <span class="k">def</span> <span class="nf">appendText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">appendText</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.delete"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.deleteTextSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.deleteTextSelection">[docs]</a>    <span class="k">def</span> <span class="nf">deleteTextSelection</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">deleteTextSelection</span><span class="p">()</span></div>
<div class="viewcode-block" id="HighLevelInterface.get"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="HighLevelInterface.getAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getAllText">[docs]</a>    <span class="k">def</span> <span class="nf">getAllText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="HighLevelInterface.getInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">getInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">getInsertPoint</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="HighLevelInterface.getSelectedText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getSelectedText">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">getSelectedText</span><span class="p">()</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span></div>
<div class="viewcode-block" id="HighLevelInterface.getSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.getYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">getYScrollPosition</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="HighLevelInterface.hasSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.hasSelection">[docs]</a>    <span class="k">def</span> <span class="nf">hasSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Take special care with this, for the benefit of LeoQuickSearchWidget.</span>
        <span class="c"># This problem only happens with the qttabs gui.</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">w</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;hasSelection&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">hasSelection</span><span class="p">())</span></div>
<div class="viewcode-block" id="HighLevelInterface.insert"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>    </div>
<div class="viewcode-block" id="HighLevelInterface.replace"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.replace">[docs]</a>    <span class="k">def</span> <span class="nf">replace</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.see"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.see">[docs]</a>    <span class="k">def</span> <span class="nf">see</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">see</span><span class="p">(</span><span class="n">i</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.seeInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.seeInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">seeInsertPoint</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">seeInsertPoint</span><span class="p">()</span></div>
<div class="viewcode-block" id="HighLevelInterface.selectAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.selectAllText">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">selectAllText</span><span class="p">(</span><span class="n">insert</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setAllText">[docs]</a>    <span class="k">def</span> <span class="nf">setAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setAllText</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setBackgroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setBackgroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setBackgroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setBackgroundColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setFocus">[docs]</a>    <span class="k">def</span> <span class="nf">setFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setFocus</span><span class="p">()</span></div>
<div class="viewcode-block" id="HighLevelInterface.setForegroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setForegroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setForegroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setForegroundColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">setInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setInsertPoint</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">insert</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.setYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.setYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">setYScrollPosition</span><span class="p">(</span><span class="n">i</span><span class="p">)</span></div>
<div class="viewcode-block" id="HighLevelInterface.tag_configure"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.tag_configure">[docs]</a>    <span class="k">def</span> <span class="nf">tag_configure</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">colorName</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">tag_configure</span><span class="p">(</span><span class="n">colorName</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20111114102224.9940: *3* other immutable methods (HighLevelInterface)</span>
    <span class="c"># These all use leoGlobals functions or leoGui methods.</span>
</div>
<div class="viewcode-block" id="HighLevelInterface.clipboard_append"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.clipboard_append">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">getTextFromClipboard</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="n">s1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HighLevelInterface.clipboard_clear"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.clipboard_clear">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_clear</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HighLevelInterface.getFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.getFocus">[docs]</a>    <span class="k">def</span> <span class="nf">getFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">get_focus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="HighLevelInterface.rowColToGuiIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.HighLevelInterface.rowColToGuiIndex">[docs]</a>    <span class="k">def</span> <span class="nf">rowColToGuiIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">convertRowColToPythonIndex</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>   

    <span class="c"># def rowColToGuiIndex (self,s,row,col):</span>
        <span class="c"># return self.widget and self.widget.rowColToGuiIndex(s,row,col) or 0 </span>
</div>
    <span class="n">set_focus</span> <span class="o">=</span> <span class="n">setFocus</span>
    <span class="c">#@-others</span>
<span class="c">#@-&lt;&lt; define class HighLevelInterface &gt;&gt;</span>
<span class="c">#@+&lt;&lt; define class baseTextWidget &gt;&gt;</span>
<span class="c">#@+node:ekr.20070228074312: ** &lt;&lt; define class baseTextWidget &gt;&gt;</span></div>
<div class="viewcode-block" id="baseTextWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget">[docs]</a><span class="k">class</span> <span class="nc">baseTextWidget</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;The base class for all wrapper classes for leo Text widgets.&#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070228074312.1: *3* Birth &amp; special methods (baseTextWidget)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">baseClassName</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">widget</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">baseClassName</span> <span class="o">=</span> <span class="n">baseClassName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">widget</span> <span class="c"># Not used at present.</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">baseClassName</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
    <span class="c">#@+node:ekr.20070228074312.12: *3* Clipboard (baseTextWidget)</span>
    <span class="c"># There is no need to override these in subclasses.</span>

<div class="viewcode-block" id="baseTextWidget.clipboard_clear"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.clipboard_clear">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_clear</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="baseTextWidget.clipboard_append"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.clipboard_append">[docs]</a>    <span class="k">def</span> <span class="nf">clipboard_append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="n">s1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">getTextFromClipboard</span><span class="p">()</span>

        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="n">s1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20081031074455.13: *3* Do-nothings (baseTextWidget)</span>
    <span class="c"># **Do not delete** </span>
    <span class="c"># The redirection methods of HighLevelInterface </span>
    <span class="c"># redirect calls from leoBody &amp; leoLog to *this* class.</span>
</div>
<div class="viewcode-block" id="baseTextWidget.flashCharacter"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.flashCharacter">[docs]</a>    <span class="k">def</span> <span class="nf">flashCharacter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">,</span><span class="n">fg</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span><span class="n">flashes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">75</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="baseTextWidget.getFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getFocus">[docs]</a>    <span class="k">def</span> <span class="nf">getFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                         <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="baseTextWidget.getName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getName">[docs]</a>    <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="c"># Essential.</span></div>
<div class="viewcode-block" id="baseTextWidget.getYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>              <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="baseTextWidget.see"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.see">[docs]</a>    <span class="k">def</span> <span class="nf">see</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>                            <span class="k">pass</span></div>
<div class="viewcode-block" id="baseTextWidget.seeInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.seeInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">seeInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="k">pass</span></div>
<div class="viewcode-block" id="baseTextWidget.setBackgroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setBackgroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setBackgroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>         <span class="k">pass</span>  </div>
<div class="viewcode-block" id="baseTextWidget.setFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setFocus">[docs]</a>    <span class="k">def</span> <span class="nf">setFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                         <span class="k">pass</span></div>
<div class="viewcode-block" id="baseTextWidget.setForegroundColor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setForegroundColor">[docs]</a>    <span class="k">def</span> <span class="nf">setForegroundColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">color</span><span class="p">):</span>         <span class="k">pass</span></div>
<div class="viewcode-block" id="baseTextWidget.setYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>            <span class="k">pass</span></div>
<div class="viewcode-block" id="baseTextWidget.tag_configure"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.tag_configure">[docs]</a>    <span class="k">def</span> <span class="nf">tag_configure</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">colorName</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>  <span class="k">pass</span>
</div>
    <span class="n">set_focus</span> <span class="o">=</span> <span class="n">setFocus</span>
    <span class="c">#@+node:ekr.20111113141805.10060: *3* Indices (baseTextWidget)</span>
    <span class="c">#@+node:ekr.20070228074312.8: *4* rowColToGuiIndex (baseTextWidget)</span>
    <span class="c"># This method is called only from the colorizer.</span>
    <span class="c"># It provides a huge speedup over naive code.</span>

<div class="viewcode-block" id="baseTextWidget.rowColToGuiIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.rowColToGuiIndex">[docs]</a>    <span class="k">def</span> <span class="nf">rowColToGuiIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">convertRowColToPythonIndex</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">)</span>    
    <span class="c">#@+node:ekr.20070228074312.7: *4* toPythonIndex (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.toPythonIndex"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.toPythonIndex">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndex</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">,</span><span class="n">index</span><span class="p">)</span>
</div>
    <span class="n">toGuiIndex</span> <span class="o">=</span> <span class="n">toPythonIndex</span>
    <span class="c">#@+node:ekr.20090320055710.4: *4* toPythonIndexRowCol (baseTextWidget)</span>
<div class="viewcode-block" id="baseTextWidget.toPythonIndexRowCol"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.toPythonIndexRowCol">[docs]</a>    <span class="k">def</span> <span class="nf">toPythonIndexRowCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">row</span><span class="p">,</span><span class="n">col</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">convertPythonIndexToRowCol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span>
    <span class="c">#@+node:ekr.20111113141805.10058: *3* Insert point &amp; selection Range (baseTextWidget)</span>
    <span class="c">#@+node:ekr.20070228074312.20: *4* getInsertPoint (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.getInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">getInsertPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span> <span class="o">=</span> <span class="n">i</span>

        <span class="c"># g.trace(&#39;baseTextWidget): i:&#39;,i,&#39;virtual&#39;,self.virtualInsertPoint)</span>
        <span class="k">return</span> <span class="n">i</span>
    <span class="c">#@+node:ekr.20070228074312.22: *4* getSelectionRange (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.getSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">sort</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Return a tuple representing the selected range of the widget.</span>

<span class="sd">        Return a tuple giving the insertion point if no range of text is selected.&quot;&quot;&quot;</span>

        <span class="n">sel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sel</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">sel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">sel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">sel</span>
            <span class="k">if</span> <span class="n">sort</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">:</span> <span class="n">sel</span> <span class="o">=</span> <span class="n">j</span><span class="p">,</span><span class="n">i</span> <span class="c"># Bug fix: 10/5/07</span>
            <span class="k">return</span> <span class="n">sel</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
            <span class="k">return</span> <span class="n">i</span><span class="p">,</span><span class="n">i</span>

    <span class="c">#@+node:ekr.20070228074312.25: *4* hasSelection</span></div>
<div class="viewcode-block" id="baseTextWidget.hasSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.hasSelection">[docs]</a>    <span class="k">def</span> <span class="nf">hasSelection</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span>
    <span class="c">#@+node:ekr.20070228074312.35: *4* setInsertPoint (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.setInsertPoint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setInsertPoint">[docs]</a>    <span class="k">def</span> <span class="nf">setInsertPoint</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span> <span class="o">=</span> <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">i</span>
    <span class="c">#@+node:ekr.20070228074312.36: *4* setSelectionRange (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.setSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">i1</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">insert1</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="n">j</span>

        <span class="k">if</span> <span class="n">insert</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">insert</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>
            <span class="n">ins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">insert</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ins</span> <span class="ow">in</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">virtualInsertPoint</span> <span class="o">=</span> <span class="n">ins</span>
    <span class="c">#@+node:ekr.20070228074312.31: *4* selectAllText (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.selectAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.selectAllText">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Select all text of the widget.&#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">insert</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.5: *3* oops (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;baseTextWidget oops:&#39;</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
            <span class="s">&#39;must be overridden in subclass&#39;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20111113141805.10057: *3* Text (baseTextWidget)</span>
    <span class="c">#@+node:ekr.20070228074312.10: *4* appendText (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.appendText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.appendText">[docs]</a>    <span class="k">def</span> <span class="nf">appendText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">+</span> <span class="n">s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ins</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">ins</span>
    <span class="c">#@+node:ekr.20070228074312.13: *4* delete (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.delete"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span> <span class="mi">1</span>
        <span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

        <span class="c"># 2011/11/13: This allows subclasses to use this base class method.</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">j</span><span class="p">,</span><span class="n">i</span>

        <span class="c"># g.trace(i,j,len(s),repr(s[:20]))</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAllText</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">:])</span>

        <span class="c"># Bug fix: 2011/11/13: Significant in external tests.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.14: *4* deleteTextSelection (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.deleteTextSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.deleteTextSelection">[docs]</a>    <span class="k">def</span> <span class="nf">deleteTextSelection</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.18: *4* get (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.get"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span> <span class="mi">1</span>
        <span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.19: *4* getAllText (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.getAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getAllText">[docs]</a>    <span class="k">def</span> <span class="nf">getAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.21: *4* getSelectedText (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.getSelectedText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.getSelectedText">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedText</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sel</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.26: *4* insert (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.insert"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">s1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:]</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">i</span>
    <span class="c">#@+node:ekr.20070228074312.28: *4* replace (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.replace"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.replace">[docs]</a>    <span class="k">def</span> <span class="nf">replace</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070228074312.32: *4* setAllText (baseTextWidget)</span></div>
<div class="viewcode-block" id="baseTextWidget.setAllText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.baseTextWidget.setAllText">[docs]</a>    <span class="k">def</span> <span class="nf">setAllText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">i</span>
    <span class="c">#@-others</span>
<span class="c">#@-&lt;&lt; define class baseTextWidget &gt;&gt;</span>
<span class="c">#@+&lt;&lt; define class stringTextWidget &gt;&gt;</span>
<span class="c">#@+node:ekr.20070228074228.1: ** &lt;&lt; define class stringTextWidget &gt;&gt;</span></div></div>
<div class="viewcode-block" id="stringTextWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.stringTextWidget">[docs]</a><span class="k">class</span> <span class="nc">stringTextWidget</span> <span class="p">(</span><span class="n">baseTextWidget</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;A class that represents text as a Python string.&#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070228074228.2: *3* ctor (stringTextWidget)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>

        <span class="c"># Init the base class</span>
        <span class="n">baseTextWidget</span><span class="o">.</span><span class="n">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span>
            <span class="n">baseClassName</span><span class="o">=</span><span class="s">&#39;stringTextWidget&#39;</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c">#@+node:ekr.20070228111853: *3* setSelectionRange (stringTextWidget)</span>
<div class="viewcode-block" id="stringTextWidget.setSelectionRange"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.stringTextWidget.setSelectionRange">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectionRange</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="n">i1</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">insert1</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sel</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span>

        <span class="k">if</span> <span class="n">insert</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toPythonIndex</span><span class="p">(</span><span class="n">insert</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ins</span> <span class="o">=</span> <span class="n">j</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;j&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="s">&#39;insert&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">insert</span><span class="p">))</span>
    <span class="c">#@-others</span>
<span class="c">#@-&lt;&lt; define class stringTextWidget &gt;&gt;</span>

<span class="c">#@+others</span>
<span class="c">#@+node:ekr.20031218072017.3656: ** class leoBody (HighLevelInterface)</span></div></div>
<div class="viewcode-block" id="leoBody"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody">[docs]</a><span class="k">class</span> <span class="nc">leoBody</span> <span class="p">(</span><span class="n">HighLevelInterface</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;The base class for the body pane in Leo windows.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.3657: *3* leoBody.__init__</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span>

        <span class="n">HighLevelInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
            <span class="c"># Init the base class</span>

        <span class="n">frame</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># keys are pane names, values are text widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forceFullRecolorFlag</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentFrame</span> <span class="o">=</span> <span class="n">parentFrame</span> <span class="c"># New in Leo 4.6.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalNumberOfEditors</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># May be overridden in subclasses...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># self.bodyCtrl is now a property.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEditors</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># paned body widget.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_chapters</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getBool</span><span class="p">(</span><span class="s">&#39;use_chapters&#39;</span><span class="p">)</span>

        <span class="c"># Must be overridden in subclasses...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorizer</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c">#@+node:ekr.20061109173122: *3* leoBody: must be defined in subclasses</span>
    <span class="c"># Birth, death &amp; config</span>
<div class="viewcode-block" id="leoBody.createBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createBindings">[docs]</a>    <span class="k">def</span> <span class="nf">createBindings</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>               <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoBody.createControl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createControl">[docs]</a>    <span class="k">def</span> <span class="nf">createControl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>         <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoBody.createTextWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createTextWidget">[docs]</a>    <span class="k">def</span> <span class="nf">createTextWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">name</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="leoBody.setColorFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.setColorFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setColorFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>           <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoBody.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>            <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># Editor</span></div>
<div class="viewcode-block" id="leoBody.createEditorFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createEditorFrame">[docs]</a>    <span class="k">def</span> <span class="nf">createEditorFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>             <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="leoBody.createEditorLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createEditorLabel">[docs]</a>    <span class="k">def</span> <span class="nf">createEditorLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pane</span><span class="p">):</span>          <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoBody.packEditorLabelWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.packEditorLabelWidget">[docs]</a>    <span class="k">def</span> <span class="nf">packEditorLabelWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>         <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoBody.setEditorColors"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.setEditorColors">[docs]</a>    <span class="k">def</span> <span class="nf">setEditorColors</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bg</span><span class="p">,</span><span class="n">fg</span><span class="p">):</span>           <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># Events...</span></div>
<div class="viewcode-block" id="leoBody.scheduleIdleTimeRoutine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.scheduleIdleTimeRoutine">[docs]</a>    <span class="k">def</span> <span class="nf">scheduleIdleTimeRoutine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">function</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20061109173021: *3* leoBody: must be defined in the base class</span>
    <span class="c">#@+node:ekr.20031218072017.3677: *4* Coloring (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.getColorizer"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.getColorizer">[docs]</a>    <span class="k">def</span> <span class="nf">getColorizer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorizer</span>
</div>
<div class="viewcode-block" id="leoBody.updateSyntaxColorer"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.updateSyntaxColorer">[docs]</a>    <span class="k">def</span> <span class="nf">updateSyntaxColorer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorizer</span><span class="o">.</span><span class="n">updateSyntaxColorer</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="leoBody.recolor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.recolor">[docs]</a>    <span class="k">def</span> <span class="nf">recolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">incremental</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">requestRecolorFlag</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">incrementalRecolorFlag</span> <span class="o">=</span> <span class="n">incremental</span>
</div>
    <span class="n">recolor_now</span> <span class="o">=</span> <span class="n">recolor</span>
    <span class="c">#@+node:ekr.20060528100747: *4* Editors (leoBody)</span>
    <span class="c"># This code uses self.pb, a paned body widget, created by tkBody.finishCreate.</span>


    <span class="c">#@+node:ekr.20070424053629: *5* entries</span>
    <span class="c">#@+node:ekr.20060528100747.1: *6* addEditor (leoBody)</span>
<div class="viewcode-block" id="leoBody.addEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.addEditor">[docs]</a>    <span class="k">def</span> <span class="nf">addEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Add another editor to the body pane.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">totalNumberOfEditors</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEditors</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEditors</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># Inject the ivars into the first editor.</span>
            <span class="c"># Bug fix: Leo 4.4.8 rc1: The name of the last editor need not be &#39;1&#39;</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span> <span class="p">;</span> <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">w_old</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateInjectedIvars</span><span class="p">(</span><span class="n">w_old</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selectLabel</span><span class="p">(</span><span class="n">w_old</span><span class="p">)</span> <span class="c"># Immediately create the label in the old editor.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;can not happen: unexpected editorWidgets&#39;</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalNumberOfEditors</span>
        <span class="n">pane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">panes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">panes</span><span class="p">()</span>
        <span class="n">minSize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">panes</span><span class="p">)))</span>

        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createEditorFrame</span><span class="p">(</span><span class="n">pane</span><span class="p">)</span>
        <span class="c">#@+&lt;&lt; create text widget w &gt;&gt;</span>
        <span class="c">#@+node:ekr.20060528110922: *7* &lt;&lt; create text widget w &gt;&gt; leoBody.addEditor</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createTextWidget</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&#39;end&#39;</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">see</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setFontFromConfig</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColorFromConfig</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createBindings</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">completeAllBindingsForWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recolorWidget</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create text widget w &gt;&gt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>

        <span class="k">for</span> <span class="n">pane</span> <span class="ow">in</span> <span class="n">panes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">configurepane</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="n">minSize</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">updatelayout</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">w</span> <span class="c"># bodyCtrl is now a property.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateInjectedIvars</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectLabel</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectEditor</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateEditors</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20060528132829: *6* assignPositionToEditor (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.assignPositionToEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.assignPositionToEditor">[docs]</a>    <span class="k">def</span> <span class="nf">assignPositionToEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Called *only* from tree.select to select the present body editor.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">==</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">widget</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateInjectedIvars</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectLabel</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="c"># g.trace(&#39;===&#39;,id(w),w.leo_chapter.name,w.leo_p.h)</span>
    <span class="c">#@+node:ekr.20060528170438: *6* cycleEditorFocus (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.cycleEditorFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.cycleEditorFocus">[docs]</a>    <span class="k">def</span> <span class="nf">cycleEditorFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Cycle keyboard focus between the body text editors.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">w2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">assert</span><span class="p">(</span><span class="n">w</span><span class="o">!=</span><span class="n">w2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectEditor</span><span class="p">(</span><span class="n">w2</span><span class="p">)</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="n">w2</span>
    <span class="c">#@+node:ekr.20060528113806: *6* deleteEditor (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.deleteEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.deleteEditor">[docs]</a>    <span class="k">def</span> <span class="nf">deleteEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Delete the presently selected body text editor.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="p">;</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_name</span>

        <span class="k">del</span> <span class="n">d</span> <span class="p">[</span><span class="n">name</span><span class="p">]</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">panes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">panes</span><span class="p">()</span>
        <span class="n">minSize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">panes</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">pane</span> <span class="ow">in</span> <span class="n">panes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">configurepane</span><span class="p">(</span><span class="n">pane</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="n">minSize</span><span class="p">)</span>

        <span class="c"># Select another editor.</span>
        <span class="n">w</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c"># c.frame.body.bodyCtrl = w # Don&#39;t do this now?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEditors</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectEditor</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070425180705: *6* findEditorForChapter (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.findEditorForChapter"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.findEditorForChapter">[docs]</a>    <span class="k">def</span> <span class="nf">findEditorForChapter</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">chapter</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Return an editor to be assigned to chapter.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span> <span class="p">;</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="c"># First, try to match both the chapter and position.</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">==</span> <span class="n">chapter</span> <span class="ow">and</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_p&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="o">==</span> <span class="n">p</span>
                <span class="p">):</span>
                    <span class="c"># g.trace(&#39;***&#39;,id(w),&#39;match chapter and p&#39;,p.h)</span>
                    <span class="k">return</span> <span class="n">w</span>

        <span class="c"># Next, try to match just the chapter.</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">==</span> <span class="n">chapter</span><span class="p">:</span>
                <span class="c"># g.trace(&#39;***&#39;,id(w),&#39;match only chapter&#39;,p.h)</span>
                <span class="k">return</span> <span class="n">w</span>

        <span class="c"># As a last resort, return the present editor widget.</span>
        <span class="c"># g.trace(&#39;***&#39;,id(self.bodyCtrl),&#39;no match&#39;,p.h)</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
    <span class="c">#@+node:ekr.20060530210057: *6* select/unselectLabel (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.unselectLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.unselectLabel">[docs]</a>    <span class="k">def</span> <span class="nf">unselectLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createChapterIvar</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">packEditorLabelWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeLabel</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_label&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">s</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s">&#39;LightSteelBlue1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoBody.selectLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.selectLabel">[docs]</a>    <span class="k">def</span> <span class="nf">selectLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEditors</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createChapterIvar</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">packEditorLabelWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeLabel</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="c"># g.trace(s,g.callers())</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_label&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">s</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_label&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span><span class="o">.</span><span class="n">pack_forget</span><span class="p">()</span>
            <span class="n">w</span><span class="o">.</span><span class="n">leo_label</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#@+node:ekr.20061017083312: *6* selectEditor &amp; helpers (leoBody)</span></div>
    <span class="n">selectEditorLockout</span> <span class="o">=</span> <span class="bp">False</span>

<div class="viewcode-block" id="leoBody.selectEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.selectEditor">[docs]</a>    <span class="k">def</span> <span class="nf">selectEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Select editor w and node w.leo_p.&#39;&#39;&#39;</span>

        <span class="c">#  Called whenever w must be selected.</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectEditorLockout</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">w</span> <span class="ow">and</span> <span class="n">w</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="o">!=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">selectPosition</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="p">)</span>
                <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectEditorLockout</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectEditorHelper</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectEditorLockout</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">val</span> <span class="c"># Don&#39;t put a return in a finally clause.</span>
    <span class="c">#@+node:ekr.20070423102603: *7* selectEditorHelper (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.selectEditorHelper"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.selectEditorHelper">[docs]</a>    <span class="k">def</span> <span class="nf">selectEditorHelper</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;no w.leo_p&#39;</span><span class="p">)</span> 
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;==1&#39;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">w</span><span class="p">),</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_p&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deactivateActiveEditor</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="c"># The actual switch.</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="n">w</span>
        <span class="n">w</span><span class="o">.</span><span class="n">leo_active</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switchToChapter</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectLabel</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ensurePositionExists</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;***** no position editor!&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;==2&#39;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">w</span><span class="p">),</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_p&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
        <span class="c"># g.trace(&#39;expanding ancestors of &#39;,w.leo_p.h,g.callers())</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span>
        <span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">recolor</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20060528131618: *6* updateEditors (leoBody)</span>
    <span class="c"># Called from addEditor and assignPositionToEditor</span>
</div>
<div class="viewcode-block" id="leoBody.updateEditors"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.updateEditors">[docs]</a>    <span class="k">def</span> <span class="nf">updateEditors</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span> <span class="k">return</span> <span class="c"># There is only the main widget.</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_v</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">v</span> <span class="ow">and</span> <span class="n">w</span> <span class="o">!=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
                <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&#39;end&#39;</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
                <span class="c"># g.trace(&#39;update&#39;,w,v)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recolorWidget</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070424053629.1: *5* utils</span>
    <span class="c">#@+node:ekr.20070422093128: *6* computeLabel (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.computeLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.computeLabel">[docs]</a>    <span class="k">def</span> <span class="nf">computeLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_label_s</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>
    <span class="c">#@+node:ekr.20070422094710: *6* createChapterIvar (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.createChapterIvar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.createChapterIvar">[docs]</a>    <span class="k">def</span> <span class="nf">createChapterIvar</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">cc</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">chapterController</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cc</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_chapters</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">getSelectedChapter</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#@+node:ekr.20070424084651: *6* ensurePositionExists (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.ensurePositionExists"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.ensurePositionExists">[docs]</a>    <span class="k">def</span> <span class="nf">ensurePositionExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Return True if w.leo_p exists or can be reconstituted.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">positionExists</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;***** does not exist&#39;</span><span class="p">,</span><span class="n">w</span><span class="o">.</span><span class="n">leo_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">all_unique_positions</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">p2</span><span class="o">.</span><span class="n">v</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">v</span> <span class="o">==</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_v</span><span class="p">:</span>
                    <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                 <span class="c"># This *can* happen when selecting a deleted node.</span>
                <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>
                <span class="k">return</span> <span class="bp">False</span>
    <span class="c">#@+node:ekr.20070424080640: *6* deactivateActiveEditor (leoBody)</span>
    <span class="c"># Not used in Qt.</span>
</div>
<div class="viewcode-block" id="leoBody.deactivateActiveEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.deactivateActiveEditor">[docs]</a>    <span class="k">def</span> <span class="nf">deactivateActiveEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Inactivate the previously active editor.&#39;&#39;&#39;</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span>

        <span class="c"># Don&#39;t capture ivars here! assignPositionToEditor keeps them up-to-date. (??)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="n">w2</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">w2</span> <span class="o">!=</span> <span class="n">w</span> <span class="ow">and</span> <span class="n">w2</span><span class="o">.</span><span class="n">leo_active</span><span class="p">:</span>
                <span class="n">w2</span><span class="o">.</span><span class="n">leo_active</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unselectLabel</span><span class="p">(</span><span class="n">w2</span><span class="p">)</span>
                <span class="k">return</span>
    <span class="c">#@+node:ekr.20060530204135: *6* recolorWidget (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.recolorWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.recolorWidget">[docs]</a>    <span class="k">def</span> <span class="nf">recolorWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">old_w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>

        <span class="c"># g.trace(&#39;w&#39;,id(w),p.h,len(w.getAllText()))</span>

        <span class="c"># Save.</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="n">w</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">colorizer</span><span class="o">.</span><span class="n">colorize</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">incremental</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">interruptable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c"># Restore.</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="n">old_w</span>
    <span class="c">#@+node:ekr.20070424084012: *6* switchToChapter (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.switchToChapter"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.switchToChapter">[docs]</a>    <span class="k">def</span> <span class="nf">switchToChapter</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;select w.leo_chapter.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">cc</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">chapterController</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;leo_chapter&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span><span class="p">:</span>
            <span class="n">chapter</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">chapter</span> <span class="ow">and</span> <span class="n">chapter</span><span class="o">.</span><span class="n">name</span>
            <span class="n">oldChapter</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">getSelectedChapter</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">chapter</span> <span class="o">!=</span> <span class="n">oldChapter</span><span class="p">:</span>
                <span class="c"># g.trace(&#39;===&#39;,&#39;old&#39;,oldChapter.name,&#39;new&#39;,name,w.leo_p)</span>
                <span class="n">cc</span><span class="o">.</span><span class="n">selectChapterByName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070424092855: *6* updateInjectedIvars (leoBody)</span>
    <span class="c"># Called from addEditor and assignPositionToEditor.</span>
</div>
<div class="viewcode-block" id="leoBody.updateInjectedIvars"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.updateInjectedIvars">[docs]</a>    <span class="k">def</span> <span class="nf">updateInjectedIvars</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">cc</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">chapterController</span>

        <span class="c"># Was in ctor.</span>
        <span class="n">use_chapters</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getBool</span><span class="p">(</span><span class="s">&#39;use_chapters&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cc</span> <span class="ow">and</span> <span class="n">use_chapters</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="n">getSelectedChapter</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">leo_chapter</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">w</span><span class="o">.</span><span class="n">leo_v</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">leo_p</span><span class="o">.</span><span class="n">v</span>
        <span class="n">w</span><span class="o">.</span><span class="n">leo_label_s</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span>

        <span class="c"># g.trace(&#39;   ===&#39;, id(w),w.leo_chapter and w.leo_chapter.name,p.h)</span>
    <span class="c">#@+node:ekr.20031218072017.1329: *4* onBodyChanged (leoBody)</span>
    <span class="c"># This is the only key handler for the body pane.</span></div>
<div class="viewcode-block" id="leoBody.onBodyChanged"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.onBodyChanged">[docs]</a>    <span class="k">def</span> <span class="nf">onBodyChanged</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">undoType</span><span class="p">,</span><span class="n">oldSel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">oldText</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">oldYview</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Update Leo after the body has been changed.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>
        <span class="n">insert</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getInsertPoint</span><span class="p">()</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">insert</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">insert</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
        <span class="n">newText</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span> <span class="c"># Note: getAllText converts to unicode.</span>
        <span class="n">newSel</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">oldText</span><span class="p">:</span>
            <span class="n">oldText</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">b</span> <span class="p">;</span> <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="n">oldText</span> <span class="o">!=</span> <span class="n">newText</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">changed</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="c"># g.trace(repr(ch),&#39;changed:&#39;,changed,&#39;newText:&#39;,len(newText),&#39;w&#39;,w)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;oldSel&#39;</span><span class="p">,</span><span class="n">oldSel</span><span class="p">,</span><span class="s">&#39;newSel&#39;</span><span class="p">,</span><span class="n">newSel</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">undoer</span><span class="o">.</span><span class="n">setUndoTypingParams</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">undoType</span><span class="p">,</span>
            <span class="n">oldText</span><span class="o">=</span><span class="n">oldText</span><span class="p">,</span><span class="n">newText</span><span class="o">=</span><span class="n">newText</span><span class="p">,</span><span class="n">oldSel</span><span class="o">=</span><span class="n">oldSel</span><span class="p">,</span><span class="n">newSel</span><span class="o">=</span><span class="n">newSel</span><span class="p">,</span><span class="n">oldYview</span><span class="o">=</span><span class="n">oldYview</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">setBodyString</span><span class="p">(</span><span class="n">newText</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">insertSpot</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">getInsertPoint</span><span class="p">()</span>
        <span class="c">#@+&lt;&lt; recolor the body &gt;&gt;</span>
        <span class="c">#@+node:ekr.20051026083733.6: *5* &lt;&lt; recolor the body &gt;&gt;</span>
        <span class="n">body</span><span class="o">.</span><span class="n">colorizer</span><span class="o">.</span><span class="n">interrupt</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">scanForTabWidth</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">recolor</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">incremental</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">forceFullRecolorFlag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forceFullRecolorFlag</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTesting</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTestDict</span><span class="p">[</span><span class="s">&#39;colorized&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="c">#@-&lt;&lt; recolor the body &gt;&gt;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">changed</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateEditors</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">contentModified</span><span class="p">()</span>
        <span class="c">#@+&lt;&lt; update icons if necessary &gt;&gt;</span>
        <span class="c">#@+node:ekr.20051026083733.7: *5* &lt;&lt; update icons if necessary &gt;&gt;</span>

        <span class="n">redraw_flag</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c"># Update dirty bits.</span>
        <span class="c"># p.setDirty() sets all cloned and @file dirty bits.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">isDirty</span><span class="p">()</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">setDirty</span><span class="p">():</span>
            <span class="n">redraw_flag</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c"># Update icons. p.v.iconVal may not exist during unit tests.</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">computeIcon</span><span class="p">()</span>
        <span class="c"># g.trace(&#39;new val:&#39;,val,&#39;old val:&#39;,hasattr(p.v,&#39;iconVal&#39;) and p.v.iconVal or &#39;&lt;None&gt;&#39;)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="p">,</span><span class="s">&quot;iconVal&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">!=</span> <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">iconVal</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">iconVal</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">redraw_flag</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">redraw_flag</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">redraw_after_icons_changed</span><span class="p">()</span>
        <span class="c">#@-&lt;&lt; update icons if necessary &gt;&gt;</span>
    <span class="c">#@+node:ekr.20031218072017.3658: *4* oops</span></div>
<div class="viewcode-block" id="leoBody.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;leoBody oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.4018: *4* Text (leoBody)</span>
    <span class="c">#@+node:ekr.20031218072017.4030: *5* getInsertLines</span></div>
<div class="viewcode-block" id="leoBody.getInsertLines"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.getInsertLines">[docs]</a>    <span class="k">def</span> <span class="nf">getInsertLines</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Return before,after where:</span>

<span class="sd">        before is all the lines before the line containing the insert point.</span>
<span class="sd">        sel is the line containing the insert point.</span>
<span class="sd">        after is all the lines after the line containing the insert point.</span>

<span class="sd">        All lines end in a newline, except possibly the last line.&quot;&quot;&quot;</span>

        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">insert</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getInsertPoint</span><span class="p">()</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">getLine</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">insert</span><span class="p">)</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span>
        <span class="n">ins</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">:]</span>

        <span class="n">before</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">before</span><span class="p">)</span>
        <span class="n">ins</span>    <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">ins</span><span class="p">)</span>
        <span class="n">after</span>  <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">before</span><span class="p">,</span><span class="n">ins</span><span class="p">,</span><span class="n">after</span>
    <span class="c">#@+node:ekr.20031218072017.4031: *5* getSelectionAreas</span></div>
<div class="viewcode-block" id="leoBody.getSelectionAreas"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.getSelectionAreas">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectionAreas</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Return before,sel,after where:</span>

<span class="sd">        before is the text before the selected text</span>
<span class="sd">        (or the text before the insert point if no selection)</span>
<span class="sd">        sel is the selected text (or &quot;&quot; if no selection)</span>
<span class="sd">        after is the text after the selected text</span>
<span class="sd">        (or the text after the insert point if no selection)&quot;&quot;&quot;</span>

        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">before</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]</span>
        <span class="n">sel</span>    <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span>
        <span class="n">after</span>  <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">:]</span>

        <span class="n">before</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">before</span><span class="p">)</span>
        <span class="n">sel</span>    <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span>
        <span class="n">after</span>  <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">before</span><span class="p">,</span><span class="n">sel</span><span class="p">,</span><span class="n">after</span>
    <span class="c">#@+node:ekr.20031218072017.2377: *5* getSelectionLines</span></div>
<div class="viewcode-block" id="leoBody.getSelectionLines"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.getSelectionLines">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectionLines</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Return before,sel,after where:</span>

<span class="sd">        before is the all lines before the selected text</span>
<span class="sd">        (or the text before the insert point if no selection)</span>
<span class="sd">        sel is the selected text (or &quot;&quot; if no selection)</span>
<span class="sd">        after is all lines after the selected text</span>
<span class="sd">        (or the text after the insert point if no selection)&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">batchMode</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span>

        <span class="c"># At present, called only by c.getBodyLines.</span>
        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">getLine</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span><span class="p">,</span><span class="n">junk</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">getLine</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
            <span class="n">junk</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">getLine</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">])</span>
        <span class="n">sel</span>    <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">])</span>
        <span class="n">after</span>  <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span>
        <span class="c"># g.trace(i,j,&#39;sel&#39;,repr(s[i:j]),&#39;after&#39;,repr(after))</span>
        <span class="k">return</span> <span class="n">before</span><span class="p">,</span><span class="n">sel</span><span class="p">,</span><span class="n">after</span> <span class="c"># 3 strings.</span>
    <span class="c">#@+node:ekr.20031218072017.4037: *5* setSelectionAreas (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.setSelectionAreas"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.setSelectionAreas">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectionAreas</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">before</span><span class="p">,</span><span class="n">sel</span><span class="p">,</span><span class="n">after</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Replace the body text by before + sel + after and</span>
<span class="sd">        set the selection so that the sel text is selected.&quot;&quot;&quot;</span>

        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>

        <span class="c"># 2012/02/05: save/restore Yscroll position.</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getYScrollPosition</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">before</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
        <span class="n">sel</span> <span class="o">=</span> <span class="n">sel</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">after</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
        <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">before</span><span class="o">+</span><span class="n">sel</span><span class="o">+</span><span class="n">after</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">before</span><span class="p">)</span>
        <span class="n">j</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">before</span><span class="p">)</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="c"># g.trace(i,j,repr(sel))</span>
        <span class="n">w</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">j</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">setYScrollPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span>
    <span class="c">#@+node:ekr.20031218072017.4038: *5* get/setYScrollPosition (leoBody)</span></div>
<div class="viewcode-block" id="leoBody.getYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.getYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="o">.</span><span class="n">getYScrollPosition</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">i</span>
</div>
<div class="viewcode-block" id="leoBody.setYScrollPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.setYScrollPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setYScrollPosition</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="o">.</span><span class="n">setYScrollPosition</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20081005065934.6: *3* leoBody: may be defined in subclasses</span>
    <span class="c"># These are optional.</span></div>
<div class="viewcode-block" id="leoBody.after_idle"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.after_idle">[docs]</a>    <span class="k">def</span> <span class="nf">after_idle</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">idle_handler</span><span class="p">,</span><span class="n">thread_count</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="leoBody.forceFullRecolor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.forceFullRecolor">[docs]</a>    <span class="k">def</span> <span class="nf">forceFullRecolor</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forceFullRecolorFlag</span> <span class="o">=</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="leoBody.initAfterLoad"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.initAfterLoad">[docs]</a>    <span class="k">def</span> <span class="nf">initAfterLoad</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20111115100829.9789: *3* body.bodyCtrl property</span></div>
    <span class="k">def</span> <span class="nf">__get_bodyCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span>

    <span class="k">def</span> <span class="nf">__set_bodyCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">val</span>


    <span class="n">bodyCtrl</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">__get_bodyCtrl</span><span class="p">,</span>
        <span class="n">__set_bodyCtrl</span><span class="p">,</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="s">&quot;body.bodyCtrl property&quot;</span>
    <span class="p">)</span>
    <span class="c">#@+node:ekr.20130303133655.10213: *3* leoBody.attribute_test</span>
<div class="viewcode-block" id="leoBody.pyflake_test"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoBody.pyflake_test">[docs]</a>    <span class="k">def</span> <span class="nf">pyflake_test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        
        <span class="c"># Pylint correctly finds attribute errors: xyzzy22 and def_stack.</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyzzy22</span><span class="p">)</span>
        
        <span class="c"># pyflakes incorrectly complains that dn is not used.</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">def_stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># Add the code at the top of the stack.</span>
        <span class="n">dn</span><span class="o">.</span><span class="n">code</span> <span class="o">+=</span> <span class="s">&#39;abc&#39;</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.3678: ** class leoFrame</span></div></div>
<div class="viewcode-block" id="leoFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame">[docs]</a><span class="k">class</span> <span class="nc">leoFrame</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;The base class for all Leo windows.&quot;&quot;&quot;</span>

    <span class="n">instances</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.3679: *3*   leoFrame.__init__</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">gui</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span> <span class="o">=</span> <span class="n">gui</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconBarClass</span> <span class="o">=</span> <span class="n">nullIconBarClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusLineClass</span> <span class="o">=</span> <span class="n">nullStatusLineClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Must be created by subclasses.</span>

        <span class="c"># Objects attached to this frame.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorPanel</span> <span class="o">=</span> <span class="bp">None</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">comparePanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findPanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontPanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isNullFrame</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">miniBufferWidget</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefsPanel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useMiniBufferWidget</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c"># Gui-independent data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">componentsDict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># Keys are names, values are componentClass instances.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">es_newlines</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># newline count for this log stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openDirectory</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saved</span><span class="o">=</span><span class="bp">False</span> <span class="c"># True if ever saved</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitVerticalFlag</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_ratio</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span> <span class="c"># Set by initialRatios later.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startupWindow</span><span class="o">=</span><span class="bp">False</span> <span class="c"># True if initially opened window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stylesheet</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># The contents of &lt;?xml-stylesheet...?&gt; line.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_width</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># The tab width in effect in this pane.</span>
    <span class="c">#@+node:ekr.20051009045404: *4* createFirstTreeNode</span>
<div class="viewcode-block" id="leoFrame.createFirstTreeNode"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.createFirstTreeNode">[docs]</a>    <span class="k">def</span> <span class="nf">createFirstTreeNode</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">vnode</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">v</span><span class="o">.</span><span class="n">initHeadString</span><span class="p">(</span><span class="s">&quot;NewHeadline&quot;</span><span class="p">)</span>
        <span class="c"># New in Leo 4.5: p.moveToRoot would be wrong: the node hasn&#39;t been linked yet.</span>
        <span class="n">p</span><span class="o">.</span><span class="n">_linkAsRoot</span><span class="p">(</span><span class="n">oldRoot</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="c"># c.setRootPosition() # New in 4.4.2.</span>
    <span class="c">#@+node:ekr.20061109125528.1: *3* Must be defined in base class</span>
    <span class="c">#@+node:ekr.20031218072017.3689: *4* initialRatios (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.initialRatios"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.initialRatios">[docs]</a>    <span class="k">def</span> <span class="nf">initialRatios</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;initial_splitter_orientation&quot;</span><span class="p">,</span><span class="s">&quot;string&quot;</span><span class="p">)</span>
        <span class="n">verticalFlag</span> <span class="o">=</span> <span class="n">s</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">s</span> <span class="o">!=</span> <span class="s">&quot;h&quot;</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">!=</span> <span class="s">&quot;horizontal&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">verticalFlag</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getRatio</span><span class="p">(</span><span class="s">&quot;initial_vertical_ratio&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span> <span class="n">r</span> <span class="o">=</span> <span class="mf">0.5</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getRatio</span><span class="p">(</span><span class="s">&quot;initial_vertical_secondary_ratio&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r2</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">r2</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">r2</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span> <span class="n">r2</span> <span class="o">=</span> <span class="mf">0.8</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getRatio</span><span class="p">(</span><span class="s">&quot;initial_horizontal_ratio&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span> <span class="n">r</span> <span class="o">=</span> <span class="mf">0.3</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getRatio</span><span class="p">(</span><span class="s">&quot;initial_horizontal_secondary_ratio&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r2</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">r2</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">r2</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span> <span class="n">r2</span> <span class="o">=</span> <span class="mf">0.8</span>

        <span class="c"># g.trace(r,r2)</span>
        <span class="k">return</span> <span class="n">verticalFlag</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">r2</span>
    <span class="c">#@+node:ekr.20031218072017.3690: *4* longFileName &amp; shortFileName</span></div>
<div class="viewcode-block" id="leoFrame.longFileName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.longFileName">[docs]</a>    <span class="k">def</span> <span class="nf">longFileName</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">mFileName</span>
</div>
<div class="viewcode-block" id="leoFrame.shortFileName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.shortFileName">[docs]</a>    <span class="k">def</span> <span class="nf">shortFileName</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">shortFileName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3691: *4* oops</span></div>
<div class="viewcode-block" id="leoFrame.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;leoFrame oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3692: *4* promptForSave (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.promptForSave"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.promptForSave">[docs]</a>    <span class="k">def</span> <span class="nf">promptForSave</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Prompt the user to save changes.</span>

<span class="sd">        Return True if the user vetos the quit or save operation.&quot;&quot;&quot;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">theType</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">quitting</span><span class="p">,</span> <span class="s">&quot;quitting?&quot;</span><span class="p">,</span> <span class="s">&quot;closing?&quot;</span><span class="p">)</span>

        <span class="c"># See if we are in quick edit/save mode.</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">rootPosition</span><span class="p">()</span>
        <span class="n">quick_save</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">mFileName</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">root</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">isAtEditNode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">quick_save</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">shortFileName</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">atEditNodeName</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">,</span><span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">runAskYesNoCancelDialog</span><span class="p">(</span><span class="n">c</span><span class="p">,</span>
            <span class="s">&quot;Confirm&quot;</span><span class="p">,</span>
            <span class="s">&#39;Save changes to </span><span class="si">%s</span><span class="s"> before </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">theType</span><span class="p">))</span>

        <span class="c"># g.pr(answer)</span>
        <span class="k">if</span> <span class="n">answer</span> <span class="o">==</span> <span class="s">&quot;cancel&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span> <span class="c"># Veto.</span>
        <span class="k">elif</span> <span class="n">answer</span> <span class="o">==</span> <span class="s">&quot;no&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span> <span class="c"># Don&#39;t save and don&#39;t veto.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">:</span>
                <span class="n">root</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">rootPosition</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">root</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="ow">and</span> <span class="n">root</span><span class="o">.</span><span class="n">isAtEditNode</span><span class="p">():</span>
                    <span class="c"># There is only a single @edit node in the outline.</span>
                    <span class="c"># A hack to allow &quot;quick edit&quot; of non-Leo files.</span>
                    <span class="c"># See https://bugs.launchpad.net/leo-editor/+bug/381527</span>
                    <span class="c"># Write the @edit node if needed.</span>
                    <span class="k">if</span> <span class="n">root</span><span class="o">.</span><span class="n">isDirty</span><span class="p">():</span>
                        <span class="n">c</span><span class="o">.</span><span class="n">atFileCommands</span><span class="o">.</span><span class="n">writeOneAtEditNode</span><span class="p">(</span><span class="n">root</span><span class="p">,</span>
                            <span class="n">toString</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">False</span> <span class="c"># Don&#39;t save and don&#39;t veto.</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">mFileName</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">runSaveFileDialog</span><span class="p">(</span>
                        <span class="n">initialfile</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="s">&quot;Save&quot;</span><span class="p">,</span>
                        <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s">&quot;Leo files&quot;</span><span class="p">,</span> <span class="s">&quot;*.leo&quot;</span><span class="p">)],</span>
                        <span class="n">defaultextension</span><span class="o">=</span><span class="s">&quot;.leo&quot;</span><span class="p">)</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">bringToFront</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">:</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">fileCommands</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">mFileName</span><span class="p">)</span>
                <span class="k">return</span> <span class="ow">not</span> <span class="n">ok</span> <span class="c"># New in 4.2: Veto if the save did not succeed.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span> <span class="c"># Veto.</span>
    <span class="c">#@+node:ekr.20031218072017.1375: *4* frame.scanForTabWidth (must be fast)</span></div>
<div class="viewcode-block" id="leoFrame.scanForTabWidth"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.scanForTabWidth">[docs]</a>    <span class="k">def</span> <span class="nf">scanForTabWidth</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">tab_width</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">findTabWidthDirectives</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">tab_width</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">setTabWidth</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">tab_width</span> <span class="o">=</span> <span class="n">w</span> <span class="c"># 2011/10/24</span>
        <span class="c"># g.trace(w)</span>
    <span class="c">#@+node:ekr.20061119120006: *4* Icon area convenience methods</span></div>
<div class="viewcode-block" id="leoFrame.addIconButton"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.addIconButton">[docs]</a>    <span class="k">def</span> <span class="nf">addIconButton</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="leoFrame.addIconRow"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.addIconRow">[docs]</a>    <span class="k">def</span> <span class="nf">addIconRow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">addRow</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.addIconWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.addIconWidget">[docs]</a>    <span class="k">def</span> <span class="nf">addIconWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoFrame.clearIconBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.clearIconBar">[docs]</a>    <span class="k">def</span> <span class="nf">clearIconBar</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.createIconBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.createIconBar">[docs]</a>    <span class="k">def</span> <span class="nf">createIconBar</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBarClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span>
</div>
<div class="viewcode-block" id="leoFrame.getIconBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.getIconBar">[docs]</a>    <span class="k">def</span> <span class="nf">getIconBar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBarClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span>
</div>
    <span class="n">getIconBarObject</span> <span class="o">=</span> <span class="n">getIconBar</span>

<div class="viewcode-block" id="leoFrame.getNewIconFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.getNewIconFrame">[docs]</a>    <span class="k">def</span> <span class="nf">getNewIconFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBarClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">getNewFrame</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.hideIconBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hideIconBar">[docs]</a>    <span class="k">def</span> <span class="nf">hideIconBar</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.showIconBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.showIconBar">[docs]</a>    <span class="k">def</span> <span class="nf">showIconBar</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20041223105114.1: *4* Status line convenience methods</span></div>
<div class="viewcode-block" id="leoFrame.createStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.createStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">createStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLineClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span>
</div>
<div class="viewcode-block" id="leoFrame.clearStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.clearStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">clearStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.disableStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.disableStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">disableStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoFrame.enableStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.enableStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">enableStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoFrame.getStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.getStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">getStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span>
</div>
    <span class="n">getStatusObject</span> <span class="o">=</span> <span class="n">getStatusLine</span>

<div class="viewcode-block" id="leoFrame.putStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.putStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">putStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoFrame.setFocusStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.setFocusStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">setFocusStatusLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">setFocus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.statusLineIsEnabled"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.statusLineIsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">statusLineIsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="leoFrame.updateStatusLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.updateStatusLine">[docs]</a>    <span class="k">def</span> <span class="nf">updateStatusLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusLine</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070130115927.4: *4* Cut/Copy/Paste (leoFrame)</span>
    <span class="c">#@+node:ekr.20070130115927.5: *5* copyText (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.copyText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.copyText">[docs]</a>    <span class="k">def</span> <span class="nf">copyText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Copy the selected text from the widget to the clipboard.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span>
        <span class="n">wname</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">widget_name</span><span class="p">(</span><span class="n">w</span><span class="p">))</span> <span class="ow">or</span> <span class="s">&#39;&lt;no widget&gt;&#39;</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isTextWidget</span><span class="p">(</span><span class="n">w</span><span class="p">),</span><span class="n">wname</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isTextWidget</span><span class="p">(</span><span class="n">w</span><span class="p">):</span> <span class="k">return</span>

        <span class="c"># Set the clipboard text.</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
    <span class="n">OnCopyFromMenu</span> <span class="o">=</span> <span class="n">copyText</span>
    <span class="c">#@+node:ekr.20070130115927.6: *5* leoFrame.cutText</span>
<div class="viewcode-block" id="leoFrame.cutText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.cutText">[docs]</a>    <span class="k">def</span> <span class="nf">cutText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Invoked from the mini-buffer and from shortcuts.&#39;&#39;&#39;</span>

        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isTextWidget</span><span class="p">(</span><span class="n">w</span><span class="p">):</span> <span class="k">return</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">widget_name</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">oldSel</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="n">oldText</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>

        <span class="c"># Update the widget and set the clipboard text.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">replaceClipboardWith</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">forceFullRecolor</span><span class="p">()</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">onBodyChanged</span><span class="p">(</span><span class="s">&#39;Cut&#39;</span><span class="p">,</span><span class="n">oldSel</span><span class="o">=</span><span class="n">oldSel</span><span class="p">,</span><span class="n">oldText</span><span class="o">=</span><span class="n">oldText</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;head&#39;</span><span class="p">):</span>
            <span class="c"># The headline is not officially changed yet.</span>
            <span class="c"># p.initHeadString(s)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
            <span class="c"># 2011/11/14: Not used at present.</span>
            <span class="c"># width = f.tree.headWidth(p=None,s=s)</span>
            <span class="c"># w.setWidth(width)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
</div>
    <span class="n">OnCutFromMenu</span> <span class="o">=</span> <span class="n">cutText</span>
    <span class="c">#@+node:ekr.20070130115927.7: *5* leoFrame.pasteText</span>
<div class="viewcode-block" id="leoFrame.pasteText"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.pasteText">[docs]</a>    <span class="k">def</span> <span class="nf">pasteText</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">middleButton</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Paste the clipboard into a widget.</span>
<span class="sd">        If middleButton is True, support x-windows middle-mouse-button easter-egg.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span>
        <span class="n">wname</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">widget_name</span><span class="p">(</span><span class="n">w</span><span class="p">))</span> <span class="ow">or</span> <span class="s">&#39;&lt;no widget&gt;&#39;</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isTextWidget</span><span class="p">(</span><span class="n">w</span><span class="p">),</span><span class="n">w</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isTextWidget</span><span class="p">(</span><span class="n">w</span><span class="p">):</span> <span class="k">return</span>

        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">oldSel</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>  <span class="c"># Returns insert point if no selection.</span>
        <span class="n">oldText</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">middleButton</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">previousSelection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">start</span><span class="p">,</span><span class="n">end</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">previousSelection</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
            <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">previousSelection</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">getTextFromClipboard</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="c"># g.trace(&#39;pasteText&#39;,&#39;wname&#39;,wname,&#39;s&#39;,s,g.callers())</span>
        <span class="n">singleLine</span> <span class="o">=</span> <span class="n">wname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;head&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">wname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;minibuffer&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">singleLine</span><span class="p">:</span>
            <span class="c"># Strip trailing newlines so the truncation doesn&#39;t cause confusion.</span>
            <span class="k">while</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">s</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="p">[:</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c"># Update the widget.</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">see</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="c"># 2011/06/01</span>

        <span class="k">if</span> <span class="n">wname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">forceFullRecolor</span><span class="p">()</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">onBodyChanged</span><span class="p">(</span><span class="s">&#39;Paste&#39;</span><span class="p">,</span><span class="n">oldSel</span><span class="o">=</span><span class="n">oldSel</span><span class="p">,</span><span class="n">oldText</span><span class="o">=</span><span class="n">oldText</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">singleLine</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">s</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="p">[:</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="c"># 2011/11/14: headline width methods do nothing at present.</span>
            <span class="c"># if wname.startswith(&#39;head&#39;):</span>
                <span class="c"># The headline is not officially changed yet.</span>
                <span class="c"># p.initHeadString(s)</span>
                <span class="c"># width = f.tree.headWidth(p=None,s=s)</span>
                <span class="c"># w.setWidth(width)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>
</div>
    <span class="n">OnPasteFromMenu</span> <span class="o">=</span> <span class="n">pasteText</span>
    <span class="c">#@+node:ekr.20061016071937: *5* OnPaste (To support middle-button paste)</span>
<div class="viewcode-block" id="leoFrame.OnPaste"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.OnPaste">[docs]</a>    <span class="k">def</span> <span class="nf">OnPaste</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pasteText</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span><span class="n">middleButton</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3980: *4* Edit Menu... (leoFrame)</span>
    <span class="c">#@+node:ekr.20031218072017.3981: *5* abortEditLabelCommand (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.abortEditLabelCommand"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.abortEditLabelCommand">[docs]</a>    <span class="k">def</span> <span class="nf">abortEditLabelCommand</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;End editing of a headline and revert to its previous value.&#39;&#39;&#39;</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">tree</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">batchMode</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">notValidInBatchMode</span><span class="p">(</span><span class="s">&quot;Abort Edit Headline&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c"># Revert the headline text.</span>
        <span class="c"># Calling c.setHeadString is required.</span>
        <span class="c"># Otherwise c.redraw would undo the change!</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setHeadString</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">tree</span><span class="o">.</span><span class="n">revertHeadline</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3982: *5* frame.endEditLabelCommand</span></div>
<div class="viewcode-block" id="leoFrame.endEditLabelCommand"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.endEditLabelCommand">[docs]</a>    <span class="k">def</span> <span class="nf">endEditLabelCommand</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;End editing of a headline and move focus to the body pane.&#39;&#39;&#39;</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">k</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">batchMode</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">notValidInBatchMode</span><span class="p">(</span><span class="s">&quot;End Edit Headline&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">endEditing</span><span class="p">()</span>
            <span class="n">c</span><span class="o">.</span><span class="n">treeEditFocusHelper</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">k</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">stayInTreeAfterEdit</span><span class="p">:</span>
                <span class="n">k</span><span class="o">.</span><span class="n">setDefaultInputState</span><span class="p">()</span>
                <span class="c"># Recolor the *body* text, **not** the headline.</span>
                <span class="n">k</span><span class="o">.</span><span class="n">showStateAndMode</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3983: *5* insertHeadlineTime</span></div>
<div class="viewcode-block" id="leoFrame.insertHeadlineTime"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.insertHeadlineTime">[docs]</a>    <span class="k">def</span> <span class="nf">insertHeadlineTime</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Insert a date/time stamp in the headline of the selected node.&#39;&#39;&#39;</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">batchMode</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">notValidInBatchMode</span><span class="p">(</span><span class="s">&quot;Insert Headline Time&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">c</span><span class="o">.</span><span class="n">endEditing</span><span class="p">()</span>

        <span class="n">time</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getTime</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">s</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">s</span><span class="p">,</span> <span class="n">time</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="n">time</span>
        
        <span class="n">c</span><span class="o">.</span><span class="n">redrawAndEdit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3680: *3* Must be defined in subclasses</span>
    <span class="c">#@+node:ekr.20031218072017.3683: *4* Config...</span></div>
<div class="viewcode-block" id="leoFrame.resizePanesToRatio"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.resizePanesToRatio">[docs]</a>    <span class="k">def</span> <span class="nf">resizePanesToRatio</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ratio</span><span class="p">,</span><span class="n">secondary_ratio</span><span class="p">):</span>    <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.setInitialWindowGeometry"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.setInitialWindowGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">setInitialWindowGeometry</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                    <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.setTopGeometry"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.setTopGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">setTopGeometry</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">adjustSize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>      <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3681: *4* Gui-dependent commands (leoFrame)</span>
    <span class="c"># In the Edit menu...</span>
</div>
<div class="viewcode-block" id="leoFrame.OnCopy"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.OnCopy">[docs]</a>    <span class="k">def</span> <span class="nf">OnCopy</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.OnCut"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.OnCut">[docs]</a>    <span class="k">def</span> <span class="nf">OnCut</span>   <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c">#def OnCutFromMenu  (self,event=None):     self.oops()</span>
    <span class="c">#def OnCopyFromMenu (self,event=None):     self.oops()</span>

    <span class="c"># Expanding and contracting panes.</span></div>
<div class="viewcode-block" id="leoFrame.contractPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.contractPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractPane</span>         <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.expandPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.expandPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandPane</span>           <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.contractBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.contractBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractBodyPane</span>     <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.contractLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.contractLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractLogPane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.contractOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.contractOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">contractOutlinePane</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.expandBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.expandBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandBodyPane</span>       <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.expandLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.expandLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandLogPane</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.expandOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.expandOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">expandOutlinePane</span>    <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.fullyExpandBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.fullyExpandBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandBodyPane</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.fullyExpandLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.fullyExpandLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandLogPane</span>   <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.fullyExpandPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.fullyExpandPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandPane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.fullyExpandOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.fullyExpandOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandOutlinePane</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.hideBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hideBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">hideBodyPane</span>         <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.hideLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hideLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">hideLogPane</span>          <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.hidePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hidePane">[docs]</a>    <span class="k">def</span> <span class="nf">hidePane</span>             <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.hideOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hideOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">hideOutlinePane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># In the Window menu...</span></div>
<div class="viewcode-block" id="leoFrame.cascade"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.cascade">[docs]</a>    <span class="k">def</span> <span class="nf">cascade</span>              <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.equalSizedPanes"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.equalSizedPanes">[docs]</a>    <span class="k">def</span> <span class="nf">equalSizedPanes</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.hideLogWindow"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.hideLogWindow">[docs]</a>    <span class="k">def</span> <span class="nf">hideLogWindow</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.minimizeAll"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.minimizeAll">[docs]</a>    <span class="k">def</span> <span class="nf">minimizeAll</span>          <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.resizeToScreen"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.resizeToScreen">[docs]</a>    <span class="k">def</span> <span class="nf">resizeToScreen</span>       <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.toggleActivePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.toggleActivePane">[docs]</a>    <span class="k">def</span> <span class="nf">toggleActivePane</span>     <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.toggleSplitDirection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.toggleSplitDirection">[docs]</a>    <span class="k">def</span> <span class="nf">toggleSplitDirection</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># In help menu...</span></div>
<div class="viewcode-block" id="leoFrame.leoHelp"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.leoHelp">[docs]</a>    <span class="k">def</span> <span class="nf">leoHelp</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3682: *4* Window...</span>
    <span class="c"># Important: nothing would be gained by calling gui versions of these methods:</span>
    <span class="c">#            they can be defined in a gui-dependent way in a subclass.</span>
</div>
<div class="viewcode-block" id="leoFrame.bringToFront"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.bringToFront">[docs]</a>    <span class="k">def</span> <span class="nf">bringToFront</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.deiconify"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.deiconify">[docs]</a>    <span class="k">def</span> <span class="nf">deiconify</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>       <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.get_window_info"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.get_window_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoFrame.lift"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.lift">[docs]</a>    <span class="k">def</span> <span class="nf">lift</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>            <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c">#@+node:ekr.20061109125528: *3* May be defined in subclasses</span>
    <span class="c">#@+node:ekr.20071027150501: *4* event handlers (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.OnBodyClick"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.OnBodyClick">[docs]</a>    <span class="k">def</span> <span class="nf">OnBodyClick</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="leoFrame.OnBodyRClick"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.OnBodyRClick">[docs]</a>    <span class="k">def</span> <span class="nf">OnBodyRClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20031218072017.3688: *4* getTitle &amp; setTitle</span></div>
<div class="viewcode-block" id="leoFrame.getTitle"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.getTitle">[docs]</a>    <span class="k">def</span> <span class="nf">getTitle</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</div>
<div class="viewcode-block" id="leoFrame.setTitle"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.setTitle">[docs]</a>    <span class="k">def</span> <span class="nf">setTitle</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">title</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="c">#@+node:ekr.20081005065934.3: *4* initAfterLoad  &amp; initCompleteHint (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.initAfterLoad"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.initAfterLoad">[docs]</a>    <span class="k">def</span> <span class="nf">initAfterLoad</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Provide offical hooks for late inits of components of Leo frames.&#39;&#39;&#39;</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">initAfterLoad</span><span class="p">()</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">initAfterLoad</span><span class="p">()</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">initAfterLoad</span><span class="p">()</span>
        <span class="c"># if frame.miniBufferWidget: frame.miniBufferWidget.initAfterLoad()</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">initAfterLoad</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.initCompleteHint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.initCompleteHint">[docs]</a>    <span class="k">def</span> <span class="nf">initCompleteHint</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20031218072017.3687: *4* setTabWidth (leoFrame)</span></div>
<div class="viewcode-block" id="leoFrame.setTabWidth"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.setTabWidth">[docs]</a>    <span class="k">def</span> <span class="nf">setTabWidth</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="c"># Subclasses may override this to affect drawing.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_width</span> <span class="o">=</span> <span class="n">w</span>
    <span class="c">#@+node:ekr.20060206093313: *3* Focus (leoFrame)</span>
    <span class="c"># For compatibility with old scripts.</span>
    <span class="c"># Using the commander methods directly is recommended.</span>
</div>
<div class="viewcode-block" id="leoFrame.getFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.getFocus">[docs]</a>    <span class="k">def</span> <span class="nf">getFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">get_focus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="c"># Used by wxGui plugin.</span>
</div>
<div class="viewcode-block" id="leoFrame.bodyWantsFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.bodyWantsFocus">[docs]</a>    <span class="k">def</span> <span class="nf">bodyWantsFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.logWantsFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.logWantsFocus">[docs]</a>    <span class="k">def</span> <span class="nf">logWantsFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">logWantsFocus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoFrame.minibufferWantsFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoFrame.minibufferWantsFocus">[docs]</a>    <span class="k">def</span> <span class="nf">minibufferWantsFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">minibufferWantsFocus</span><span class="p">()</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.3694: ** class leoLog (HighLevelInterface)</span></div></div>
<div class="viewcode-block" id="leoLog"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog">[docs]</a><span class="k">class</span> <span class="nc">leoLog</span> <span class="p">(</span><span class="n">HighLevelInterface</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;The base class for the log pane in Leo windows.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.3695: *3*  ctor (leoLog)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span> <span class="ow">or</span> <span class="bp">None</span>

        <span class="n">HighLevelInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
            <span class="c"># Init the base class</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newlines</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isNull</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c"># Official status variables.  Can be used by client code.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvasCtrl</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Set below. Same as self.canvasDict.get(self.tabName)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Set below. Same as self.textDict.get(self.tabName)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabName</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># The name of the active tab.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabFrame</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Same as self.frameDict.get(self.tabName)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvasDict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># Keys are page names.  Values are Tk.Canvas&#39;s.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c"># Keys are page names. Values are Tk.Frames.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logNumber</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># To create unique name fields for text widgets.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newTabCount</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># Number of new tabs created.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textDict</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c"># Keys are page names. Values are logCtrl&#39;s (text widgets).</span>
    <span class="c">#@+node:ekr.20070302101344: *3* Must be defined in the base class</span>
<div class="viewcode-block" id="leoLog.onActivateLog"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.onActivateLog">[docs]</a>    <span class="k">def</span> <span class="nf">onActivateLog</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">setLog</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoLog.disable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.disable">[docs]</a>    <span class="k">def</span> <span class="nf">disable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="leoLog.enable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.enable">[docs]</a>    <span class="k">def</span> <span class="nf">enable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">enabled</span>

    <span class="c">#@+node:ekr.20070302101023: *3* May be overridden (HighLevelInterface)</span>
    <span class="c"># def configure (self,*args,**keys):              pass</span></div>
<div class="viewcode-block" id="leoLog.configureBorder"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.configureBorder">[docs]</a>    <span class="k">def</span> <span class="nf">configureBorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">border</span><span class="p">):</span>               <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.createControl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.createControl">[docs]</a>    <span class="k">def</span> <span class="nf">createControl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>           <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.createCanvas"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.createCanvas">[docs]</a>    <span class="k">def</span> <span class="nf">createCanvas</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>                <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.createTextWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.createTextWidget">[docs]</a>    <span class="k">def</span> <span class="nf">createTextWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>        <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="leoLog.finishCreate"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.finishCreate">[docs]</a>    <span class="k">def</span> <span class="nf">finishCreate</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                        <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.initAfterLoad"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.initAfterLoad">[docs]</a>    <span class="k">def</span> <span class="nf">initAfterLoad</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                       <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.setColorFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.setColorFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setColorFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                  <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="k">pass</span></div>
<div class="viewcode-block" id="leoLog.setTabBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.setTabBindings">[docs]</a>    <span class="k">def</span> <span class="nf">setTabBindings</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>             <span class="k">pass</span>
    <span class="c">#@+node:ekr.20070302094848.1: *4* clearTab</span></div>
<div class="viewcode-block" id="leoLog.clearTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.clearTab">[docs]</a>    <span class="k">def</span> <span class="nf">clearTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectTab</span><span class="p">(</span><span class="n">tabName</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="n">wrap</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logCtrl</span>
        <span class="k">if</span> <span class="n">w</span><span class="p">:</span> <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070302094848.2: *4* createTab (leoLog)</span></div>
<div class="viewcode-block" id="leoLog.createTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.createTab">[docs]</a>    <span class="k">def</span> <span class="nf">createTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">createText</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">createText</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createTextWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvasDict</span> <span class="p">[</span><span class="n">tabName</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textDict</span> <span class="p">[</span><span class="n">tabName</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvasDict</span> <span class="p">[</span><span class="n">tabName</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textDict</span> <span class="p">[</span><span class="n">tabName</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span> <span class="p">[</span><span class="n">tabName</span><span class="p">]</span> <span class="o">=</span> <span class="n">tabName</span> <span class="c"># tabFrame</span>


    <span class="c">#@+node:ekr.20070302094848.4: *4* cycleTabFocus (leoLog)</span></div>
<div class="viewcode-block" id="leoLog.cycleTabFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.cycleTabFocus">[docs]</a>    <span class="k">def</span> <span class="nf">cycleTabFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Cycle keyboard focus between the tabs in the log pane.&#39;&#39;&#39;</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span> <span class="c"># Keys are page names. Values are Tk.Frames.</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabName</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">numberOfVisibleTabs</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">):</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">tabName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">i</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectTab</span><span class="p">(</span><span class="n">tabName</span><span class="p">)</span>
            <span class="k">return</span> 
    <span class="c">#@+node:ekr.20070302094848.5: *4* deleteTab</span></div>
<div class="viewcode-block" id="leoLog.deleteTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.deleteTab">[docs]</a>    <span class="k">def</span> <span class="nf">deleteTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">if</span> <span class="n">tabName</span> <span class="o">==</span> <span class="s">&#39;Log&#39;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">tabName</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;Find&#39;</span><span class="p">,</span><span class="s">&#39;Spell&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectTab</span><span class="p">(</span><span class="s">&#39;Log&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvasDict</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">textDict</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">tabName</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="n">tabName</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabName</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectTab</span><span class="p">(</span><span class="s">&#39;Log&#39;</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">invalidateFocus</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070302094848.7: *4* getSelectedTab</span></div>
<div class="viewcode-block" id="leoLog.getSelectedTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.getSelectedTab">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabName</span>
    <span class="c">#@+node:ekr.20070302094848.6: *4* hideTab</span></div>
<div class="viewcode-block" id="leoLog.hideTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.hideTab">[docs]</a>    <span class="k">def</span> <span class="nf">hideTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectTab</span><span class="p">(</span><span class="s">&#39;Log&#39;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070302094848.8: *4* lower/raiseTab</span></div>
<div class="viewcode-block" id="leoLog.lowerTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.lowerTab">[docs]</a>    <span class="k">def</span> <span class="nf">lowerTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">invalidateFocus</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoLog.raiseTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.raiseTab">[docs]</a>    <span class="k">def</span> <span class="nf">raiseTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">invalidateFocus</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20111122080923.10184: *4* orderedTabNames (leoLog)</span></div>
<div class="viewcode-block" id="leoLog.orderedTabNames"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.orderedTabNames">[docs]</a>    <span class="k">def</span> <span class="nf">orderedTabNames</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">leoLog</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="c">#@+node:ekr.20070302094848.9: *4* numberOfVisibleTabs (leoLog)</span></div>
<div class="viewcode-block" id="leoLog.numberOfVisibleTabs"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.numberOfVisibleTabs">[docs]</a>    <span class="k">def</span> <span class="nf">numberOfVisibleTabs</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">([</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">])</span>

    <span class="c">#@+node:ekr.20070302101304: *4* put &amp; putnl (leoLog)</span>
    <span class="c"># All output to the log stream eventually comes here.</span>
</div>
<div class="viewcode-block" id="leoLog.put"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">tabName</span><span class="o">=</span><span class="s">&#39;Log&#39;</span><span class="p">,</span><span class="n">from_redirect</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">print</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoLog.putnl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.putnl">[docs]</a>    <span class="k">def</span> <span class="nf">putnl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="o">=</span><span class="s">&#39;Log&#39;</span><span class="p">):</span>
        <span class="k">pass</span> <span class="c"># print (&#39;&#39;)</span>
    <span class="c">#@+node:ekr.20070302094848.10: *4* renameTab</span></div>
<div class="viewcode-block" id="leoLog.renameTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.renameTab">[docs]</a>    <span class="k">def</span> <span class="nf">renameTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">oldName</span><span class="p">,</span><span class="n">newName</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20070302094848.11: *4* selectTab (leoLog)</span></div>
<div class="viewcode-block" id="leoLog.selectTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.selectTab">[docs]</a>    <span class="k">def</span> <span class="nf">selectTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">createText</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>
        <span class="c"># widget unused.</span>

        <span class="sd">&#39;&#39;&#39;Create the tab if necessary and make it active.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">tabFrame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tabName</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tabFrame</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createTab</span><span class="p">(</span><span class="n">tabName</span><span class="p">,</span><span class="n">createText</span><span class="o">=</span><span class="n">createText</span><span class="p">)</span>

        <span class="c"># Update the status vars.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabName</span> <span class="o">=</span> <span class="n">tabName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvasCtrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvasDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tabName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tabName</span><span class="p">)</span>
            <span class="c"># logCtrl is now a property.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabFrame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tabName</span><span class="p">)</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># Absolutely do not do this here!</span>
            <span class="c"># It is a cause of the &#39;sticky focus&#39; problem.</span>
            <span class="n">c</span><span class="o">.</span><span class="n">widgetWantsFocusNow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logCtrl</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">tabFrame</span>
    <span class="c">#@+node:ekr.20031218072017.3700: *3* leoLog.oops</span></div>
<div class="viewcode-block" id="leoLog.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoLog.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;leoLog oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20111115100829.9785: *3* log.logCtrl property</span></div>
    <span class="k">def</span> <span class="nf">__get_logCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span>

    <span class="k">def</span> <span class="nf">__set_logCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">val</span>


    <span class="n">logCtrl</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">__get_logCtrl</span><span class="p">,</span>
        <span class="n">__set_logCtrl</span><span class="p">,</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="s">&quot;log.logCtrl property&quot;</span>
    <span class="p">)</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.3704: ** class leoTree</span>
<span class="c"># This would be useful if we removed all the tree redirection routines.</span>
<span class="c"># However, those routines are pretty ingrained into Leo...</span>
</div>
<div class="viewcode-block" id="leoTree"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree">[docs]</a><span class="k">class</span> <span class="nc">leoTree</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;The base class for the outline pane in Leo windows.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.3705: *3*   tree.__init__ (base class)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">edit_text_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c"># New in 3.12: keys vnodes, values are edit_widgets.</span>
            <span class="c"># New in 4.2: keys are vnodes, values are pairs (p,edit widgets).</span>

        <span class="c"># &quot;public&quot; ivars: correspond to setters &amp; getters.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drag_p</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_editPosition</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redrawCount</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># For traces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_chapters</span> <span class="o">=</span> <span class="bp">False</span> <span class="c"># May be overridden in subclasses.</span>

        <span class="c"># Define these here to keep pylint happy.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_select</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#@+node:ekr.20031218072017.3706: *3*  Must be defined in subclasses</span>
    <span class="c"># Bidings.</span>
<div class="viewcode-block" id="leoTree.setBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setBindings">[docs]</a>    <span class="k">def</span> <span class="nf">setBindings</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                         <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># Fonts.</span></div>
<div class="viewcode-block" id="leoTree.getFont"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.getFont">[docs]</a>    <span class="k">def</span> <span class="nf">getFont</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                              <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.setFont"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">fontName</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>      <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># Drawing &amp; scrolling.</span></div>
<div class="viewcode-block" id="leoTree.drawIcon"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.drawIcon">[docs]</a>    <span class="k">def</span> <span class="nf">drawIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>                                       <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw">[docs]</a>    <span class="k">def</span> <span class="nf">redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">forceDraw</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_now"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_now">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_now</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">forceDraw</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>    <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.scrollTo"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.scrollTo">[docs]</a>    <span class="k">def</span> <span class="nf">scrollTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>                           <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
    <span class="n">idle_scrollTo</span> <span class="o">=</span> <span class="n">scrollTo</span> <span class="c"># For compatibility.</span>

    <span class="c"># Headlines.</span>
<div class="viewcode-block" id="leoTree.editLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.editLabel">[docs]</a>    <span class="k">def</span> <span class="nf">editLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">selection</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.edit_widget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.edit_widget">[docs]</a>    <span class="k">def</span> <span class="nf">edit_widget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>                       <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="leoTree.headWidth"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.headWidth">[docs]</a>    <span class="k">def</span> <span class="nf">headWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>                <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="leoTree.setEditLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setEditLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setEditLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>  <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.setSelectedLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setSelectedLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectedLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>              <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.setUnselectedLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setUnselectedLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setUnselectedLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>            <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20061109165848: *3* Must be defined in base class</span>
    <span class="c">#@+node:ekr.20031218072017.3716: *4* Getters/Setters (tree)</span></div>
<div class="viewcode-block" id="leoTree.getEditTextDict"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.getEditTextDict">[docs]</a>    <span class="k">def</span> <span class="nf">getEditTextDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
        <span class="c"># New in 4.2: the default is an empty list.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_text_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">v</span><span class="p">,[])</span>
</div>
<div class="viewcode-block" id="leoTree.editPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.editPosition">[docs]</a>    <span class="k">def</span> <span class="nf">editPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editPosition</span>
</div>
<div class="viewcode-block" id="leoTree.setEditPosition"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setEditPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setEditPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_editPosition</span> <span class="o">=</span> <span class="n">p</span>
    <span class="c">#@+node:ekr.20040803072955.90: *4* head key handlers (leoTree)</span>
    <span class="c">#@+node:ekr.20040803072955.91: *5* onHeadChanged (leoTree)</span>
    <span class="c"># Tricky code: do not change without careful thought and testing.</span>
    <span class="c"># Important: This code *is* used.  See also, nativeTree.onHeadChanged.</span>
</div>
<div class="viewcode-block" id="leoTree.onHeadChanged"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.onHeadChanged">[docs]</a>    <span class="k">def</span> <span class="nf">onHeadChanged</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">undoType</span><span class="o">=</span><span class="s">&#39;Typing&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">e</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c"># e used in baseNativeTree.</span>

        <span class="sd">&#39;&#39;&#39;Officially change a headline.</span>
<span class="sd">        Set the old undo text to the previous revert point.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">undoer</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_widget</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">suppressHeadChanged</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;c.suppressHeadChanged&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;****** no w for p: </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="n">ch</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="c"># New in 4.4: we only report the final keystroke.</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;headkey1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">ch</span><span class="o">=</span><span class="n">ch</span><span class="p">):</span>
            <span class="k">return</span> <span class="c"># The hook claims to have handled the event.</span>

        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;*** leoTree&#39;</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">p</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">w</span><span class="p">),</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="c">#@+&lt;&lt; truncate s if it has multiple lines &gt;&gt;</span>
        <span class="c">#@+node:ekr.20040803072955.94: *6* &lt;&lt; truncate s if it has multiple lines &gt;&gt;</span>
        <span class="c"># Remove one or two trailing newlines before warning of truncation.</span>
        <span class="c"># for i in (0,1):</span>
            <span class="c"># if s and s[-1] == &#39;\n&#39;:</span>
                <span class="c"># if len(s) &gt; 1: s = s[:-1]</span>
                <span class="c"># else: s = &#39;&#39;</span>
        <span class="k">while</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c"># Warn if there are multiple lines.</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="c"># g.trace(i,len(s),repr(s))</span>
            <span class="n">g</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;truncating headline to one line&quot;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span>

        <span class="n">limit</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">limit</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;truncating headline to&quot;</span><span class="p">,</span><span class="n">limit</span><span class="p">,</span><span class="s">&quot;characters&quot;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">limit</span><span class="p">]</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">toUnicode</span><span class="p">(</span><span class="n">s</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; truncate s if it has multiple lines &gt;&gt;</span>
        <span class="c"># Make the change official, but undo to the *old* revert point.</span>
        <span class="n">oldRevert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">oldRevert</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span> <span class="o">=</span> <span class="n">s</span>
        <span class="n">p</span><span class="o">.</span><span class="n">initHeadString</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;changed&#39;</span><span class="p">,</span><span class="n">changed</span><span class="p">,</span><span class="s">&#39;new&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="n">undoData</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">beforeChangeNodeContents</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">oldHead</span><span class="o">=</span><span class="n">oldRevert</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">changed</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="c"># New in Leo 4.4.5: we must recolor the body because</span>
            <span class="c"># the headline may contain directives.</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">scanForTabWidth</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">recolor</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">incremental</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">dirtyVnodeList</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">setDirty</span><span class="p">()</span>
            <span class="n">u</span><span class="o">.</span><span class="n">afterChangeNodeContents</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">undoType</span><span class="p">,</span><span class="n">undoData</span><span class="p">,</span>
                <span class="n">dirtyVnodeList</span><span class="o">=</span><span class="n">dirtyVnodeList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">redraw_after_head_changed</span><span class="p">()</span>
            <span class="n">c</span><span class="o">.</span><span class="n">treeEditFocusHelper</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">setSelectedLabelState</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;headkey2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">ch</span><span class="o">=</span><span class="n">ch</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20040803072955.88: *5* onHeadlineKey</span></div>
<div class="viewcode-block" id="leoTree.onHeadlineKey"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.onHeadlineKey">[docs]</a>    <span class="k">def</span> <span class="nf">onHeadlineKey</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Handle a key event in a headline.&#39;&#39;&#39;</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">widget</span> <span class="ow">or</span> <span class="bp">None</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>

        <span class="c"># g.trace(repr(ch),g.callers())</span>

        <span class="c"># Testing for ch here prevents flashing in the headline</span>
        <span class="c"># when the control key is held down.</span>
        <span class="k">if</span> <span class="n">ch</span><span class="p">:</span>
            <span class="c"># g.trace(repr(ch),g.callers())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateHead</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>

        <span class="k">return</span> <span class="c"># (for Tk) &#39;break&#39; # Required</span>
    <span class="c">#@+node:ekr.20051026083544.2: *5* updateHead</span></div>
<div class="viewcode-block" id="leoTree.updateHead"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.updateHead">[docs]</a>    <span class="k">def</span> <span class="nf">updateHead</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Update a headline from an event.</span>

<span class="sd">        The headline officially changes only when editing ends.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">k</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">event</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
        <span class="n">ins</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getInsertPoint</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span> <span class="n">ins</span> <span class="o">=</span> <span class="n">i</span>

        <span class="c"># g.trace(&#39;w&#39;,w,&#39;ch&#39;,repr(ch),g.callers())</span>

        <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\b</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>  <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>       <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">ins</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ch</span> <span class="ow">and</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span><span class="p">:</span>                              <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">k</span><span class="o">.</span><span class="n">unboundKeyAction</span> <span class="o">==</span> <span class="s">&#39;overwrite&#39;</span><span class="p">:</span> <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ins</span><span class="p">,</span><span class="n">ch</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">ins</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">ins</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">insert</span><span class="o">=</span><span class="n">ins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c"># 2011/11/14: Not used at present.</span>
        <span class="c"># w.setWidth(self.headWidth(s=s))</span>

        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">endEditLabel</span><span class="p">()</span> <span class="c"># Now calls self.onHeadChanged.</span>
    <span class="c">#@+node:ekr.20040803072955.126: *5* endEditLabel</span></div>
<div class="viewcode-block" id="leoTree.endEditLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.endEditLabel">[docs]</a>    <span class="k">def</span> <span class="nf">endEditLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;End editing of a headline and update p.h.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">True</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">k</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span> <span class="p">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>

        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;leoTree&#39;</span><span class="p">,</span><span class="n">p</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setEditPosition</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span> <span class="c"># That is, self._editPosition = None</span>

        <span class="c"># Important: this will redraw if necessary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onHeadChanged</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="c"># Can&#39;t call setDefaultUnboundKeyAction here: it might put us in ignore mode!</span>
            <span class="n">k</span><span class="o">.</span><span class="n">setDefaultInputState</span><span class="p">()</span>
            <span class="n">k</span><span class="o">.</span><span class="n">showStateAndMode</span><span class="p">()</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="c"># This interferes with the find command and interferes with focus generally!</span>
            <span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20040803072955.21: *4* tree.injectCallbacks</span></div>
<div class="viewcode-block" id="leoTree.injectCallbacks"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.injectCallbacks">[docs]</a>    <span class="k">def</span> <span class="nf">injectCallbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="c">#@+&lt;&lt; define callbacks to be injected in the position class &gt;&gt;</span>
        <span class="c">#@+node:ekr.20040803072955.22: *5* &lt;&lt; define callbacks to be injected in the position class &gt;&gt;</span>
        <span class="c"># N.B. These vnode methods are entitled to know about details of the leoTkinterTree class.</span>

        <span class="c">#@+others</span>
        <span class="c">#@+node:ekr.20040803072955.23: *6* OnHyperLinkControlClick</span>
        <span class="k">def</span> <span class="nf">OnHyperLinkControlClick</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>

            <span class="sd">&quot;&quot;&quot;Callback injected into position class.&quot;&quot;&quot;</span>

            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hypercclick1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">):</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">selectPosition</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span><span class="o">.</span><span class="n">setInsertPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># 2007/10/27</span>
                <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hypercclick2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es_event_exception</span><span class="p">(</span><span class="s">&quot;hypercclick&quot;</span><span class="p">)</span>
        <span class="c">#@+node:ekr.20040803072955.24: *6* OnHyperLinkEnter</span>
        <span class="k">def</span> <span class="nf">OnHyperLinkEnter</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>

            <span class="sd">&quot;&quot;&quot;Callback injected into position class.&quot;&quot;&quot;</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hyperenter1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
                <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hyperenter2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es_event_exception</span><span class="p">(</span><span class="s">&quot;hyperenter&quot;</span><span class="p">)</span>
        <span class="c">#@+node:ekr.20040803072955.25: *6* OnHyperLinkLeave</span>
        <span class="k">def</span> <span class="nf">OnHyperLinkLeave</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">):</span>

            <span class="sd">&quot;&quot;&quot;Callback injected into position class.&quot;&quot;&quot;</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hyperleave1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
                <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;hyperleave2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es_event_exception</span><span class="p">(</span><span class="s">&quot;hyperleave&quot;</span><span class="p">)</span>
        <span class="c">#@-others</span>
        <span class="c">#@-&lt;&lt; define callbacks to be injected in the position class &gt;&gt;</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">(</span><span class="n">OnHyperLinkControlClick</span><span class="p">,</span><span class="n">OnHyperLinkEnter</span><span class="p">,</span><span class="n">OnHyperLinkLeave</span><span class="p">):</span>

            <span class="n">g</span><span class="o">.</span><span class="n">funcToMethod</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">leoNodes</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.2312: *4* tree.OnIconDoubleClick</span></div>
<div class="viewcode-block" id="leoTree.OnIconDoubleClick"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.OnIconDoubleClick">[docs]</a>    <span class="k">def</span> <span class="nf">OnIconDoubleClick</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">p</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20120314064059.9739: *4* tree.OnIconCtrlClick (@url)</span></div>
<div class="viewcode-block" id="leoTree.OnIconCtrlClick"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.OnIconCtrlClick">[docs]</a>    <span class="k">def</span> <span class="nf">OnIconCtrlClick</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">openUrl</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20081005065934.8: *3* May be defined in subclasses</span>
    <span class="c"># These are new in Leo 4.6.</span>
</div>
<div class="viewcode-block" id="leoTree.initAfterLoad"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.initAfterLoad">[docs]</a>    <span class="k">def</span> <span class="nf">initAfterLoad</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Do late initialization.</span>
<span class="sd">        Called in g.openWithFileName after a successful load.&#39;&#39;&#39;</span>
</div>
<div class="viewcode-block" id="leoTree.afterSelectHint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.afterSelectHint">[docs]</a>    <span class="k">def</span> <span class="nf">afterSelectHint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Called at end of tree.select.&#39;&#39;&#39;</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="leoTree.beforeSelectHint"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.beforeSelectHint">[docs]</a>    <span class="k">def</span> <span class="nf">beforeSelectHint</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Called at start of tree.select.&#39;&#39;&#39;</span>
        <span class="k">pass</span>

    <span class="c"># These are hints for optimization.</span>
    <span class="c"># The proper default is c.redraw()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_clone"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_clone">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_clone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>           <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_contract"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_contract">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_expand"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_expand">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_head_changed"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_head_changed">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_head_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_icons_changed"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_icons_changed">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_icons_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="leoTree.redraw_after_select"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.redraw_after_select">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20040803072955.128: *3* leoTree.select &amp; helpers</span></div>
    <span class="n">tree_select_lockout</span> <span class="o">=</span> <span class="bp">False</span>

<div class="viewcode-block" id="leoTree.select"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Select a node.</span>
<span class="sd">        Never redraws outline, but may change coloring of individual headlines.</span>
<span class="sd">        The scroll argument is used by the gui to suppress scrolling while dragging.&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">killed</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_select_lockout</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>

        <span class="n">traceTime</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>

        <span class="k">if</span> <span class="n">traceTime</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">time</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">old_p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>
            <span class="n">val</span> <span class="o">=</span> <span class="s">&#39;break&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_select_lockout</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">beforeSelectHint</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">)</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectHelper</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="n">scroll</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_select_lockout</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">afterSelectHint</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">traceTime</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%2.3f</span><span class="s"> sec&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">val</span>  <span class="c"># Don&#39;t put a return in a finally clause.</span>
    <span class="c">#@+node:ekr.20070423101911: *4* selectHelper (leoTree) (changed 4.10)</span>
    <span class="c"># Do **not** try to &quot;optimize&quot; this by returning if p==c.p.</span>
    <span class="c"># 2011/11/06: *event handlers* are called only if p != c.p.</span>
</div>
<div class="viewcode-block" id="leoTree.selectHelper"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.selectHelper">[docs]</a>    <span class="k">def</span> <span class="nf">selectHelper</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">scroll</span><span class="p">):</span>

        <span class="c"># trace = False and not g.unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="p">:</span> <span class="k">return</span> <span class="c"># Defensive.</span>
        <span class="n">old_p</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span>
        <span class="n">call_event_handlers</span> <span class="o">=</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">old_p</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
            <span class="c"># 2009/10/10: selecting a foreign position</span>
            <span class="c"># will not be pretty.</span>
            <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">context</span> <span class="o">==</span> <span class="n">c</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Do *not* test c.positionExists(p) here.</span>
            <span class="c"># We may be in the process of changing roots.</span>
            <span class="k">return</span> <span class="bp">None</span> <span class="c"># Not an error.</span>

        <span class="c"># Part 1: Unselect.</span>
        <span class="k">if</span> <span class="n">call_event_handlers</span><span class="p">:</span>
            <span class="n">unselect</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;unselect1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">new_p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="o">=</span><span class="n">old_p</span><span class="p">,</span><span class="n">new_v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_v</span><span class="o">=</span><span class="n">old_p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unselect</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">unselect</span><span class="p">:</span>
            <span class="c">#@+&lt;&lt; unselect the old node &gt;&gt;</span>
            <span class="c">#@+node:ekr.20120325072403.7771: *5* &lt;&lt; unselect the old node &gt;&gt; (selectHelper)</span>
            <span class="k">if</span> <span class="n">old_p</span> <span class="o">!=</span> <span class="n">p</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">endEditLabel</span><span class="p">()</span> <span class="c"># sets editPosition = None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setUnselectedLabelState</span><span class="p">(</span><span class="n">old_p</span><span class="p">)</span>

                <span class="n">colorizer</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">colorizer</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">colorizer</span>
                    <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">colorizer</span><span class="p">,</span><span class="s">&#39;colorCacheFlag&#39;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">colorizer</span><span class="o">.</span><span class="n">colorCacheFlag</span>
                    <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">colorizer</span><span class="p">,</span><span class="s">&#39;write_colorizer_cache&#39;</span><span class="p">)</span>
                <span class="p">):</span>
                    <span class="n">colorizer</span><span class="o">.</span><span class="n">write_colorizer_cache</span><span class="p">(</span><span class="n">old_p</span><span class="p">)</span>
            <span class="c">#@-&lt;&lt; unselect the old node &gt;&gt;</span>
        <span class="k">if</span> <span class="n">call_event_handlers</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;unselect2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">new_p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="o">=</span><span class="n">old_p</span><span class="p">,</span><span class="n">new_v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_v</span><span class="o">=</span><span class="n">old_p</span><span class="p">)</span>
        
        <span class="c"># Part 2a: Start selecting:</span>
        <span class="k">if</span> <span class="n">call_event_handlers</span><span class="p">:</span>
            <span class="n">select</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;select1&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">new_p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="o">=</span><span class="n">old_p</span><span class="p">,</span><span class="n">new_v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_v</span><span class="o">=</span><span class="n">old_p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">select</span> <span class="o">=</span> <span class="bp">True</span>  
        <span class="k">if</span> <span class="n">select</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectNewNode</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">)</span>
            <span class="n">c</span><span class="o">.</span><span class="n">nodeHistory</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c"># Remember this position.</span>
            
        <span class="c"># Part 2b: Finish selecting.</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setCurrentPosition</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="c">#@+&lt;&lt; set the current node &gt;&gt;</span>
        <span class="c">#@+node:ekr.20040803072955.133: *5* &lt;&lt; set the current node &gt;&gt; (selectHelper)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSelectedLabelState</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">scanForTabWidth</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c">#GS I believe this should also get into the select1 hook</span>

        <span class="c"># Was in ctor.</span>
        <span class="n">use_chapters</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getBool</span><span class="p">(</span><span class="s">&#39;use_chapters&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">use_chapters</span><span class="p">:</span>
            <span class="n">cc</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">chapterController</span>
            <span class="n">theChapter</span> <span class="o">=</span> <span class="n">cc</span> <span class="ow">and</span> <span class="n">cc</span><span class="o">.</span><span class="n">getSelectedChapter</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">theChapter</span><span class="p">:</span>
                <span class="n">theChapter</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c"># g.trace(&#39;tkTree&#39;,theChapter.name,&#39;v&#39;,id(p.v),p.h)</span>

        <span class="n">c</span><span class="o">.</span><span class="n">treeFocusHelper</span><span class="p">()</span> <span class="c"># 2010/12/14</span>
        <span class="n">c</span><span class="o">.</span><span class="n">undoer</span><span class="o">.</span><span class="n">onSelect</span><span class="p">(</span><span class="n">old_p</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; set the current node &gt;&gt;</span>
        <span class="n">p</span><span class="o">.</span><span class="n">restoreCursorAndScroll</span><span class="p">()</span>
            <span class="c"># Was in setBodyTextAfterSelect (in &lt;select the new node&gt;)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">assignPositionToEditor</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="c"># New in Leo 4.4.1.</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">updateStatusLine</span><span class="p">()</span> <span class="c"># New in Leo 4.4.1.</span>

        <span class="c"># if trace and (verbose or call_event_handlers):</span>
            <span class="c"># g.trace(&#39;**** after old: %s new %s&#39; % (</span>
                <span class="c"># old_p and len(old_p.b),len(p.b)))</span>

        <span class="c"># what UNL.py used to do</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">clearStatusLine</span><span class="p">()</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;status_line_unl_mode&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;canonical&#39;</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">putStatusLine</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_UNL</span><span class="p">(</span><span class="n">with_proto</span><span class="o">=</span><span class="n">verbose</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">call_event_handlers</span><span class="p">:</span> <span class="c"># 2011/11/06</span>
            <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;select2&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">new_p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="o">=</span><span class="n">old_p</span><span class="p">,</span><span class="n">new_v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_v</span><span class="o">=</span><span class="n">old_p</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;select3&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">new_p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="o">=</span><span class="n">old_p</span><span class="p">,</span><span class="n">new_v</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">old_v</span><span class="o">=</span><span class="n">old_p</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20120325072403.7767: *4* leoTree.selectNewNode</span></div>
<div class="viewcode-block" id="leoTree.selectNewNode"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.selectNewNode">[docs]</a>    <span class="k">def</span> <span class="nf">selectNewNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">):</span>

        <span class="c"># Bug fix: we must always set this, even if we never edit the node.</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">setWrap</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setBodyTextAfterSelect</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20090608081524.6109: *4* leoTree.setBodyTextAfterSelect</span></div>
<div class="viewcode-block" id="leoTree.setBodyTextAfterSelect"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.setBodyTextAfterSelect">[docs]</a>    <span class="k">def</span> <span class="nf">setBodyTextAfterSelect</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">old_p</span><span class="p">):</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>

        <span class="c"># Always do this.  Otherwise there can be problems with trailing newlines.</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">b</span> <span class="c"># Guaranteed to be unicode.</span>
        <span class="n">old_s</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">p</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">==</span> <span class="n">old_p</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">colorizer</span><span class="o">.</span><span class="n">isSameColorState</span><span class="p">()</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">==</span> <span class="n">old_s</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;*pass&#39;</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">,</span><span class="n">old_p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># w.setAllText destroys all color tags, so do a full recolor.</span>
            <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;*reload&#39;</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">,</span><span class="n">old_p</span> <span class="ow">and</span> <span class="n">old_p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">setAllText</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">colorizer</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">colorizer</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">colorizer</span><span class="p">,</span><span class="s">&#39;setHighlighter&#39;</span><span class="p">):</span>
                <span class="n">colorizer</span><span class="o">.</span><span class="n">setHighlighter</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">recolor</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="c"># This is now done after c.p has been changed.</span>
            <span class="c"># p.restoreCursorAndScroll()</span>
    <span class="c">#@+node:ekr.20031218072017.3718: *3* oops</span></div>
<div class="viewcode-block" id="leoTree.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTree.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;leoTree oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20070317073627: ** class leoTreeTab</span></div></div>
<div class="viewcode-block" id="leoTreeTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab">[docs]</a><span class="k">class</span> <span class="nc">leoTreeTab</span><span class="p">:</span>

    <span class="sd">&#39;&#39;&#39;A class representing a tabbed outline pane.&#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070317073627.1: *3*  ctor (leoTreeTab)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">chapterController</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc</span> <span class="o">=</span> <span class="n">chapterController</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nb</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Created in createControl.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentFrame</span> <span class="o">=</span> <span class="n">parentFrame</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectedTabBackgroundColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span>
            <span class="s">&#39;selected_chapter_tab_background_color&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;LightSteelBlue2&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">selectedTabForegroundColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span>
            <span class="s">&#39;selected_chapter_tab_foreground_color&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;black&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unselectedTabBackgroundColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span>
            <span class="s">&#39;unselected_chapter_tab_background_color&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;lightgrey&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unselectedTabForegroundColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span>
            <span class="s">&#39;unselected_chapter_tab_foreground_color&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;black&#39;</span>
    <span class="c">#@+node:ekr.20070317073755: *3* Must be defined in subclasses</span>
<div class="viewcode-block" id="leoTreeTab.createControl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.createControl">[docs]</a>    <span class="k">def</span> <span class="nf">createControl</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoTreeTab.createTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.createTab">[docs]</a>    <span class="k">def</span> <span class="nf">createTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">select</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoTreeTab.destroyTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.destroyTab">[docs]</a>    <span class="k">def</span> <span class="nf">destroyTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoTreeTab.selectTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.selectTab">[docs]</a>    <span class="k">def</span> <span class="nf">selectTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoTreeTab.setTabLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.setTabLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setTabLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070317083104: *3* oops</span></div>
<div class="viewcode-block" id="leoTreeTab.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.leoTreeTab.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;leoTreeTree oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.2191: ** class nullBody (leoBody:HighLevelInterface)</span></div></div>
<div class="viewcode-block" id="nullBody"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody">[docs]</a><span class="k">class</span> <span class="nc">nullBody</span> <span class="p">(</span><span class="n">leoBody</span><span class="p">):</span>
    <span class="c"># LeoBody is a subclass of HighLevelInterface.</span>

    <span class="c"># pylint: disable=R0923</span>
    <span class="c"># Interface not implemented.</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.2192: *3*  nullBody.__init__</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="c"># g.trace(&#39;nullBody&#39;,&#39;frame&#39;,frame,g.callers())</span>

        <span class="n">leoBody</span><span class="o">.</span><span class="n">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">)</span> <span class="c"># Init the base class.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">insertPoint</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> <span class="c"># The body text</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">stringTextWidget</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;body&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">w</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editorWidgets</span><span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorizer</span> <span class="o">=</span> <span class="n">nullColorizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.2193: *3* Utils (internal use)</span>
    <span class="c">#@+node:ekr.20031218072017.2194: *4* findStartOfLine</span>
<div class="viewcode-block" id="nullBody.findStartOfLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.findStartOfLine">[docs]</a>    <span class="k">def</span> <span class="nf">findStartOfLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lineNumber</span><span class="p">):</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">splitLines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">lineNumber</span><span class="p">:</span> <span class="k">break</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">index</span>
    <span class="c">#@+node:ekr.20031218072017.2195: *4* scanToStartOfLine</span></div>
<div class="viewcode-block" id="nullBody.scanToStartOfLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.scanToStartOfLine">[docs]</a>    <span class="k">def</span> <span class="nf">scanToStartOfLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="k">assert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="mi">0</span>
    <span class="c">#@+node:ekr.20031218072017.2196: *4* scanToEndOfLine</span></div>
<div class="viewcode-block" id="nullBody.scanToEndOfLine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.scanToEndOfLine">[docs]</a>    <span class="k">def</span> <span class="nf">scanToEndOfLine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>

        <span class="k">assert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">i</span>
    <span class="c">#@+node:ekr.20031218072017.2197: *3* nullBody: leoBody interface</span>
    <span class="c"># Birth, death &amp; config</span></div>
<div class="viewcode-block" id="nullBody.createBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.createBindings">[docs]</a>    <span class="k">def</span> <span class="nf">createBindings</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>           <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.createControl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.createControl">[docs]</a>    <span class="k">def</span> <span class="nf">createControl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>     <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.setColorFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.setColorFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setColorFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>       <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>        <span class="k">pass</span>
    <span class="c"># Editors...</span></div>
<div class="viewcode-block" id="nullBody.addEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.addEditor">[docs]</a>    <span class="k">def</span> <span class="nf">addEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>            <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.assignPositionToEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.assignPositionToEditor">[docs]</a>    <span class="k">def</span> <span class="nf">assignPositionToEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.createEditorFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.createEditorFrame">[docs]</a>    <span class="k">def</span> <span class="nf">createEditorFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>             <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="nullBody.cycleEditorFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.cycleEditorFocus">[docs]</a>    <span class="k">def</span> <span class="nf">cycleEditorFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>     <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.deleteEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.deleteEditor">[docs]</a>    <span class="k">def</span> <span class="nf">deleteEditor</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>         <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.selectEditor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.selectEditor">[docs]</a>    <span class="k">def</span> <span class="nf">selectEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>                   <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.selectLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.selectLabel">[docs]</a>    <span class="k">def</span> <span class="nf">selectLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>                   <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.setEditorColors"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.setEditorColors">[docs]</a>    <span class="k">def</span> <span class="nf">setEditorColors</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bg</span><span class="p">,</span><span class="n">fg</span><span class="p">):</span>           <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.unselectLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.unselectLabel">[docs]</a>    <span class="k">def</span> <span class="nf">unselectLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>                 <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.updateEditors"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.updateEditors">[docs]</a>    <span class="k">def</span> <span class="nf">updateEditors</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="k">pass</span>
    <span class="c"># Events...</span></div>
<div class="viewcode-block" id="nullBody.forceFullRecolor"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.forceFullRecolor">[docs]</a>    <span class="k">def</span> <span class="nf">forceFullRecolor</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.scheduleIdleTimeRoutine"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.scheduleIdleTimeRoutine">[docs]</a>    <span class="k">def</span> <span class="nf">scheduleIdleTimeRoutine</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">function</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span> <span class="k">pass</span>
    <span class="c"># Low-level gui...</span></div>
<div class="viewcode-block" id="nullBody.hasFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.hasFocus">[docs]</a>    <span class="k">def</span> <span class="nf">hasFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullBody.setFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullBody.setFocus">[docs]</a>    <span class="k">def</span> <span class="nf">setFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                        <span class="k">pass</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.2218: ** class nullColorizer</span></div></div>
<div class="viewcode-block" id="nullColorizer"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer">[docs]</a><span class="k">class</span> <span class="nc">nullColorizer</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;A do-nothing colorer class&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.2219: *3* __init__ (nullColorizer)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_recolor_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c">#@+node:ekr.20031218072017.2220: *3* entry points</span>
<div class="viewcode-block" id="nullColorizer.colorize"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.colorize">[docs]</a>    <span class="k">def</span> <span class="nf">colorize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">incremental</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">interruptable</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c"># Used by unit tests.</span>
        <span class="k">return</span> <span class="s">&#39;ok&#39;</span> <span class="c"># Used by unit tests.</span>
</div>
<div class="viewcode-block" id="nullColorizer.disable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.disable">[docs]</a>    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullColorizer.enable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.enable">[docs]</a>    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullColorizer.interrupt"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.interrupt">[docs]</a>    <span class="k">def</span> <span class="nf">interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullColorizer.isSameColorState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.isSameColorState">[docs]</a>    <span class="k">def</span> <span class="nf">isSameColorState</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">True</span>
        <span class="c"># Disable some logic in leoTree.select.</span>
</div>
<div class="viewcode-block" id="nullColorizer.scanColorDirectives"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.scanColorDirectives">[docs]</a>    <span class="k">def</span> <span class="nf">scanColorDirectives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullColorizer.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bold_font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">italic_font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bolditalic_font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_tags_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_references</span> <span class="o">=</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="nullColorizer.updateSyntaxColorer"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.updateSyntaxColorer">[docs]</a>    <span class="k">def</span> <span class="nf">updateSyntaxColorer</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span> <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullColorizer.useSyntaxColoring"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullColorizer.useSyntaxColoring">[docs]</a>    <span class="k">def</span> <span class="nf">useSyntaxColoring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.2222: ** class nullFrame</span></div></div>
<div class="viewcode-block" id="nullFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame">[docs]</a><span class="k">class</span> <span class="nc">nullFrame</span> <span class="p">(</span><span class="n">leoFrame</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;A null frame class for tests and batch execution.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20040327105706: *3*  ctor (nullFrame)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">title</span><span class="p">,</span><span class="n">gui</span><span class="p">):</span>

        <span class="c"># g.trace(&#39;nullFrame&#39;)</span>

        <span class="n">leoFrame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">gui</span><span class="p">)</span> <span class="c"># Init the base class.</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconBar</span> <span class="o">=</span> <span class="n">nullIconBarClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isNullFrame</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outerFrame</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusLineClass</span> <span class="o">=</span> <span class="n">nullStatusLineClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># Always None.</span>

        <span class="c"># Create the component objects.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">nullBody</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span>  <span class="o">=</span> <span class="n">nullLog</span> <span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="n">leoMenu</span><span class="o">.</span><span class="n">nullMenu</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">nullTree</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Default window position.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="mi">600</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="c">#@+node:ekr.20041120073824: *3* destroySelf</span>
<div class="viewcode-block" id="nullFrame.destroySelf"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.destroySelf">[docs]</a>    <span class="k">def</span> <span class="nf">destroySelf</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20040327105706.2: *3* finishCreate (nullFrame)</span></div>
<div class="viewcode-block" id="nullFrame.finishCreate"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.finishCreate">[docs]</a>    <span class="k">def</span> <span class="nf">finishCreate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This may be overridden in subclasses.</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20061109124552: *3* Overrides</span>
    <span class="c">#@+node:ekr.20061109123828: *4* Config...</span></div>
<div class="viewcode-block" id="nullFrame.resizePanesToRatio"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.resizePanesToRatio">[docs]</a>    <span class="k">def</span> <span class="nf">resizePanesToRatio</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ratio</span><span class="p">,</span><span class="n">secondary_ratio</span><span class="p">):</span>    <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.setInitialWindowGeometry"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.setInitialWindowGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">setInitialWindowGeometry</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                    <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.setMinibufferBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.setMinibufferBindings">[docs]</a>    <span class="k">def</span> <span class="nf">setMinibufferBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20041130065718.1: *5* setTopGeometry</span></div>
<div class="viewcode-block" id="nullFrame.setTopGeometry"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.setTopGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">setTopGeometry</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">adjustSize</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">w</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
    <span class="c">#@+node:ekr.20061109124129: *4* Gui-dependent commands (nullFrame)</span>
    <span class="c"># Expanding and contracting panes.</span></div>
<div class="viewcode-block" id="nullFrame.contractPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.contractPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractPane</span>         <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.expandPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.expandPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandPane</span>           <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.contractBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.contractBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractBodyPane</span>     <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.contractLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.contractLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">contractLogPane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.contractOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.contractOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">contractOutlinePane</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.expandBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.expandBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandBodyPane</span>       <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.expandLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.expandLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">expandLogPane</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.expandOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.expandOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">expandOutlinePane</span>    <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.fullyExpandBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.fullyExpandBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandBodyPane</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.fullyExpandLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.fullyExpandLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandLogPane</span>   <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.fullyExpandPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.fullyExpandPane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandPane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.fullyExpandOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.fullyExpandOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">fullyExpandOutlinePane</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.hideBodyPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.hideBodyPane">[docs]</a>    <span class="k">def</span> <span class="nf">hideBodyPane</span>         <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.hideLogPane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.hideLogPane">[docs]</a>    <span class="k">def</span> <span class="nf">hideLogPane</span>          <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.hidePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.hidePane">[docs]</a>    <span class="k">def</span> <span class="nf">hidePane</span>             <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.hideOutlinePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.hideOutlinePane">[docs]</a>    <span class="k">def</span> <span class="nf">hideOutlinePane</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span>

    <span class="c"># In the Window menu...</span></div>
<div class="viewcode-block" id="nullFrame.cascade"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.cascade">[docs]</a>    <span class="k">def</span> <span class="nf">cascade</span>              <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.equalSizedPanes"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.equalSizedPanes">[docs]</a>    <span class="k">def</span> <span class="nf">equalSizedPanes</span>      <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.hideLogWindow"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.hideLogWindow">[docs]</a>    <span class="k">def</span> <span class="nf">hideLogWindow</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.minimizeAll"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.minimizeAll">[docs]</a>    <span class="k">def</span> <span class="nf">minimizeAll</span>          <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.resizeToScreen"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.resizeToScreen">[docs]</a>    <span class="k">def</span> <span class="nf">resizeToScreen</span>       <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.toggleActivePane"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.toggleActivePane">[docs]</a>    <span class="k">def</span> <span class="nf">toggleActivePane</span>     <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.toggleSplitDirection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.toggleSplitDirection">[docs]</a>    <span class="k">def</span> <span class="nf">toggleSplitDirection</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span>

    <span class="c"># In help menu...</span></div>
<div class="viewcode-block" id="nullFrame.leoHelp"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.leoHelp">[docs]</a>    <span class="k">def</span> <span class="nf">leoHelp</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span>
    <span class="c">#@+node:ekr.20041130065921: *4* Window...</span></div>
<div class="viewcode-block" id="nullFrame.bringToFront"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.bringToFront">[docs]</a>    <span class="k">def</span> <span class="nf">bringToFront</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.deiconify"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.deiconify">[docs]</a>    <span class="k">def</span> <span class="nf">deiconify</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>       <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.get_window_info"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.get_window_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_window_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Set w,h,x,y to a reasonable size and position.</span>
        <span class="k">return</span> <span class="mi">600</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span></div>
<div class="viewcode-block" id="nullFrame.lift"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.lift">[docs]</a>    <span class="k">def</span> <span class="nf">lift</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>            <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.setWrap"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.setWrap">[docs]</a>    <span class="k">def</span> <span class="nf">setWrap</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">flag</span><span class="p">):</span>    <span class="k">pass</span></div>
<div class="viewcode-block" id="nullFrame.update"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullFrame.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>           <span class="k">pass</span>

    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20070301164543: ** class nullIconBarClass</span></div></div>
<div class="viewcode-block" id="nullIconBarClass"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass">[docs]</a><span class="k">class</span> <span class="nc">nullIconBarClass</span><span class="p">:</span>

    <span class="sd">&#39;&#39;&#39;A class representing the singleton Icon bar&#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070301164543.1: *3*  ctor (nullIconBarClass)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconFrame</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentFrame</span> <span class="o">=</span> <span class="n">parentFrame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">nullObject</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20070301164543.2: *3* add</span>
<div class="viewcode-block" id="nullIconBarClass.add"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Add a (virtual) button to the (virtual) icon bar.&#39;&#39;&#39;</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>    <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">iconWidgetCount</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">iconWidgetCount</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">iconWidgetCount</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;nullButtonWidget </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">n</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">command</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">commandCallback</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;command for </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">))</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">commandCallback</span>

        <span class="k">class</span> <span class="nc">nullButtonWidget</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">text</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
            <span class="k">def</span> <span class="nf">__repr__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">nullButtonWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b</span>
    <span class="c">#@+node:ekr.20070301165343: *3* do nothing</span></div>
<div class="viewcode-block" id="nullIconBarClass.addRow"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.addRow">[docs]</a>    <span class="k">def</span> <span class="nf">addRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullIconBarClass.addWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.addWidget">[docs]</a>    <span class="k">def</span> <span class="nf">addWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>
        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullIconBarClass.clear"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">iconWidgetCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">iconImageRefs</span> <span class="o">=</span> <span class="p">[]</span></div>
<div class="viewcode-block" id="nullIconBarClass.deleteButton"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.deleteButton">[docs]</a>    <span class="k">def</span> <span class="nf">deleteButton</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>
        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullIconBarClass.getFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.getFrame">[docs]</a>    <span class="k">def</span> <span class="nf">getFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="nullIconBarClass.getNewFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.getNewFrame">[docs]</a>    <span class="k">def</span> <span class="nf">getNewFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="nullIconBarClass.hide"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.hide">[docs]</a>    <span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>
<div class="viewcode-block" id="nullIconBarClass.setCommandForButton"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.setCommandForButton">[docs]</a>    <span class="k">def</span> <span class="nf">setCommandForButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">command</span><span class="p">):</span>
        <span class="n">b</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span></div>
<div class="viewcode-block" id="nullIconBarClass.show"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullIconBarClass.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.2232: ** class nullLog (leoLog)</span></div></div>
<div class="viewcode-block" id="nullLog"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog">[docs]</a><span class="k">class</span> <span class="nc">nullLog</span> <span class="p">(</span><span class="n">leoLog</span><span class="p">):</span>

    <span class="c"># pylint: disable=R0923</span>
    <span class="c"># Interface not implemented.</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070302095500: *3* Birth</span>
    <span class="c">#@+node:ekr.20041012083237: *4* nullLog.__init__</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">parentFrame</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="c"># Init the base class.</span>
        <span class="n">leoLog</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isNull</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logNumber</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createControl</span><span class="p">(</span><span class="n">parentFrame</span><span class="p">)</span>
            <span class="c"># self.logCtrl is now a property of the base leoLog class.</span>
    <span class="c">#@+node:ekr.20120216123546.10951: *4* finishCreate (nullLog)</span>
<div class="viewcode-block" id="nullLog.finishCreate"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.finishCreate">[docs]</a>    <span class="k">def</span> <span class="nf">finishCreate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20041012083237.1: *4* createControl</span></div>
<div class="viewcode-block" id="nullLog.createControl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.createControl">[docs]</a>    <span class="k">def</span> <span class="nf">createControl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createTextWidget</span><span class="p">(</span><span class="n">parentFrame</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070302095121: *4* createTextWidget (nullLog)</span></div>
<div class="viewcode-block" id="nullLog.createTextWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.createTextWidget">[docs]</a>    <span class="k">def</span> <span class="nf">createTextWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logNumber</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">log</span> <span class="o">=</span> <span class="n">stringTextWidget</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;log-</span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">logNumber</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">log</span>
    <span class="c">#@+node:ekr.20111119145033.10186: *3* isLogWidget (nullLog)</span></div>
<div class="viewcode-block" id="nullLog.isLogWidget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.isLogWidget">[docs]</a>    <span class="k">def</span> <span class="nf">isLogWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="c">#@+node:ekr.20041012083237.2: *3* oops</span></div>
<div class="viewcode-block" id="nullLog.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&quot;nullLog:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="c">#@+node:ekr.20041012083237.3: *3* put and putnl (nullLog)</span></div>
<div class="viewcode-block" id="nullLog.put"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">tabName</span><span class="o">=</span><span class="s">&#39;Log&#39;</span><span class="p">,</span><span class="n">from_redirect</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="c"># print(&#39;(nullGui) print&#39;,repr(s))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">newline</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">UnicodeError</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;replace&#39;</span><span class="p">)</span>
                <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">newline</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="nullLog.putnl"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.putnl">[docs]</a>    <span class="k">def</span> <span class="nf">putnl</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="o">=</span><span class="s">&#39;Log&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20060124085830: *3* tabs</span></div>
<div class="viewcode-block" id="nullLog.clearTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.clearTab">[docs]</a>    <span class="k">def</span> <span class="nf">clearTab</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>             <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.createCanvas"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.createCanvas">[docs]</a>    <span class="k">def</span> <span class="nf">createCanvas</span>    <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>                         <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.createTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.createTab">[docs]</a>    <span class="k">def</span> <span class="nf">createTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">createText</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>   <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.deleteTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.deleteTab">[docs]</a>    <span class="k">def</span> <span class="nf">deleteTab</span>       <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>             <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.getSelectedTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.getSelectedTab">[docs]</a>    <span class="k">def</span> <span class="nf">getSelectedTab</span>  <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                                 <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="nullLog.lowerTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.lowerTab">[docs]</a>    <span class="k">def</span> <span class="nf">lowerTab</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>                         <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.raiseTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.raiseTab">[docs]</a>    <span class="k">def</span> <span class="nf">raiseTab</span>        <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>                         <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.renameTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.renameTab">[docs]</a>    <span class="k">def</span> <span class="nf">renameTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">oldName</span><span class="p">,</span><span class="n">newName</span><span class="p">):</span>                       <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.selectTab"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.selectTab">[docs]</a>    <span class="k">def</span> <span class="nf">selectTab</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">,</span><span class="n">createText</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">widget</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">wrap</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">):</span>   <span class="k">pass</span></div>
<div class="viewcode-block" id="nullLog.setTabBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullLog.setTabBindings">[docs]</a>    <span class="k">def</span> <span class="nf">setTabBindings</span>  <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tabName</span><span class="p">):</span>                         <span class="k">pass</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20070302171509: ** class nullStatusLineClass</span></div></div>
<div class="viewcode-block" id="nullStatusLineClass"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass">[docs]</a><span class="k">class</span> <span class="nc">nullStatusLineClass</span><span class="p">:</span>

    <span class="sd">&#39;&#39;&#39;A do-nothing status line.&#39;&#39;&#39;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20070302171509.2: *3*  nullStatusLineClass.ctor</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">parentFrame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentFrame</span> <span class="o">=</span> <span class="n">parentFrame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span> <span class="o">=</span> <span class="n">stringTextWidget</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;status-line&#39;</span><span class="p">)</span>

        <span class="c"># Set the official ivars.</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">statusFrame</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">statusLabel</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">statusText</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span>
    <span class="c">#@+node:ekr.20070302171917: *3* methods</span>
<div class="viewcode-block" id="nullStatusLineClass.disable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.disable">[docs]</a>    <span class="k">def</span> <span class="nf">disable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">bodyWantsFocus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="nullStatusLineClass.enable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.enable">[docs]</a>    <span class="k">def</span> <span class="nf">enable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">widgetWantsFocus</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="nullStatusLineClass.clear"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">)</span></div>
<div class="viewcode-block" id="nullStatusLineClass.get"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span><span class="o">.</span><span class="n">getAllText</span><span class="p">()</span></div>
<div class="viewcode-block" id="nullStatusLineClass.isEnabled"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.isEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span></div>
<div class="viewcode-block" id="nullStatusLineClass.getFrame"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.getFrame">[docs]</a>    <span class="k">def</span> <span class="nf">getFrame</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                <span class="k">return</span> <span class="bp">None</span></div>
<div class="viewcode-block" id="nullStatusLineClass.onActivate"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.onActivate">[docs]</a>    <span class="k">def</span> <span class="nf">onActivate</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="k">pass</span> </div>
<div class="viewcode-block" id="nullStatusLineClass.put"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>         <span class="bp">self</span><span class="o">.</span><span class="n">textWidget</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&#39;end&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span></div>
<div class="viewcode-block" id="nullStatusLineClass.setFocus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.setFocus">[docs]</a>    <span class="k">def</span> <span class="nf">setFocus</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>                <span class="k">pass</span></div>
<div class="viewcode-block" id="nullStatusLineClass.update"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullStatusLineClass.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                   <span class="k">pass</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.2233: ** class nullTree</span></div></div>
<div class="viewcode-block" id="nullTree"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree">[docs]</a><span class="k">class</span> <span class="nc">nullTree</span> <span class="p">(</span><span class="n">leoTree</span><span class="p">):</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20031218072017.2234: *3*  nullTree.__init__</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>

        <span class="n">leoTree</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">)</span> <span class="c"># Init the base class.</span>

        <span class="k">assert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editWidgetsDict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c"># Keys are tnodes, values are stringTextWidgets.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontName</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redrawCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_edit</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_select</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateCount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c">#@+node:ekr.20070228173611: *3* printWidgets</span>
<div class="viewcode-block" id="nullTree.printWidgets"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.printWidgets">[docs]</a>    <span class="k">def</span> <span class="nf">printWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editWidgetsDict</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
            <span class="c"># keys are vnodes, values are stringTextWidgets.</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;v.h:&#39;</span><span class="p">,</span><span class="n">key</span><span class="o">.</span><span class="n">headString</span><span class="p">,</span><span class="s">&#39;s:&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">s</span><span class="p">))</span>

    <span class="c">#@+node:ekr.20031218072017.2236: *3* Overrides</span>
    <span class="c">#@+node:ekr.20070228163350: *4* Colors &amp; fonts (nullTree)</span></div>
<div class="viewcode-block" id="nullTree.getFont"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.getFont">[docs]</a>    <span class="k">def</span> <span class="nf">getFont</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span>

    <span class="c"># def setColorFromConfig (self):</span>
        <span class="c"># pass</span>
</div>
<div class="viewcode-block" id="nullTree.setBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setBindings">[docs]</a>    <span class="k">def</span> <span class="nf">setBindings</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullTree.setFont"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">fontName</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fontName</span> <span class="o">=</span> <span class="n">font</span><span class="p">,</span><span class="n">fontName</span>
</div>
<div class="viewcode-block" id="nullTree.setFontFromConfig"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setFontFromConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFromConfig</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20070228163350.1: *4* Drawing &amp; scrolling (nullTree)</span></div>
<div class="viewcode-block" id="nullTree.drawIcon"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.drawIcon">[docs]</a>    <span class="k">def</span> <span class="nf">drawIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullTree.redraw"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw">[docs]</a>    <span class="k">def</span> <span class="nf">redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">forceDraw</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redrawCount</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="nullTree.redraw_now"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_now">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_now</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">forceDraw</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redrawCount</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="nullTree.redraw_after_contract"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_after_contract">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="nullTree.redraw_after_expand"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_after_expand">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="nullTree.redraw_after_head_changed"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_after_head_changed">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_head_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="nullTree.redraw_after_icons_changed"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_after_icons_changed">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_icons_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span></div>
<div class="viewcode-block" id="nullTree.redraw_after_select"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.redraw_after_select">[docs]</a>    <span class="k">def</span> <span class="nf">redraw_after_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>   <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="nullTree.scrollTo"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.scrollTo">[docs]</a>    <span class="k">def</span> <span class="nf">scrollTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20070228163350.2: *4* Headlines (nullTree)</span></div>
<div class="viewcode-block" id="nullTree.edit_widget"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.edit_widget">[docs]</a>    <span class="k">def</span> <span class="nf">edit_widget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">editWidgetsDict</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span> <span class="o">=</span> <span class="n">stringTextWidget</span><span class="p">(</span>
                <span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s">&#39;head-</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()))))</span>
            <span class="n">w</span><span class="o">.</span><span class="n">setAllText</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
        <span class="c"># g.trace(&#39;w&#39;,w,&#39;p&#39;,p.h)</span>
        <span class="k">return</span> <span class="n">w</span>
</div>
<div class="viewcode-block" id="nullTree.headWidth"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.headWidth">[docs]</a>    <span class="k">def</span> <span class="nf">headWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="nullTree.setEditLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setEditLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setEditLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullTree.setSelectedLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setSelectedLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setSelectedLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="nullTree.setUnselectedLabelState"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setUnselectedLabelState">[docs]</a>    <span class="k">def</span> <span class="nf">setUnselectedLabelState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="c">#@+node:ekr.20070228164730: *5* editLabel (nullTree)</span></div>
<div class="viewcode-block" id="nullTree.editLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.editLabel">[docs]</a>    <span class="k">def</span> <span class="nf">editLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">selection</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Start editing p&#39;s headline.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">endEditLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEditPosition</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="c"># That is, self._editPosition = p</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span>
                <span class="c"># New in 4.4b2: helps undo.</span>
    <span class="c">#@+node:ekr.20070228160345: *5* setHeadline (nullTree)</span></div>
<div class="viewcode-block" id="nullTree.setHeadline"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoFrame.nullTree.setHeadline">[docs]</a>    <span class="k">def</span> <span class="nf">setHeadline</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Set the actual text of the headline widget.</span>

<span class="sd">        This is called from the undo/redo logic to change the text before redrawing.&#39;&#39;&#39;</span>

        <span class="c"># g.trace(&#39;p&#39;,p.h,&#39;s&#39;,repr(s),g.callers())</span>

        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_widget</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">w</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">revertHeadline</span> <span class="o">=</span> <span class="n">s</span>
            <span class="c"># g.trace(repr(s),w.getAllText())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="o">*</span><span class="mi">20</span><span class="p">,</span><span class="s">&#39;oops&#39;</span><span class="p">)</span>
    <span class="c">#@-others</span>
<span class="c">#@-others</span>
<span class="c">#@-leo</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ed K. Ream.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>