<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>leo.core.leoMenu &mdash; Leo API 4.11dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.11dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Leo API 4.11dev documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for leo.core.leoMenu</h1><div class="highlight"><pre>
<span class="c">#@+leo-ver=5-thin</span>
<span class="c">#@+node:ekr.20031218072017.3749: * @file leoMenu.py</span>
<span class="sd">&quot;&quot;&quot;Gui-independent menu handling for Leo.&quot;&quot;&quot;</span>

<span class="c">#@@language python</span>
<span class="c">#@@tabwidth -4</span>
<span class="c">#@@pagewidth 70</span>

<span class="kn">import</span> <span class="nn">leo.core.leoGlobals</span> <span class="kn">as</span> <span class="nn">g</span>

<span class="c"># import string</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c">#@+others</span>
<span class="c">#@+node:ekr.20031218072017.3750: ** class leoMenu</span>
<div class="viewcode-block" id="leoMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu">[docs]</a><span class="k">class</span> <span class="nc">leoMenu</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;The base class for all Leo menus.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20120124042346.12938: *3* leoMenu.Birth</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_dict</span> <span class="o">=</span> <span class="p">{}</span>       <span class="c"># Created by finishCreate.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isNull</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menus</span> <span class="o">=</span> <span class="p">{}</span>             <span class="c"># Menu dictionary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menuShortcuts</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="leoMenu.finishCreate"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.finishCreate">[docs]</a>    <span class="k">def</span> <span class="nf">finishCreate</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">define_enable_dict</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20120124042346.12937: *4* define_enable_table</span></div>
<div class="viewcode-block" id="leoMenu.define_enable_dict"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.define_enable_dict">[docs]</a>    <span class="k">def</span> <span class="nf">define_enable_dict</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># pylint: disable=W0108</span>
        <span class="c"># W0108: Lambda may not be necessary (It is).</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">commandsDict</span><span class="p">:</span>
            <span class="k">return</span> <span class="c"># This is not an error: it happens during init.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">enable_dict</span> <span class="o">=</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span>

            <span class="c"># File menu...</span>
                <span class="c"># &#39;revert&#39;:         True, # Revert is always enabled.               </span>
            <span class="s">&#39;open-with&#39;</span><span class="p">:</span>            <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">hasOpenWithMenu</span><span class="p">,</span>

            <span class="c"># Edit menu...</span>
            <span class="s">&#39;undo&#39;</span><span class="p">:</span>                 <span class="n">c</span><span class="o">.</span><span class="n">undoer</span><span class="o">.</span><span class="n">canUndo</span><span class="p">,</span>
            <span class="s">&#39;redo&#39;</span><span class="p">:</span>                 <span class="n">c</span><span class="o">.</span><span class="n">undoer</span><span class="o">.</span><span class="n">canRedo</span><span class="p">,</span>
            <span class="s">&#39;extract-names&#39;</span><span class="p">:</span>        <span class="n">c</span><span class="o">.</span><span class="n">canExtractSectionNames</span><span class="p">,</span>
            <span class="s">&#39;extract&#39;</span><span class="p">:</span>              <span class="n">c</span><span class="o">.</span><span class="n">canExtract</span><span class="p">,</span>
            <span class="s">&#39;match-brackets&#39;</span><span class="p">:</span>       <span class="n">c</span><span class="o">.</span><span class="n">canFindMatchingBracket</span><span class="p">,</span>

            <span class="c"># Top-level Outline menu...</span>
            <span class="s">&#39;cut-node&#39;</span><span class="p">:</span>             <span class="n">c</span><span class="o">.</span><span class="n">canCutOutline</span><span class="p">,</span>
            <span class="s">&#39;delete-node&#39;</span><span class="p">:</span>          <span class="n">c</span><span class="o">.</span><span class="n">canDeleteHeadline</span><span class="p">,</span>
            <span class="s">&#39;paste-node&#39;</span><span class="p">:</span>           <span class="n">c</span><span class="o">.</span><span class="n">canPasteOutline</span><span class="p">,</span>
            <span class="s">&#39;paste-retaining-clones&#39;</span><span class="p">:</span>   <span class="n">c</span><span class="o">.</span><span class="n">canPasteOutline</span><span class="p">,</span>
            <span class="s">&#39;clone-node&#39;</span><span class="p">:</span>           <span class="n">c</span><span class="o">.</span><span class="n">canClone</span><span class="p">,</span>
            <span class="s">&#39;sort-siblings&#39;</span><span class="p">:</span>        <span class="n">c</span><span class="o">.</span><span class="n">canSortSiblings</span><span class="p">,</span>
            <span class="s">&#39;hoist&#39;</span><span class="p">:</span>                <span class="n">c</span><span class="o">.</span><span class="n">canHoist</span><span class="p">,</span>
            <span class="s">&#39;de-hoist&#39;</span><span class="p">:</span>             <span class="n">c</span><span class="o">.</span><span class="n">canDehoist</span><span class="p">,</span>

            <span class="c"># Outline:Expand/Contract menu...</span>
            <span class="s">&#39;contract-parent&#39;</span><span class="p">:</span>      <span class="n">c</span><span class="o">.</span><span class="n">canContractParent</span><span class="p">,</span>
            <span class="s">&#39;contract-node&#39;</span><span class="p">:</span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">(),</span>
            <span class="s">&#39;contract-or-go-left&#39;</span><span class="p">:</span>  <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">()</span> <span class="ow">or</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasParent</span><span class="p">(),</span>
            <span class="s">&#39;expand-node&#39;</span><span class="p">:</span>          <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">(),</span>
            <span class="s">&#39;expand-prev-level&#39;</span><span class="p">:</span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">(),</span>
            <span class="s">&#39;expand-next-level&#39;</span><span class="p">:</span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">(),</span>
            <span class="s">&#39;expand-to-level-1&#39;</span><span class="p">:</span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">(),</span>
            <span class="s">&#39;expand-or-go-right&#39;</span><span class="p">:</span>   <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">(),</span>

            <span class="c"># Outline:Move menu...</span>
            <span class="s">&#39;move-outline-down&#39;</span><span class="p">:</span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canMoveOutlineDown</span><span class="p">(),</span>
            <span class="s">&#39;move-outline-left&#39;</span><span class="p">:</span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canMoveOutlineLeft</span><span class="p">(),</span>
            <span class="s">&#39;move-outline-right&#39;</span><span class="p">:</span>   <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canMoveOutlineRight</span><span class="p">(),</span>
            <span class="s">&#39;move-outline-up&#39;</span><span class="p">:</span>      <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canMoveOutlineUp</span><span class="p">(),</span>
            <span class="s">&#39;promote&#39;</span><span class="p">:</span>              <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canPromote</span><span class="p">(),</span>
            <span class="s">&#39;demote&#39;</span><span class="p">:</span>               <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canDemote</span><span class="p">(),</span>

            <span class="c"># Outline:Go To menu...</span>
            <span class="s">&#39;goto-prev-history-node&#39;</span><span class="p">:</span>   <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">nodeHistory</span><span class="o">.</span><span class="n">canGoToPrevVisited</span><span class="p">(),</span>
            <span class="s">&#39;goto-next-history-node&#39;</span><span class="p">:</span>   <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">nodeHistory</span><span class="o">.</span><span class="n">canGoToNextVisited</span><span class="p">(),</span>
            <span class="s">&#39;goto-prev-visible&#39;</span><span class="p">:</span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canSelectVisBack</span><span class="p">(),</span>
            <span class="s">&#39;goto-next-visible&#39;</span><span class="p">:</span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canSelectVisNext</span><span class="p">(),</span>
            <span class="c"># These are too slow...</span>
                <span class="c"># &#39;go-to-next-marked&#39;:  c.canGoToNextMarkedHeadline,</span>
                <span class="c"># &#39;go-to-next-changed&#39;: c.canGoToNextDirtyHeadline,</span>
            <span class="s">&#39;goto-next-clone&#39;</span><span class="p">:</span>          <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">isCloned</span><span class="p">(),</span>
            <span class="s">&#39;goto-prev-node&#39;</span><span class="p">:</span>           <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canSelectThreadBack</span><span class="p">(),</span>
            <span class="s">&#39;goto-next-node&#39;</span><span class="p">:</span>           <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">canSelectThreadNext</span><span class="p">(),</span>
            <span class="s">&#39;goto-parent&#39;</span><span class="p">:</span>              <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasParent</span><span class="p">(),</span>
            <span class="s">&#39;goto-prev-sibling&#39;</span><span class="p">:</span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasBack</span><span class="p">(),</span>
            <span class="s">&#39;goto-next-sibling&#39;</span><span class="p">:</span>        <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasNext</span><span class="p">(),</span>

            <span class="c"># Outline:Mark menu...</span>
            <span class="s">&#39;mark-subheads&#39;</span><span class="p">:</span>            <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">(),</span>
            <span class="c"># too slow...</span>
                <span class="c"># &#39;mark-changed-items&#39;:   c.canMarkChangedHeadlines,</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">):</span>
            <span class="n">d</span> <span class="p">[</span><span class="s">&#39;expand-to-level-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">()</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="c"># Initial testing.</span>
            <span class="n">commandKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">commandsDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">commandKeys</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;*** bad entry for </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="c">#@+node:ekr.20031218072017.3775: *3* error and oops</span></div>
<div class="viewcode-block" id="leoMenu.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;leoMenu oops:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s">&quot;should be overridden in subclass&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoMenu.error"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.error">[docs]</a>    <span class="k">def</span> <span class="nf">error</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="n">g</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3781: *3* Gui-independent menu routines</span>
    <span class="c">#@+node:ekr.20060926213642: *4* capitalizeMinibufferMenuName</span></div>
<div class="viewcode-block" id="leoMenu.capitalizeMinibufferMenuName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.capitalizeMinibufferMenuName">[docs]</a>    <span class="k">def</span> <span class="nf">capitalizeMinibufferMenuName</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">removeHyphens</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
            <span class="n">prevprev</span> <span class="o">=</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span>
                <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">prev</span> <span class="o">==</span> <span class="s">&#39;&amp;&#39;</span> <span class="ow">or</span>
                <span class="n">prev</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span> <span class="ow">or</span>
                <span class="n">prev</span> <span class="o">==</span> <span class="s">&#39;&amp;&#39;</span> <span class="ow">and</span> <span class="n">prevprev</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span>
            <span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">removeHyphens</span> <span class="ow">and</span> <span class="n">ch</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3785: *4* createMenusFromTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.createMenusFromTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenusFromTables">[docs]</a>    <span class="k">def</span> <span class="nf">createMenusFromTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="n">aList</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getMenusList</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">aList</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenusFromConfigList</span><span class="p">(</span><span class="n">aList</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">defineMenuTables</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">createFileMenuFromTable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createEditMenuFromTable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createOutlineMenuFromTable</span><span class="p">()</span>

            <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;create-optional-menus&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">createCmndsMenuFromTable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createWindowMenuFromTable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createHelpMenuFromTable</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3790: *5* createFileMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createFileMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createFileMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createFileMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">fileMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;File&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">fileMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTopTable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Open &amp;With...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">fileMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTop2Table</span><span class="p">)</span>
        <span class="c">#@+&lt;&lt; create the recent files submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3791: *6* &lt;&lt; create the recent files submenu &gt;&gt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Recent &amp;Files...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="c"># Not needed, and causes problems in wxWindows...</span>
            <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">recentFilesManager</span><span class="o">.</span><span class="n">createRecentFilesMenuItems</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the recent files submenu &gt;&gt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="n">fileMenu</span><span class="p">)</span>
        <span class="c">#@+&lt;&lt; create the read/write submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3792: *6* &lt;&lt; create the read/write submenu &gt;&gt;</span>
        <span class="n">readWriteMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Read/Write...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">readWriteMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuReadWriteMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the read/write submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the tangle submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3793: *6* &lt;&lt; create the tangle submenu &gt;&gt;</span>
        <span class="n">tangleMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Tan&amp;gle...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">tangleMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTangleMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the tangle submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the untangle submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3794: *6* &lt;&lt; create the untangle submenu &gt;&gt;</span>
        <span class="n">untangleMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Untangle...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">untangleMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuUntangleMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the untangle submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the import submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3795: *6* &lt;&lt; create the import submenu &gt;&gt;</span>
        <span class="n">importMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Import...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">importMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuImportMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the import submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the export submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3796: *6* &lt;&lt; create the export submenu &gt;&gt;</span>
        <span class="n">exportMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Export...&quot;</span><span class="p">,</span><span class="s">&quot;File&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">exportMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuExportMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the export submenu &gt;&gt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="n">fileMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">fileMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTop3MenuTable</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3786: *5* createEditMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createEditMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createEditMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createEditMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">editMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Edit&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">editMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">editMenuTopTable</span><span class="p">)</span>

        <span class="c">#@+&lt;&lt; create the edit body submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3787: *6* &lt;&lt; create the edit body submenu &gt;&gt;</span>
        <span class="n">editBodyMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Edit &amp;Body...&quot;</span><span class="p">,</span><span class="s">&quot;Edit&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">editBodyMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">editMenuEditBodyTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the edit body submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the edit headline submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3788: *6* &lt;&lt; create the edit headline submenu &gt;&gt;</span>
        <span class="n">editHeadlineMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Edit &amp;Headline...&quot;</span><span class="p">,</span><span class="s">&quot;Edit&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">editHeadlineMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">editMenuEditHeadlineTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the edit headline submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create the find submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3789: *6* &lt;&lt; create the find submenu &gt;&gt;</span>
        <span class="n">findMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Find...&quot;</span><span class="p">,</span><span class="s">&quot;Edit&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">findMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">editMenuFindMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create the find submenu &gt;&gt;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">editMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">editMenuTop2Table</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3797: *5* createOutlineMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createOutlineMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createOutlineMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createOutlineMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">outlineMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">outlineMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuTopMenuTable</span><span class="p">)</span>

        <span class="c">#@+&lt;&lt; create check submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20040711140738.1: *6* &lt;&lt; create check submenu &gt;&gt;</span>
        <span class="n">checkOutlineMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;Chec&amp;k...&quot;</span><span class="p">,</span><span class="s">&quot;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">checkOutlineMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuCheckOutlineMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create check submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create expand/contract submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3798: *6* &lt;&lt; create expand/contract submenu &gt;&gt;</span>
        <span class="n">expandMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;E&amp;xpand/Contract...&quot;</span><span class="p">,</span><span class="s">&quot;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">expandMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuExpandContractMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create expand/contract submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create move submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3799: *6* &lt;&lt; create move submenu &gt;&gt;</span>
        <span class="n">moveSelectMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Move...&quot;</span><span class="p">,</span><span class="s">&quot;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">moveSelectMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuMoveMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create move submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create mark submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3800: *6* &lt;&lt; create mark submenu &gt;&gt;</span>
        <span class="n">markMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;M&amp;ark/Unmark...&quot;</span><span class="p">,</span><span class="s">&quot;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">markMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuMarkMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create mark submenu &gt;&gt;</span>
        <span class="c">#@+&lt;&lt; create goto submenu &gt;&gt;</span>
        <span class="c">#@+node:ekr.20031218072017.3801: *6* &lt;&lt; create goto submenu &gt;&gt;</span>
        <span class="n">gotoMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Go To...&quot;</span><span class="p">,</span><span class="s">&quot;Outline&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">gotoMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuGoToMenuTable</span><span class="p">)</span>
        <span class="c">#@-&lt;&lt; create goto submenu &gt;&gt;</span>
    <span class="c">#@+node:ekr.20050921103736: *5* createCmndsMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createCmndsMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createCmndsMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createCmndsMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&#39;&amp;Cmds&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span><span class="n">table</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="c"># &amp;: a,b,c,d,f,g,h,i,m,n,o,p,r,s,t,u</span>
            <span class="p">(</span><span class="s">&#39;&amp;Abbrev...&#39;</span><span class="p">,</span>          <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuAbbrevTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Body E&amp;ditors&#39;</span><span class="p">,</span>       <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuBodyEditorsTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Buffers...&#39;</span><span class="p">,</span>         <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuBuffersTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Chapters...&#39;</span><span class="p">,</span>        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuChaptersTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;C&amp;ursor/Selection...&#39;</span><span class="p">,[]),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Focus...&#39;</span><span class="p">,</span>           <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuFocusTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Macro...&#39;</span><span class="p">,</span>           <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuMacroTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;M&amp;inibuffer&#39;</span><span class="p">,</span>         <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuMinibufferTable</span><span class="p">),</span>
            <span class="c">#(&#39;&amp;Panes...&#39;,           self.cmdsMenuPanesTable),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Pickers...&#39;</span><span class="p">,</span>         <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuPickersTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Rectangles...&#39;</span><span class="p">,</span>      <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRectanglesTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Re&amp;gisters...&#39;</span><span class="p">,</span>       <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRegistersTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;R&amp;un Script/Tests&#39;</span><span class="p">,</span>   <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRunTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Scr&amp;olling...&#39;</span><span class="p">,</span>       <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuScrollTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Spell C&amp;heck...&#39;</span><span class="p">,</span>     <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuSpellCheckTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Text Commands&#39;</span><span class="p">,</span>      <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuTextTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Toggle Setti&amp;ngs&#39;</span><span class="p">,</span>    <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuToggleTable</span><span class="p">),</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">table</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuChaptersTable</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">chapterController</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;&amp;Cmds&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span><span class="n">table</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="c"># &amp;: b,e,f,s,t,x</span>
            <span class="p">(</span><span class="s">&#39;Cursor &amp;Back...&#39;</span><span class="p">,</span>                     <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuBackTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Cursor Back &amp;Extend Selection...&#39;</span><span class="p">,</span>    <span class="bp">self</span><span class="o">.</span><span class="n">cursorMeuuBackExtendTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Cursor Extend &amp;To...&#39;</span><span class="p">,</span>                <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuExtendTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Cursor &amp;Forward...&#39;</span><span class="p">,</span>                  <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuForwardTable</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Cursor Forward E&amp;xtend Selection...&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuForwardExtendTable</span><span class="p">),</span>
        <span class="p">):</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;C&amp;ursor/Selection...&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3802: *5* createWindowMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createWindowMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createWindowMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createWindowMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">windowMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Window&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">windowMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">windowMenuTopTable</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.3803: *5* createHelpMenuFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createHelpMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createHelpMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createHelpMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&#39;darwin&#39;</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c"># self.getMacHelpMenu(table)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">helpMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="s">&quot;&amp;Help&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">helpMenu</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">helpMenuTable</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070926135612: *5* createMenusFromConfigList &amp; helpers (leoMenu)</span></div>
<div class="viewcode-block" id="leoMenu.createMenusFromConfigList"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenusFromConfigList">[docs]</a>    <span class="k">def</span> <span class="nf">createMenusFromConfigList</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">aList</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Create menus from aList instead of &#39;hard coded&#39; menus.</span>
<span class="sd">        The &#39;top&#39; menu has already been created.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="s">&#39;@menu&#39;</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">aList</span><span class="p">:</span>
            <span class="n">kind</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">val2</span> <span class="o">=</span> <span class="n">z</span>
            <span class="k">if</span> <span class="n">kind</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">kind</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">tag</span><span class="p">):]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleSpecialMenus</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">parentName</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="c"># Create top-level menu.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createMenuFromConfigList</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> not valid outside @menu tree&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">kind</span><span class="p">,</span><span class="n">val</span><span class="p">))</span>

        <span class="n">aList</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getOpenWith</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">aList</span><span class="p">:</span>
            <span class="c"># a list of dicts.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createOpenWithMenuFromTable</span><span class="p">(</span><span class="n">aList</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070927082205: *6* createMenuFromConfigList</span></div>
<div class="viewcode-block" id="leoMenu.createMenuFromConfigList"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenuFromConfigList">[docs]</a>    <span class="k">def</span> <span class="nf">createMenuFromConfigList</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentName</span><span class="p">,</span><span class="n">aList</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>

        <span class="n">table</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">;</span> <span class="n">parentMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">parentName</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">aList</span><span class="p">:</span>
            <span class="n">kind</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">val2</span> <span class="o">=</span> <span class="n">z</span>
            <span class="k">if</span> <span class="n">kind</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;@menu&#39;</span><span class="p">):</span>
                <span class="c"># Menu names can be unicode without any problem.</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">kind</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">table</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">parentMenu</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleSpecialMenus</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">parentName</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">parentName</span><span class="p">)</span> <span class="c"># Create submenu of parent menu.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">createMenuFromConfigList</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">val</span><span class="p">,</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">table</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s">&#39;@item&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="c"># Item names must always be ascii.</span>
                <span class="k">if</span> <span class="n">val2</span><span class="p">:</span>
                    <span class="c"># Translated names can be unicode.</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">val2</span><span class="p">,</span><span class="n">name</span><span class="p">),)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;can not happen: bad kind:&#39;</span><span class="p">,</span><span class="n">kind</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">table</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">parentMenu</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20070927172712: *6* handleSpecialMenus</span></div>
<div class="viewcode-block" id="leoMenu.handleSpecialMenus"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.handleSpecialMenus">[docs]</a>    <span class="k">def</span> <span class="nf">handleSpecialMenus</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">parentName</span><span class="p">,</span><span class="n">table</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Handle a special menu if name is the name of a special menu.</span>
<span class="sd">        return True if this method handles the menu.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">if</span> <span class="n">table</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">table</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">name2</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&amp;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">name2</span> <span class="o">==</span> <span class="s">&#39;plugins&#39;</span><span class="p">:</span>
            <span class="c"># Create the plugins menu using a hook.</span>
            <span class="n">g</span><span class="o">.</span><span class="n">doHook</span><span class="p">(</span><span class="s">&quot;create-optional-menus&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">name2</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;recentfiles&#39;</span><span class="p">):</span>
            <span class="c"># Just create the menu.</span>
            <span class="c"># createRecentFilesMenuItems will create the contents later.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createNewMenu</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">parentName</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">name2</span> <span class="o">==</span> <span class="s">&#39;help&#39;</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&#39;darwin&#39;</span><span class="p">:</span>
            <span class="n">helpMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMacHelpMenu</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">helpMenu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="c">#@+node:ekr.20031218072017.3752: *4* defineMenuTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.defineMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuTables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuTables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuTables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineWindowMenuTables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuTables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineHelpMenuTables</span><span class="p">()</span>

    <span class="c">#@+node:ekr.20031218072017.3753: *5* defineEditMenuTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuTopTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuEditBodyTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuEditHeadlineTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuFindMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineEditMenuTop2Table</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.839: *6* defineEditMenuTopTable</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuTopTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuTopTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuTopTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editMenuTopTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: u,r reserved for undo/redo: a,d,p,t,y.</span>
            <span class="c"># &amp; (later): e,g,n,v.</span>
            <span class="p">(</span><span class="s">&quot;Can&#39;t Undo&quot;</span><span class="p">,</span><span class="s">&#39;undo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;Can&#39;t Redo&quot;</span><span class="p">,</span><span class="s">&#39;redo&#39;</span><span class="p">),</span> 
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Cu&amp;t&#39;</span><span class="p">,</span><span class="s">&#39;cut-text&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Cop&amp;y&#39;</span><span class="p">,</span><span class="s">&#39;copy-text&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Paste&#39;</span><span class="p">,</span><span class="s">&#39;paste-text&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Delete&#39;</span><span class="p">,</span><span class="s">&#39;backward-delete-char&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Select &amp;All&#39;</span><span class="p">,</span><span class="s">&#39;select-all&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3754: *6* defineEditMenuEditBodyTable</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuEditBodyTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuEditBodyTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuEditBodyTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editMenuEditBodyTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># Shortcuts a,b,d,e,i,l,m,n,r,s,t,u</span>
            <span class="s">&#39;*extract-&amp;section&#39;</span><span class="p">,</span>
            <span class="s">&#39;*extract-&amp;names&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;extract&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*convert-all-b&amp;lanks&#39;</span><span class="p">,</span>
            <span class="s">&#39;*convert-all-t&amp;abs&#39;</span><span class="p">,</span>
            <span class="s">&#39;*convert-&amp;blanks&#39;</span><span class="p">,</span>
            <span class="s">&#39;*convert-&amp;tabs&#39;</span><span class="p">,</span>
            <span class="s">&#39;*insert-body-&amp;time&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;reformat-paragraph&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;indent-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;unindent-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;match-brackets&#39;</span><span class="p">,</span>
            <span class="s">&#39;*add-comments&#39;</span><span class="p">,</span>
            <span class="s">&#39;*delete-comments&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3755: *6* defineEditMenuEditHeadlineTable</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuEditHeadlineTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuEditHeadlineTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuEditHeadlineTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editMenuEditHeadlineTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*edit-&amp;headline&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;end-edit-headline&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;abort-edit-headline&#39;</span><span class="p">,</span>
            <span class="s">&#39;*insert-headline-&amp;time&#39;</span><span class="p">,</span>
            <span class="s">&#39;*toggle-&amp;angle-brackets&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3756: *6* defineEditMenuFindMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuFindMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuFindMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuFindMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editMenuFindMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,b,c,d,e,f,h,i,l,n,o,p,q,r,s,u,w,x</span>
            <span class="s">&#39;*&amp;open-find-tab&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;hide-find-tab&#39;</span><span class="p">,</span>
            <span class="s">&#39;*search-&amp;with-present-options&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*find-&amp;next&#39;</span><span class="p">,</span>
            <span class="s">&#39;*find-&amp;prev&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;change&#39;</span><span class="p">,</span>
            <span class="s">&#39;*find-&amp;all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*clone-fi&amp;nd-all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*change-a&amp;ll&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;find-character&#39;</span><span class="p">,</span>
            <span class="s">&#39;*find-character-extend-&amp;selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;backward-find-character&#39;</span><span class="p">,</span>
            <span class="s">&#39;*backward-find-character-&amp;extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;isearch-forward&#39;</span><span class="p">,</span>
            <span class="s">&#39;*isea&amp;rch-backward&#39;</span><span class="p">,</span>
            <span class="s">&#39;*isearch-forward-rege&amp;xp&#39;</span><span class="p">,</span>
            <span class="s">&#39;*isearch-backward-regex&amp;p&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;query-replace&#39;</span><span class="p">,</span>
            <span class="s">&#39;*q&amp;uery-replace-regex&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3757: *6* defineEditMenuTop2Table</span></div>
<div class="viewcode-block" id="leoMenu.defineEditMenuTop2Table"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineEditMenuTop2Table">[docs]</a>    <span class="k">def</span> <span class="nf">defineEditMenuTop2Table</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">try</span><span class="p">:</span>        <span class="n">show</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">getColorizer</span><span class="p">()</span><span class="o">.</span><span class="n">showInvisibles</span>
        <span class="k">except</span><span class="p">:</span>     <span class="n">show</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">show</span><span class="p">,</span><span class="s">&quot;Hide In&amp;visibles&quot;</span><span class="p">,</span><span class="s">&quot;Show In&amp;visibles&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">editMenuTop2Table</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*&amp;goto-global-line&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;execute-script&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">label</span><span class="p">,</span><span class="s">&#39;toggle-invisibles&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;Setti&amp;ngs&quot;</span><span class="p">,</span><span class="s">&#39;open-leoSettings-leo&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="c"># Top-level shortcuts earlier: a,d,p,t,u,y,z</span>
        <span class="c"># Top-level shortcuts here: e,g,n,v</span>
    <span class="c">#@+node:ekr.20031218072017.3758: *5* defineFileMenuTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuTopTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuTop2Table</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuReadWriteMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuTangleMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuUntangleMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuImportMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuExportMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineFileMenuTop3MenuTable</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3759: *6* defineFileMenuTopTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuTopTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuTopTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuTopTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTopTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*&amp;new&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&amp;Open...&#39;</span><span class="p">,</span><span class="s">&#39;open-outline&#39;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3760: *6* defineFileMenuTop2Table</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuTop2Table"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuTop2Table">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuTop2Table</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTop2Table</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;&amp;Close&#39;</span><span class="p">,</span><span class="s">&#39;close-window&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Save&#39;</span><span class="p">,</span><span class="s">&#39;save-file&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Save &amp;As&#39;</span><span class="p">,</span><span class="s">&#39;save-file-as&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Save As &amp;Unzipped&#39;</span><span class="p">,</span><span class="s">&#39;save-file-as-unzipped&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Save As &amp;Zipped&#39;</span><span class="p">,</span><span class="s">&#39;save-file-as-zipped&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Save &amp;To&#39;</span><span class="p">,</span><span class="s">&#39;save-file-to&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Re&amp;vert To Saved&#39;</span><span class="p">,</span><span class="s">&#39;revert&#39;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3761: *6* defineFileMenuReadWriteMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuReadWriteMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuReadWriteMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuReadWriteMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuReadWriteMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*&amp;check-derived-file&#39;</span><span class="p">,</span>
            <span class="s">&#39;*check-leo-file&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;read-outline-only&#39;</span><span class="p">,</span>
            <span class="s">&#39;*write-&amp;outline-only&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*read-&amp;file-into-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*writ&amp;e-file-from-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Read @&amp;auto Nodes&#39;</span><span class="p">,</span><span class="s">&#39;read-at-auto-nodes&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Write @a&amp;uto Nodes&#39;</span><span class="p">,</span><span class="s">&#39;write-at-auto-nodes&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Write D&amp;irty @a&amp;uto Nodes&#39;</span><span class="p">,</span><span class="s">&#39;write-dirty-at-auto-nodes&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Read @file &amp;Nodes&#39;</span><span class="p">,</span><span class="s">&#39;read-at-file-nodes&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Write &amp;Dirty @file Nodes&#39;</span><span class="p">,</span><span class="s">&#39;write-dirty-at-file-nodes&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Write &amp;Missing @file Nodes&#39;</span><span class="p">,</span><span class="s">&#39;write-missing-at-file-nodes&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;&amp;Write @file Nodes&#39;</span><span class="p">,</span><span class="s">&#39;write-at-file-nodes&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="c"># a,cd,e,f,i,l,m,n,o,r,u,w</span>
    <span class="c">#@+node:ekr.20031218072017.3762: *6* defineFileMenuTangleMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuTangleMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuTangleMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuTangleMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTangleMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*tangle-&amp;all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*tangle-&amp;marked&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;tangle&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3763: *6* defineFileMenuUntangleMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuUntangleMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuUntangleMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuUntangleMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuUntangleMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*untangle-&amp;all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*untangle-&amp;marked&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;untangle&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3764: *6* defineFileMenuImportMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuImportMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuImportMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuImportMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuImportMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c">#&amp;: c,d,f,n,o,r,</span>
            <span class="s">&#39;*import-&amp;derived-file&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Import To @&amp;file&#39;</span><span class="p">,</span><span class="s">&#39;import-at-file&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Import To @&amp;root&#39;</span><span class="p">,</span><span class="s">&#39;import-at-root&#39;</span><span class="p">),</span>
            <span class="s">&#39;*import-&amp;cweb-files&#39;</span><span class="p">,</span>
            <span class="s">&#39;*import-&amp;noweb-files&#39;</span><span class="p">,</span>
            <span class="s">&#39;*import-flattened-&amp;outline&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3765: *6* defineFileMenuExportMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuExportMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuExportMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuExportMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuExportMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*export-&amp;headlines&#39;</span><span class="p">,</span>
            <span class="s">&#39;*outline-to-&amp;cweb&#39;</span><span class="p">,</span>
            <span class="s">&#39;*outline-to-&amp;noweb&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;flatten-outline&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;remove-sentinels&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;weave&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3766: *6* defineFileMenuTop3MenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineFileMenuTop3MenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineFileMenuTop3MenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineFileMenuTop3MenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileMenuTop3MenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;E&amp;xit&#39;</span><span class="p">,</span><span class="s">&#39;exit-leo&#39;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3767: *5* defineOutlineMenuTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuTopMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuCheckOutlineMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuExpandContractMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuMoveMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuMarkMenuTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineOutlineMenuGoToMenuTable</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3768: *6* defineOutlineMenuTopMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuTopMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuTopMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuTopMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuTopMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*c&amp;ut-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*c&amp;opy-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;paste-node&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Pas&amp;te Node As Clone&#39;</span><span class="p">,</span><span class="s">&#39;paste-retaining-clones&#39;</span><span class="p">),</span>
            <span class="s">&#39;*&amp;delete-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;insert-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;clone-node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*sort-childre&amp;n&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;sort-siblings&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;hoist&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;D&amp;e-Hoist&#39;</span><span class="p">,</span><span class="s">&#39;de-hoist&#39;</span><span class="p">),</span> <span class="c"># To preserve the &#39;-&#39; in De-Hoist.</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="c"># Ampersand bindings:  a,b,c,d,e,h,i,n,o,p,t,s,y</span>
        <span class="c"># Bindings for entries that go to submenus: a,g,k,m,x</span>
    <span class="c">#@+node:ekr.20040711140738: *6* defineOutlineMenuCheckOutlineMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuCheckOutlineMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuCheckOutlineMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuCheckOutlineMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuCheckOutlineMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,c,d,l,o</span>
            <span class="s">&#39;*check-&amp;outline&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;dump-outline&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*compare-&amp;leo-files&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*check-&amp;all-python-code&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;check-python-code&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3769: *6* defineOutlineMenuExpandContractMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuExpandContractMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuExpandContractMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuExpandContractMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuExpandContractMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*&amp;contract-all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;node&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;parent&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-or-go-&amp;left&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-p&amp;rev-level&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-n&amp;ext-level&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-and-go-right&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-or-go-right&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;1&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;2&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;3&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;4&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;5&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;6&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;7&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-to-level-&amp;8&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-&amp;all&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-n&amp;ode&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3770: *6* defineOutlineMenuMoveMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuMoveMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuMoveMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuMoveMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuMoveMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s">&#39;Move &amp;Down&#39;</span><span class="p">,</span><span class="s">&#39;move-outline-down&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Move &amp;Left&#39;</span><span class="p">,</span><span class="s">&#39;move-outline-left&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Move &amp;Right&#39;</span><span class="p">,</span><span class="s">&#39;move-outline-right&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Move &amp;Up&#39;</span><span class="p">,</span><span class="s">&#39;move-outline-up&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;promote&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;demote&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3771: *6* defineOutlineMenuMarkMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuMarkMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuMarkMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuMarkMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuMarkMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;*&amp;mark&#39;</span><span class="p">,</span>
            <span class="s">&#39;*mark-&amp;subheads&#39;</span><span class="p">,</span>
            <span class="s">&#39;*mark-changed-&amp;items&#39;</span><span class="p">,</span>
            <span class="c"># &#39;*mark-changed-&amp;roots&#39;,</span>
            <span class="s">&#39;*mark-&amp;clones&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;unmark-all&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3772: *6* defineOutlineMenuGoToMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.defineOutlineMenuGoToMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOutlineMenuGoToMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineOutlineMenuGoToMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">outlineMenuGoToMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,b,c,d,e,f,g,h,i,l,m,n,o,p,r,s,t,v,</span>
            <span class="p">(</span><span class="s">&#39;Go To &amp;First Node&#39;</span><span class="p">,</span><span class="s">&#39;goto-first-node&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To First V&amp;isible&#39;</span><span class="p">,</span><span class="s">&#39;goto-first-visible-node&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To First Si&amp;bling&#39;</span><span class="p">,</span><span class="s">&#39;goto-first-sibling&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Go To Next C&amp;hanged&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-changed&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next &amp;Clone&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-clone&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next &amp;Marked&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-marked&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next N&amp;ode&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-node&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next &amp;Sibling&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-sibling&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next Visibl&amp;e&#39;</span><span class="p">,</span><span class="s">&#39;goto-next-visible&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Next Visite&amp;d&#39;</span><span class="p">,</span><span class="s">&#39;go-forward&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Go To P&amp;arent&#39;</span><span class="p">,</span><span class="s">&#39;goto-parent&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Go To &amp;Prev Node&#39;</span><span class="p">,</span><span class="s">&#39;goto-prev-node&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To P&amp;rev Sibling&#39;</span><span class="p">,</span><span class="s">&#39;goto-prev-sibling&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Pre&amp;v Visible&#39;</span><span class="p">,</span><span class="s">&#39;goto-prev-visible&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Prev Visi&amp;ted&#39;</span><span class="p">,</span><span class="s">&#39;go-back&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Go To Last Node&#39;</span><span class="p">,</span><span class="s">&#39;goto-last-node&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To Last Siblin&amp;g&#39;</span><span class="p">,</span><span class="s">&#39;goto-last-sibling&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Go To &amp;Last Visible&#39;</span><span class="p">,</span><span class="s">&#39;goto-last-visible-node&#39;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20050921103230: *5* defineCmdsMenuTables &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuAbbrevTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuBodyEditorsTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuBuffersTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuChaptersTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuCursorTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuFocusTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuMacroTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuMinibufferTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuPickersTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuRectanglesTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuRegistersTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuRunTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuScrollTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuSpellCheckTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuTextTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defineCmdsMenuToggleTable</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20060117094955.1: *6* defineCmdsMenuAbbrevTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuAbbrevTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuAbbrevTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuAbbrevTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuAbbrevTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,e,i,k,l,r,w,v</span>
            <span class="s">&#39;abbre&amp;v-mode&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;list-abbrevs&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;read-abbrev-file&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;write-abbrev-file&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;add-global-abbrev&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;inverse-add-global-abbrev&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;kill-all-abbrevs&#39;</span><span class="p">,</span>
            <span class="c"># &#39;-&#39;,</span>
            <span class="c"># &#39;expand-abbrev&#39;, # Not a command</span>
            <span class="c"># &#39;&amp;expand-region-abbrevs&#39;,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060912093104: *6* defineCmdsMenuBodyEditorsTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuBodyEditorsTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuBodyEditorsTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuBodyEditorsTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuBodyEditorsTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,c,d</span>
            <span class="s">&#39;&amp;add-editor&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;cycle-editor-focus&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;delete-editor&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060117095212: *6* defineCmdsMenuBufferTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuBuffersTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuBuffersTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuBuffersTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuBuffersTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;append-to-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;kill-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;list-&amp;buffers&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;list-buffers-alphabetically&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;prepend-to-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;rename-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;switch-to-buffer&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20070604205927: *6* defineCmdsMenuChaptersTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuChaptersTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuChaptersTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuChaptersTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuChaptersTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;clone-node-to-chapter&#39;</span><span class="p">,</span>
            <span class="s">&#39;c&amp;opy-node-to-chapter&#39;</span><span class="p">,</span>
            <span class="s">&#39;c&amp;reate-chapter&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;move-node-to-chapter&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;remove-chapter&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;select-chapter&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060924124119: *6* defineCmdsMenuCursorTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuCursorTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuCursorTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuCursorTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuBackTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: b,c,l,p,s,v,w</span>
            <span class="s">&#39;back-&amp;char&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;paragraph&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;sentence&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;word&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;beginning-of-&amp;buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;beginning-of-&amp;line&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;pre&amp;vious-line&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursorMeuuBackExtendTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: b,c,l,p,s,v,w</span>
            <span class="s">&#39;back-&amp;char-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;paragraph-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;sentence-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;back-&amp;word-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;beginning-of-&amp;buffer-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;beginning-of-&amp;line-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;pre&amp;vious-line-extend-selection&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuExtendTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: l,p,s,w</span>
            <span class="s">&#39;extend-to-&amp;line&#39;</span><span class="p">,</span>
            <span class="s">&#39;extend-to-&amp;paragraph&#39;</span><span class="p">,</span>
            <span class="s">&#39;extend-to-&amp;sentence&#39;</span><span class="p">,</span>
            <span class="s">&#39;extend-to-&amp;word&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuForwardTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: b,c,e,l,n,p,s,w</span>
            <span class="s">&#39;end-of-&amp;buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;end-of-&amp;line&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;char&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;paragraph&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;sentence&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;end-word&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;word&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;next-line&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursorMenuForwardExtendTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: b,c,e,l,n,p,s,w</span>
            <span class="s">&#39;end-of-&amp;buffer-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;end-of-&amp;line-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;char-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;paragraph-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;sentence-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;end-word-extend-selection&#39;</span><span class="p">,</span>
            <span class="s">&#39;forward-&amp;word-extend-selection&#39;</span><span class="p">,</span><span class="c">#</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;next-line-extend-selection&#39;</span><span class="p">,</span>    
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060923060822: *6* defineCmdsMenuFocusTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuFocusTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuFocusTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuFocusTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuFocusTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;cycle-all-focus&#39;</span><span class="p">,</span>
            <span class="s">&#39;focus-to-&amp;body&#39;</span><span class="p">,</span>          
            <span class="s">&#39;focus-to-&amp;log&#39;</span><span class="p">,</span>             
            <span class="s">&#39;focus-to-&amp;minibuffer&#39;</span><span class="p">,</span>     
            <span class="s">&#39;focus-to-&amp;tree&#39;</span><span class="p">,</span>             
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060117114315: *6* defineCmdsMenuMacroTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuMacroTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuMacroTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuMacroTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuMacroTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;load-file&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;start-kbd-macro&#39;</span><span class="p">,</span>
            <span class="c"># &#39;&amp;end-kbd-macro&#39;,</span>
            <span class="s">&#39;&amp;name-last-kbd-macro&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;call-last-kbd-macro&#39;</span><span class="p">,</span>
            <span class="c"># &#39;&amp;insert-kbd-macro&#39;,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20061011084101.1: *6* defineCmdsMenuMinibufferTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuMinibufferTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuMinibufferTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuMinibufferTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuMinibufferTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: f,h,i,q,r,s,v</span>
            <span class="s">&#39;&amp;full-command&#39;</span><span class="p">,</span>
            <span class="s">&#39;keyboard-&amp;quit&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;repeat-complex-command&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;view-lossage&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;show-mini-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;h&amp;ide-mini-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;help-for-minibuffer&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20061011085641: *6* defineCmdsMenuPickersTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuPickersTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuPickersTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuPickersTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span> <span class="n">cmdsMenuPickersTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;show-&amp;colors&#39;</span><span class="p">,</span>
            <span class="s">&#39;show-find-&amp;options&#39;</span><span class="p">,</span>
            <span class="s">&#39;show-&amp;fonts&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060117095212.2: *6* defineCmdsMenuRectanglesTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuRectanglesTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuRectanglesTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuRectanglesTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRectanglesTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;clear-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;c&amp;lose-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;delete-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;kill-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;open-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;string-rectangle&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;yank-rectangle&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060117095212.1: *6* defineCmdsMenuRegistersTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuRegistersTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuRegistersTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuRegistersTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRegistersTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,c,e,i,j,n,p,r,v</span>
            <span class="s">&#39;&amp;append-to-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;copy-r&amp;ectangle-to-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;copy-to-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;i&amp;ncrement-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;insert-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;jump-to-register&#39;</span><span class="p">,</span>
            <span class="c"># &#39;number-to-register&#39;,</span>
            <span class="s">&#39;&amp;point-to-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;p&amp;repend-to-register&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;view-register&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20061119061958: *6* defineCmdsMenuRunTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuRunTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuRunTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuRunTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuRunTable</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c"># &amp;: e,r</span>
        <span class="s">&#39;&amp;execute-script&#39;</span><span class="p">,</span>
        <span class="s">&#39;&amp;run-unit-tests&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060923060822.1: *6* defineCmdsMenuScrollTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuScrollTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuScrollTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuScrollTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuScrollTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: c,d,e,f,l,o,p,r,v,x</span>
            <span class="s">&#39;scroll-outline-down-&amp;line&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-outline-down-&amp;page&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-outline-le&amp;ft&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-outline-&amp;right&#39;</span><span class="p">,</span>
            <span class="s">&#39;s&amp;croll-outline-up-line&#39;</span><span class="p">,</span>
            <span class="s">&#39;scr&amp;oll-outline-up-page&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-down-half-page&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-down-line&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-&amp;down-page&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-up-half-page&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-up-line&#39;</span><span class="p">,</span>
            <span class="s">&#39;scroll-&amp;up-page&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060117095212.7: *6* defineCmdsMenuSpellCheckTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuSpellCheckTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuSpellCheckTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuSpellCheckTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuSpellCheckTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&amp;open-spell-tab&#39;</span><span class="p">,</span>
            <span class="s">&#39;spell-&amp;change&#39;</span><span class="p">,</span>
            <span class="s">&#39;spell-change-&amp;then-find&#39;</span><span class="p">,</span>
            <span class="s">&#39;spell-&amp;find&#39;</span><span class="p">,</span>
            <span class="s">&#39;spell-&amp;ignore&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060924161901: *6* defineCmdsMenuTextTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuTextTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuTextTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuTextTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuTextTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,b,c,d,e,f,g,i,l,m,n,o,p,r,s,u</span>
            <span class="s">&#39;&amp;beautify&#39;</span><span class="p">,</span>
            <span class="s">&#39;beautify-&amp;all&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;center-&amp;line&#39;</span><span class="p">,</span>
            <span class="s">&#39;center-&amp;region&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;capitalize-word&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;downcase-word&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;upcase-word&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;d&amp;owncase-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;u&amp;pcase-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;indent-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;indent-r&amp;elative&#39;</span><span class="p">,</span>
            <span class="s">&#39;indent-ri&amp;gidly&#39;</span><span class="p">,</span>
            <span class="s">&#39;u&amp;nindent-region&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;sort-colu&amp;mns&#39;</span><span class="p">,</span>
            <span class="s">&#39;sort-&amp;fields&#39;</span><span class="p">,</span>
            <span class="s">&#39;&amp;sort-lines&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20060926161940: *6* defineCmdsMenuToggleTable</span></div>
<div class="viewcode-block" id="leoMenu.defineCmdsMenuToggleTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineCmdsMenuToggleTable">[docs]</a>    <span class="k">def</span> <span class="nf">defineCmdsMenuToggleTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmdsMenuToggleTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: d,e,m,s,t,u,v</span>
            <span class="s">&#39;toggle-a&amp;utocompleter&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-call&amp;tips&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-&amp;extend-mode&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-input-&amp;state&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-in&amp;visibles&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-&amp;mini-buffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-split-&amp;direction&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="c"># &amp;: a,b,c,f,h,i,r,w,x</span>
            <span class="s">&#39;toggle-find-&amp;ignore-case-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-in-&amp;body-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-in-&amp;headline-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-mark-&amp;changes-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-mark-&amp;finds-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-rege&amp;x-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-&amp;reverse-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-&amp;word-option&#39;</span><span class="p">,</span>
            <span class="s">&#39;toggle-find-wrap-&amp;around-option&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3773: *5* defineWindowMenuTables</span></div>
<div class="viewcode-block" id="leoMenu.defineWindowMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineWindowMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineWindowMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">windowMenuTopTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,b,c,d,e,f,l,m,n,o,p,r,s,t,u,w,x,y</span>
            <span class="s">&#39;*&amp;equal-sized-panes&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;toggle-active-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*toggle-&amp;split-direction&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;body-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;log-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;outline-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*contract-&amp;pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-bo&amp;dy-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-lo&amp;g-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-o&amp;utline-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*expand-pa&amp;ne&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;fully-expand-body-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*full&amp;y-expand-log-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*fully-e&amp;xpand-outline-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;*fully-exp&amp;and-pane&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;resize-to-screen&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;cascade-windows&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;minimize-all&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*open-compare-window&#39;</span><span class="p">,</span>
            <span class="s">&#39;*open-python-&amp;window&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3774: *5* defineHelpMenuTables</span></div>
<div class="viewcode-block" id="leoMenu.defineHelpMenuTables"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineHelpMenuTables">[docs]</a>    <span class="k">def</span> <span class="nf">defineHelpMenuTables</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">helpMenuTable</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c"># &amp;: a,b,c,d,e,f,h,l,m,n,o,p,r,s,t,u</span>
            <span class="p">(</span><span class="s">&#39;&amp;About Leo...&#39;</span><span class="p">,</span>           <span class="s">&#39;about-leo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Online &amp;Home Page&#39;</span><span class="p">,</span>       <span class="s">&#39;open-online-home&#39;</span><span class="p">),</span>
            <span class="c"># &#39;*open-online-&amp;tutorial&#39;,</span>
            <span class="s">&#39;*open-&amp;users-guide&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Open Leo&amp;Docs.leo&#39;</span><span class="p">,</span>       <span class="s">&#39;open-leoDocs-leo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Open Leo&amp;Plugins.leo&#39;</span><span class="p">,</span>    <span class="s">&#39;open-leoPlugins-leo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Open Leo&amp;Settings.leo&#39;</span><span class="p">,</span>   <span class="s">&#39;open-leoSettings-leo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Open &amp;myLeoSettings.leo&#39;</span><span class="p">,</span> <span class="s">&#39;open-myLeoSettings-leo&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;Open scr&amp;ipts.leo&#39;</span><span class="p">,</span>       <span class="s">&#39;open-scripts-leo&#39;</span><span class="p">),</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*he&amp;lp-for-minibuffer&#39;</span><span class="p">,</span>
            <span class="s">&#39;*help-for-&amp;command&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*&amp;apropos-autocompletion&#39;</span><span class="p">,</span>
            <span class="s">&#39;*apropos-&amp;bindings&#39;</span><span class="p">,</span>
            <span class="s">&#39;*apropos-&amp;debugging-commands&#39;</span><span class="p">,</span>
            <span class="s">&#39;*apropos-&amp;find-commands&#39;</span><span class="p">,</span>
            <span class="s">&#39;-&#39;</span><span class="p">,</span>
            <span class="s">&#39;*pri&amp;nt-bindings&#39;</span><span class="p">,</span>
            <span class="s">&#39;*print-c&amp;ommands&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3780: *4* hasSelection</span>
    <span class="c"># Returns True if text in the outline or body text is selected.</span>
</div>
<div class="viewcode-block" id="leoMenu.hasSelection"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.hasSelection">[docs]</a>    <span class="k">def</span> <span class="nf">hasSelection</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>

        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="n">first</span><span class="p">,</span><span class="n">last</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getSelectionRange</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">first</span> <span class="o">!=</span> <span class="n">last</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="c">#@+node:ekr.20051022053758.1: *3* Helpers</span>
    <span class="c">#@+node:ekr.20031218072017.3783: *4* canonicalizeMenuName &amp; cononicalizeTranslatedMenuName</span></div>
<div class="viewcode-block" id="leoMenu.canonicalizeMenuName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.canonicalizeMenuName">[docs]</a>    <span class="k">def</span> <span class="nf">canonicalizeMenuName</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>

        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()])</span>
</div>
<div class="viewcode-block" id="leoMenu.canonicalizeTranslatedMenuName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.canonicalizeTranslatedMenuName">[docs]</a>    <span class="k">def</span> <span class="nf">canonicalizeTranslatedMenuName</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>

        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s">&#39;&amp; </span><span class="se">\t\n\r</span><span class="s">&#39;</span><span class="p">])</span>
    <span class="c">#@+node:ekr.20051022044950: *4* computeOldStyleShortcutKey</span></div>
<div class="viewcode-block" id="leoMenu.computeOldStyleShortcutKey"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.computeOldStyleShortcutKey">[docs]</a>    <span class="k">def</span> <span class="nf">computeOldStyleShortcutKey</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Compute the old-style shortcut key for @shortcuts entries.&#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()])</span>
    <span class="c">#@+node:ekr.20031218072017.1723: *4* createMenuEntries (leoMenu) &amp; helpers</span></div>
<div class="viewcode-block" id="leoMenu.createMenuEntries"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenuEntries">[docs]</a>    <span class="k">def</span> <span class="nf">createMenuEntries</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Create a menu entry from the table.</span>
<span class="sd">        New in 4.4: this method shows the shortcut in the menu,</span>
<span class="sd">        but this method **never** binds any shortcuts.&#39;&#39;&#39;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTesting</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">menu</span><span class="p">:</span> <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">traceMenuTable</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">label</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">done</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenuEntryInfo</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">menu</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">done</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">commandName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenuEntryBindings</span><span class="p">(</span><span class="n">command</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="p">,</span><span class="n">label</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">commandName</span><span class="p">:</span> <span class="k">continue</span>

            <span class="n">masterMenuCallback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createMasterMenuCallback</span><span class="p">(</span>
                <span class="n">dynamicMenu</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">commandName</span><span class="p">)</span>

            <span class="n">realLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">amp_index</span> <span class="o">=</span> <span class="n">realLabel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
            <span class="n">realLabel</span> <span class="o">=</span> <span class="n">realLabel</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>

            <span class="c"># c.add_command ensures that c.outerUpdate is called.</span>
            <span class="n">c</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">realLabel</span><span class="p">,</span>
                <span class="n">accelerator</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="c"># The accelerator is now computed dynamically.</span>
                <span class="n">command</span><span class="o">=</span><span class="n">masterMenuCallback</span><span class="p">,</span>
                <span class="n">commandName</span><span class="o">=</span><span class="n">commandName</span><span class="p">,</span>
                <span class="n">underline</span><span class="o">=</span><span class="n">amp_index</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20111102072143.10016: *5* createMasterMenuCallback</span></div>
<div class="viewcode-block" id="leoMenu.createMasterMenuCallback"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMasterMenuCallback">[docs]</a>    <span class="k">def</span> <span class="nf">createMasterMenuCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">commandName</span><span class="p">):</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">def</span> <span class="nf">setWidget</span><span class="p">():</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">getFocus</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">w</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;darwin&#39;</span><span class="p">):</span>
                 <span class="c"># 2012/01/11: redirect (MacOS only).</span>
                <span class="n">wname</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">widget_name</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
                <span class="k">if</span> <span class="n">wname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;head&#39;</span><span class="p">):</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">edit_widget</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">p</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">w</span>

        <span class="k">if</span> <span class="n">dynamicMenu</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
                <span class="k">def</span> <span class="nf">masterDynamicMenuCallback</span> <span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">):</span>
                    <span class="c"># 2012/01/07: set w here.</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="n">setWidget</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">w</span><span class="p">)</span> 
                    <span class="n">event</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">create_key_event</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">masterCommand</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">command</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">masterDynamicMenuCallback</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">internalError</span><span class="p">(</span><span class="s">&#39;no callback for dynamic menu item.&#39;</span><span class="p">)</span>
                <span class="k">def</span> <span class="nf">dummyMasterMenuCallback</span><span class="p">():</span>
                    <span class="k">pass</span>
                <span class="k">return</span> <span class="n">dummyMasterMenuCallback</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">masterStaticMenuCallback</span> <span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">commandName</span><span class="o">=</span><span class="n">commandName</span><span class="p">):</span>
                <span class="c"># 2011/10/28: Use only the command name to dispatch the command.</span>
                <span class="c"># 2012/01/07: Bug fix: set w here.</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">setWidget</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">commandName</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">create_key_event</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">masterCommand</span><span class="p">(</span><span class="n">commandName</span><span class="o">=</span><span class="n">commandName</span><span class="p">,</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">masterStaticMenuCallback</span>
    <span class="c">#@+node:ekr.20111028060955.16568: *5* getMenuEntryBindings</span></div>
<div class="viewcode-block" id="leoMenu.getMenuEntryBindings"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getMenuEntryBindings">[docs]</a>    <span class="k">def</span> <span class="nf">getMenuEntryBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="p">,</span><span class="n">label</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Compute commandName from command.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">):</span>
            <span class="c"># Command is really a command name.</span>
            <span class="n">commandName</span> <span class="o">=</span> <span class="n">command</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># First, get the old-style name.</span>
            <span class="n">commandName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOldStyleShortcutKey</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">commandsDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">commandName</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">trace</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">command</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">dynamicMenu</span><span class="p">:</span>
            <span class="c"># This may come from a plugin that normally isn&#39;t enabled.</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;No inverse for </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">commandName</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">commandName</span>
    <span class="c">#@+node:ekr.20111028060955.16565: *5* getMenuEntryInfo</span></div>
<div class="viewcode-block" id="leoMenu.getMenuEntryInfo"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getMenuEntryInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getMenuEntryInfo</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">menu</span><span class="p">):</span>

        <span class="n">done</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">isString</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c"># A single string is both the label and the command.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">data</span>
            <span class="n">removeHyphens</span> <span class="o">=</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;*&#39;</span>
            <span class="k">if</span> <span class="n">removeHyphens</span><span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capitalizeMinibufferMenuName</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">removeHyphens</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&amp;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
                <span class="n">done</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># That&#39;s all.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">type</span><span class="p">(()),</span> <span class="nb">type</span><span class="p">([]))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="c"># Command can be a minibuffer-command name.</span>
                    <span class="n">label</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="n">data</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># Ignore shortcuts bound in menu tables.</span>
                    <span class="n">label</span><span class="p">,</span><span class="n">junk</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="n">data</span>

                <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_separator</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
                    <span class="n">done</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># That&#39;s all.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;bad data in menu table: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                <span class="n">done</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># Ignore bad data</span>

        <span class="k">return</span> <span class="n">label</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">done</span>
    <span class="c">#@+node:ekr.20111028060955.16563: *5* traceMenuTable</span></div>
<div class="viewcode-block" id="leoMenu.traceMenuTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.traceMenuTable">[docs]</a>    <span class="k">def</span> <span class="nf">traceMenuTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">trace</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">format</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%40s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span>
        <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="o">*</span><span class="mi">40</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">type</span><span class="p">(()),</span> <span class="nb">type</span><span class="p">([])):</span>
                <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">format</span> <span class="o">%</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">name</span><span class="p">,</span><span class="n">junk</span><span class="p">,</span><span class="n">func</span> <span class="o">=</span> <span class="n">data</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">format</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">func</span> <span class="ow">and</span> <span class="n">func</span><span class="o">.</span><span class="n">__name__</span> <span class="ow">or</span> <span class="s">&#39;&lt;NO FUNC&gt;&#39;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">format</span> <span class="o">%</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="c">#@+node:ekr.20031218072017.3784: *4* createMenuItemsFromTable</span></div>
<div class="viewcode-block" id="leoMenu.createMenuItemsFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenuItemsFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createMenuItemsFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">trace</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">menuWarningsGiven</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">isNullGui</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">es_print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">guiName</span><span class="p">(),</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">())</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">es_print</span><span class="p">(</span><span class="s">&quot;menu does not exist: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">menuName</span><span class="p">))</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createMenuEntries</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="n">table</span><span class="p">,</span><span class="n">dynamicMenu</span><span class="o">=</span><span class="n">dynamicMenu</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_print</span><span class="p">(</span><span class="s">&quot;exception creating items for&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="s">&quot;menu&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>

        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">menuWarningsGiven</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c">#@+node:ekr.20031218072017.3804: *4* createNewMenu</span></div>
<div class="viewcode-block" id="leoMenu.createNewMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createNewMenu">[docs]</a>    <span class="k">def</span> <span class="nf">createNewMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="n">parentName</span><span class="o">=</span><span class="s">&quot;top&quot;</span><span class="p">,</span><span class="n">before</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">parentName</span><span class="p">)</span> <span class="c"># parent may be None.</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;menu already exists:&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_menu</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">menuName</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">,</span><span class="n">menu</span><span class="p">)</span>
                <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
                <span class="n">amp_index</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">before</span><span class="p">:</span> <span class="c"># Insert the menu before the &quot;before&quot; menu.</span>
                    <span class="n">index_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="n">before</span><span class="p">)</span>
                    <span class="n">amp_index</span> <span class="o">=</span> <span class="n">index_label</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
                    <span class="n">index_label</span> <span class="o">=</span> <span class="n">index_label</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">index_label</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">insert_cascade</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span><span class="n">menu</span><span class="o">=</span><span class="n">menu</span><span class="p">,</span><span class="n">underline</span><span class="o">=</span><span class="n">amp_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span><span class="n">menu</span><span class="o">=</span><span class="n">menu</span><span class="p">,</span><span class="n">underline</span><span class="o">=</span><span class="n">amp_index</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">menu</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;exception creating&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="s">&quot;menu&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">None</span>
    <span class="c">#@+node:ekr.20031218072017.4116: *4* createOpenWithMenuFromTable &amp; helpers (leoMenu)</span></div>
<div class="viewcode-block" id="leoMenu.createOpenWithMenuFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createOpenWithMenuFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createOpenWithMenuFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;table is a lists of dicts:</span>

<span class="sd">        - d.get(&#39;command&#39;):  one of &quot;os.startfile&quot;, &quot;os.spawnl&quot;, &quot;os.spawnv&quot; or &quot;exec&quot;.</span>
<span class="sd">        - d.get(&#39;shortcut&#39;): the stroke (??)</span>
<span class="sd">        - d.get(&#39;name&#39;):     the menu label.</span>

<span class="sd">        Leo executes command(arg+path) where path is the full path to the temp file.</span>
<span class="sd">        If ext is not None, the temp file has the given extension.</span>
<span class="sd">        Otherwise, Leo computes an extension based on the @language directive in effect.</span>
<span class="sd">    &#39;&#39;&#39;</span>

        <span class="c"># trace = False and not g.unitTesting</span>
        <span class="n">c</span><span class="p">,</span><span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">k</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">table</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">openWithTable</span> <span class="o">=</span> <span class="n">table</span> <span class="c"># Override any previous table.</span>

        <span class="c"># Delete the previous entry.</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="s">&quot;File&quot;</span><span class="p">)</span>
        <span class="c"># if trace: g.trace(&#39;parent&#39;,parent)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">parent</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">batchMode</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="s">&#39;createOpenWithMenuFromTable:&#39;</span><span class="p">,</span><span class="s">&#39;no File menu&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="s">&quot;Open &amp;With...&quot;</span><span class="p">)</span>
        <span class="n">amp_index</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;Open With...&quot;</span><span class="p">)</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;unexpected exception&#39;</span><span class="p">)</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
                <span class="k">return</span>

        <span class="c"># Create the Open With menu.</span>
        <span class="n">openWithMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createOpenWithMenu</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">amp_index</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">openWithMenu</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;openWithMenu returns None&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="s">&quot;Open With...&quot;</span><span class="p">,</span><span class="n">openWithMenu</span><span class="p">)</span>

        <span class="c"># Create the menu items in of the Open With menu.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createOpenWithMenuItemsFromTable</span><span class="p">(</span><span class="n">openWithMenu</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">k</span><span class="o">.</span><span class="n">bindOpenWith</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20051022043608.1: *5* createOpenWithMenuItemsFromTable &amp; callback (leoMenu)</span></div>
<div class="viewcode-block" id="leoMenu.createOpenWithMenuItemsFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createOpenWithMenuItemsFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">createOpenWithMenuItemsFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>

        <span class="sd">&#39;&#39;&#39;Create an entry in the Open with Menu from the table.</span>

<span class="sd">        Each entry should be a sequence with 2 or 3 elements.&#39;&#39;&#39;</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="bp">False</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
        <span class="c"># if trace: g.trace(g.callers())</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTesting</span><span class="p">:</span> <span class="k">return</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;args&#39;</span><span class="p">,[])</span>
            <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
                <span class="k">print</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
                    <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%15s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)))</span>

            <span class="n">accel</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;shortcut&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">label</span> <span class="ow">and</span> <span class="n">args</span><span class="p">:</span>
                <span class="n">realLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
                <span class="n">underline</span><span class="o">=</span><span class="n">realLabel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
                <span class="n">realLabel</span> <span class="o">=</span> <span class="n">realLabel</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
                <span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defineOpenWithMenuCallback</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="n">c</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">realLabel</span><span class="p">,</span>
                    <span class="n">accelerator</span><span class="o">=</span><span class="n">accel</span><span class="p">,</span>
                    <span class="n">command</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
                    <span class="n">underline</span><span class="o">=</span><span class="n">underline</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.4118: *6* defineOpenWithMenuCallback (leoMenu)</span></div>
<div class="viewcode-block" id="leoMenu.defineOpenWithMenuCallback"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineOpenWithMenuCallback">[docs]</a>    <span class="k">def</span> <span class="nf">defineOpenWithMenuCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">):</span>

        <span class="c"># The first parameter must be event, and it must default to None.</span>
        <span class="k">def</span> <span class="nf">openWithMenuCallback</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="bp">self</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">openWith</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">openWithMenuCallback</span>
    <span class="c">#@+node:tbrown.20080509212202.7: *4* deleteRecentFilesMenuItems (leoMenu)</span></div>
<div class="viewcode-block" id="leoMenu.deleteRecentFilesMenuItems"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.deleteRecentFilesMenuItems">[docs]</a>    <span class="k">def</span> <span class="nf">deleteRecentFilesMenuItems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Delete recent file menu entries&quot;&quot;&quot;</span>

        <span class="n">rf</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">recentFilesManager</span>

        <span class="c"># Why not just delete all the entries?</span>
        <span class="n">recentFiles</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">getRecentFiles</span><span class="p">()</span>
        <span class="n">toDrop</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recentFiles</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">getRecentFilesTable</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_range</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">toDrop</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rf</span><span class="o">.</span><span class="n">groupedMenus</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">destroyMenu</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="c">#@+node:ekr.20031218072017.4117: *4* defineMenuCallback</span></div>
<div class="viewcode-block" id="leoMenu.defineMenuCallback"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.defineMenuCallback">[docs]</a>    <span class="k">def</span> <span class="nf">defineMenuCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">minibufferCommand</span><span class="p">):</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>

        <span class="k">if</span> <span class="n">minibufferCommand</span><span class="p">:</span>

            <span class="c"># Create a dummy event as a signal to doCommand.</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">create_key_event</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>

            <span class="c"># The first parameter must be event, and it must default to None.</span>
            <span class="k">def</span> <span class="nf">minibufferMenuCallback</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span><span class="bp">self</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
                <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">doCommand</span><span class="p">(</span><span class="n">command</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">event</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">minibufferMenuCallback</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="c"># The first parameter must be event, and it must default to None.</span>
            <span class="k">def</span> <span class="nf">legacyMenuCallback</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="bp">self</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="c"># 2012/03/04.</span>
                <span class="n">c</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">doCommand</span><span class="p">(</span><span class="n">command</span><span class="p">,</span><span class="n">label</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">legacyMenuCallback</span>
    <span class="c">#@+node:ekr.20031218072017.3805: *4* deleteMenu</span></div>
<div class="viewcode-block" id="leoMenu.deleteMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.deleteMenu">[docs]</a>    <span class="k">def</span> <span class="nf">deleteMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">destroyMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;can&#39;t delete menu:&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;exception deleting&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="s">&quot;menu&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3806: *4* deleteMenuItem</span></div>
<div class="viewcode-block" id="leoMenu.deleteMenuItem"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.deleteMenuItem">[docs]</a>    <span class="k">def</span> <span class="nf">deleteMenuItem</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">itemName</span><span class="p">,</span><span class="n">menuName</span><span class="o">=</span><span class="s">&quot;top&quot;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Delete itemName from the menu whose name is menuName.&quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu</span><span class="p">:</span>
                <span class="n">realItemName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getRealMenuName</span><span class="p">(</span><span class="n">itemName</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span><span class="n">realItemName</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;menu not found:&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;exception deleting&quot;</span><span class="p">,</span><span class="n">itemName</span><span class="p">,</span><span class="s">&quot;from&quot;</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="s">&quot;menu&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3782: *4* get/setRealMenuName &amp; setRealMenuNamesFromTable</span>
    <span class="c"># Returns the translation of a menu name or an item name.</span>
</div>
<div class="viewcode-block" id="leoMenu.getRealMenuName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getRealMenuName">[docs]</a>    <span class="k">def</span> <span class="nf">getRealMenuName</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">):</span>

        <span class="n">cmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonicalizeTranslatedMenuName</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">realMenuNameDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cmn</span><span class="p">,</span><span class="n">menuName</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoMenu.setRealMenuName"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.setRealMenuName">[docs]</a>    <span class="k">def</span> <span class="nf">setRealMenuName</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">untrans</span><span class="p">,</span><span class="n">trans</span><span class="p">):</span>

        <span class="n">cmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonicalizeTranslatedMenuName</span><span class="p">(</span><span class="n">untrans</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">realMenuNameDict</span><span class="p">[</span><span class="n">cmn</span><span class="p">]</span> <span class="o">=</span> <span class="n">trans</span>
</div>
<div class="viewcode-block" id="leoMenu.setRealMenuNamesFromTable"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.setRealMenuNamesFromTable">[docs]</a>    <span class="k">def</span> <span class="nf">setRealMenuNamesFromTable</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">untrans</span><span class="p">,</span><span class="n">trans</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setRealMenuName</span><span class="p">(</span><span class="n">untrans</span><span class="p">,</span><span class="n">trans</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es</span><span class="p">(</span><span class="s">&quot;exception in&quot;</span><span class="p">,</span><span class="s">&quot;setRealMenuNamesFromTable&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
    <span class="c">#@+node:ekr.20031218072017.3807: *4* getMenu, setMenu, destroyMenu</span></div>
<div class="viewcode-block" id="leoMenu.getMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getMenu">[docs]</a>    <span class="k">def</span> <span class="nf">getMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">):</span>

        <span class="n">cmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonicalizeMenuName</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
        <span class="c"># if cmn == &#39;openwith&#39;: g.trace(&#39;leoMenu&#39;,g.dictToString(self.menus))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">menus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cmn</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="leoMenu.setMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.setMenu">[docs]</a>    <span class="k">def</span> <span class="nf">setMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="n">menu</span><span class="p">):</span>

        <span class="n">cmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonicalizeMenuName</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menus</span> <span class="p">[</span><span class="n">cmn</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu</span>
</div>
<div class="viewcode-block" id="leoMenu.destroyMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.destroyMenu">[docs]</a>    <span class="k">def</span> <span class="nf">destroyMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">):</span>

        <span class="n">cmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonicalizeMenuName</span><span class="p">(</span><span class="n">menuName</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">menus</span><span class="p">[</span><span class="n">cmn</span><span class="p">]</span>
    <span class="c">#@+node:ekr.20031218072017.3808: *3* Must be overridden in menu subclasses</span>
    <span class="c">#@+node:ekr.20031218072017.3809: *4* 9 Routines with Tk spellings</span></div>
<div class="viewcode-block" id="leoMenu.add_cascade"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.add_cascade">[docs]</a>    <span class="k">def</span> <span class="nf">add_cascade</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">underline</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.add_command"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.add_command">[docs]</a>    <span class="k">def</span> <span class="nf">add_command</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.add_separator"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.add_separator">[docs]</a>    <span class="k">def</span> <span class="nf">add_separator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>

    <span class="c"># def bind (self,bind_shortcut,callback):</span>
    <span class="c">#     self.oops()</span>
</div>
<div class="viewcode-block" id="leoMenu.delete"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">realItemName</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.delete_range"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.delete_range">[docs]</a>    <span class="k">def</span> <span class="nf">delete_range</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.destroy"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.insert"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">,</span><span class="n">position</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">command</span><span class="p">,</span><span class="n">underline</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c"># New in Leo 4.4.3 a1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.insert_cascade"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.insert_cascade">[docs]</a>    <span class="k">def</span> <span class="nf">insert_cascade</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">underline</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.new_menu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.new_menu">[docs]</a>    <span class="k">def</span> <span class="nf">new_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span> <span class="c"># 2010: added label arg for pylint.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="bp">None</span>
    <span class="c">#@+node:ekr.20031218072017.3810: *4* 9 Routines with new spellings</span></div>
<div class="viewcode-block" id="leoMenu.activateMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.activateMenu">[docs]</a>    <span class="k">def</span> <span class="nf">activateMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menuName</span><span class="p">):</span> <span class="c"># New in Leo 4.4b2.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.clearAccel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.clearAccel">[docs]</a>    <span class="k">def</span> <span class="nf">clearAccel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.createMenuBar"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createMenuBar">[docs]</a>    <span class="k">def</span> <span class="nf">createMenuBar</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.createOpenWithMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.createOpenWithMenu">[docs]</a>    <span class="k">def</span> <span class="nf">createOpenWithMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">amp_index</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span> <span class="p">;</span> <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="leoMenu.disableMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.disableMenu">[docs]</a>    <span class="k">def</span> <span class="nf">disableMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.enableMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.enableMenu">[docs]</a>    <span class="k">def</span> <span class="nf">enableMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.getMacHelpMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getMacHelpMenu">[docs]</a>    <span class="k">def</span> <span class="nf">getMacHelpMenu</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">table</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="leoMenu.getMenuLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.getMenuLabel">[docs]</a>    <span class="k">def</span> <span class="nf">getMenuLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="leoMenu.setMenuLabel"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.leoMenu.setMenuLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setMenuLabel</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">menu</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">label</span><span class="p">,</span><span class="n">underline</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oops</span><span class="p">()</span>
    <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20031218072017.3811: ** class nullMenu</span></div></div>
<div class="viewcode-block" id="nullMenu"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.nullMenu">[docs]</a><span class="k">class</span> <span class="nc">nullMenu</span><span class="p">(</span><span class="n">leoMenu</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;A null menu class for testing and batch execution.&quot;&quot;&quot;</span>

    <span class="c">#@+others</span>
    <span class="c">#@+node:ekr.20050104094308: *3* ctor (nullMenu)</span>
    <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>

        <span class="c"># Init the base class.</span>
        <span class="n">leoMenu</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isNull</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c">#@+node:ekr.20050104094029: *3* oops</span>
<div class="viewcode-block" id="nullMenu.oops"><a class="viewcode-back" href="../../../leo.core.html#leo.core.leoMenu.nullMenu.oops">[docs]</a>    <span class="k">def</span> <span class="nf">oops</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># g.trace(&quot;leoMenu&quot;, g.callers())</span>
        <span class="k">pass</span>
    <span class="c">#@-others</span>
<span class="c">#@-others</span>
<span class="c">#@-leo</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ed K. Ream.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>