<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>leo.plugins.cursesGui &mdash; Leo API 4.11dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.11dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Leo API 4.11dev documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for leo.plugins.cursesGui</h1><div class="highlight"><pre>
<span class="c">#@+leo-ver=5-thin</span>
<span class="c">#@+node:ekr.20081121105001.12: * @file cursesGui.py</span>
<span class="c">#@+at</span>
<span class="c"># Things not found in the GUI &#39;interface&#39; classes (in leoFrame.py, leoGui.py, etc)</span>
<span class="c"># are labeled: # undoc: where the AttributeError comes from other implementations</span>
<span class="c"># of method.</span>
<span class="c">#@@c</span>

<span class="c">#@+&lt;&lt; imports &gt;&gt;</span>
<span class="c">#@+node:ekr.20081121105001.13: ** &lt;&lt; imports &gt;&gt;</span>
<span class="kn">import</span> <span class="nn">leo.core.leoGlobals</span> <span class="kn">as</span> <span class="nn">g</span>

<span class="kn">import</span> <span class="nn">leo.core.leoChapters</span> <span class="kn">as</span> <span class="nn">leoChapters</span>
<span class="kn">import</span> <span class="nn">leo.core.leoColor</span> <span class="kn">as</span> <span class="nn">leoColor</span>
<span class="kn">import</span> <span class="nn">leo.core.leoGui</span> <span class="kn">as</span> <span class="nn">leoGui</span>
<span class="kn">import</span> <span class="nn">leo.core.leoKeys</span> <span class="kn">as</span> <span class="nn">leoKeys</span>
<span class="kn">import</span> <span class="nn">leo.core.leoFrame</span> <span class="kn">as</span> <span class="nn">leoFrame</span>
<span class="kn">import</span> <span class="nn">leo.core.leoMenu</span> <span class="kn">as</span> <span class="nn">leoMenu</span>
<span class="kn">import</span> <span class="nn">leo.core.leoNodes</span> <span class="kn">as</span> <span class="nn">leoNodes</span>
<span class="c">#@-&lt;&lt; imports &gt;&gt;</span>
<span class="c">#@+&lt;&lt; TODO &gt;&gt;</span>
<span class="c">#@+node:ekr.20081121105001.14: ** &lt;&lt; TODO &gt;&gt;</span>
<span class="c">#@+at</span>
<span class="c"># Body text:</span>
<span class="c"># Is the &quot;signature&quot; of the typing event right?</span>
<span class="c"># What does the InsertPoint do when text is inserted and deleted?</span>
<span class="c"># What does the SelectionRange do, period?</span>
<span class="c"># What about mouse input? What does createBindings() do?</span>
<span class="c"># What does set_focus() do?</span>
<span class="c"># What does the GUI need to do for Leo&#39;s undo features?</span>
<span class="c"># What about that minibuffer thing? (I&#39;ve never used it.)</span>
<span class="c"># When should runMainLoop return?</span>
<span class="c"># What kind of newlines does the body text control get? How should it treat them?</span>
<span class="c"># Headline editing?</span>
<span class="c"># Body text selection.</span>
<span class="c"># (Strip trailing whitespace from this file. :P)</span>
<span class="c"># &lt; &lt; Random cruft &gt;&gt;</span>
<span class="c"># Pay attention to being direct and code-terse.</span>
<span class="c"># Not at all user-friendly.</span>
<span class="c"># Comments in the body reflect current status only.</span>
<span class="c"># Ideally, comments in the body go away as the &quot;leoGUI interface&quot; improves.</span>
<span class="c"># Written on a hundred-column terminal. :S</span>
<span class="c">#@-&lt;&lt; TODO &gt;&gt;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;0.2&#39;</span>
<span class="c">#@+&lt;&lt; version history &gt;&gt;</span>
<span class="c">#@+node:ekr.20081121105001.15: ** &lt;&lt; version history &gt;&gt;</span>
<span class="c">#@@nocolor</span>
<span class="c">#@+at</span>
<span class="c"># </span>
<span class="c"># 0.1: Initial checkin, converted to Leo outline(!) by EKR.</span>
<span class="c"># 0.2: EKR:</span>
<span class="c"># - Fixed several crashers related to Leo 4.x code base.</span>
<span class="c"># - textBodyCtrl is now just leoFrame.stringTextWidget.</span>
<span class="c"># - Improved main input loop.</span>
<span class="c"># - You can now enter menu accelerators instead of menu indices in the menu menu.</span>
<span class="c">#@-&lt;&lt; version history &gt;&gt;</span>

<span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">isPython3</span><span class="p">:</span> <span class="n">get_input</span> <span class="o">=</span> <span class="nb">input</span>
<span class="k">else</span><span class="p">:</span>           <span class="n">get_input</span> <span class="o">=</span> <span class="nb">raw_input</span>

<span class="c">#@@language python</span>
<span class="c">#@@tabwidth -2</span>

<span class="c">#@+others</span>
<span class="c">#@+node:ekr.20081121105001.16: ** init</span>
<div class="viewcode-block" id="init"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.init">[docs]</a><span class="k">def</span> <span class="nf">init</span> <span class="p">():</span>

    <span class="n">ok</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTesting</span> <span class="c"># Not Ok for unit testing!</span>

    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span> <span class="o">=</span> <span class="n">textGui</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">createRootWindow</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">finishCreate</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">plugin_signon</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">gui</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">unitTesting</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Can&#39;t install text gui: previous gui installed&quot;</span>
        <span class="n">g</span><span class="o">.</span><span class="n">es_print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ok</span>
<span class="c">#@+node:ekr.20081121105001.17: ** underline</span></div>
<div class="viewcode-block" id="underline"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.underline">[docs]</a><span class="k">def</span> <span class="nf">underline</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>

  <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">s</span>

  <span class="k">return</span> <span class="n">s</span><span class="p">[:</span><span class="n">idx</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">idx</span><span class="p">:]</span>
<span class="c">#@+node:ekr.20081121105001.18: ** class textGui</span></div>
<div class="viewcode-block" id="textGui"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui">[docs]</a><span class="k">class</span> <span class="nc">textGui</span><span class="p">(</span><span class="n">leoGui</span><span class="o">.</span><span class="n">leoGui</span><span class="p">):</span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.19: *3* __init__</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">leoGui</span><span class="o">.</span><span class="n">leoGui</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;text&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">killed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c"># TODO leoTkinterFrame finishCreate g.app.windowList.append(f) - use that?</span>
  <span class="c">#@+node:ekr.20081121105001.20: *3* createKeyHandlerClass</span>
<div class="viewcode-block" id="textGui.createKeyHandlerClass"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.createKeyHandlerClass">[docs]</a>  <span class="k">def</span> <span class="nf">createKeyHandlerClass</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">useGlobalKillbuffer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">useGlobalRegisters</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

      <span class="c"># import leo.core.leoKeys as leoKeys # Do this here to break a circular dependency.</span>

      <span class="k">return</span> <span class="n">leoKeys</span><span class="o">.</span><span class="n">keyHandlerClass</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">useGlobalKillbuffer</span><span class="p">,</span><span class="n">useGlobalRegisters</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.21: *3* createLeoFrame</span></div>
<div class="viewcode-block" id="textGui.createLeoFrame"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.createLeoFrame">[docs]</a>  <span class="k">def</span> <span class="nf">createLeoFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">textFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
  <span class="c">#@+node:ekr.20081121105001.22: *3* createRootWindow</span></div>
<div class="viewcode-block" id="textGui.createRootWindow"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.createRootWindow">[docs]</a>  <span class="k">def</span> <span class="nf">createRootWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># N/A</span>

  <span class="c">#@+node:ekr.20081121105001.23: *3* destroySelf</span></div>
<div class="viewcode-block" id="textGui.destroySelf"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.destroySelf">[docs]</a>  <span class="k">def</span> <span class="nf">destroySelf</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">killed</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="c">#@+node:ekr.20081121105001.24: *3* finishCreate</span></div>
<div class="viewcode-block" id="textGui.finishCreate"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.finishCreate">[docs]</a>  <span class="k">def</span> <span class="nf">finishCreate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.25: *3* isTextWidget</span></div>
<div class="viewcode-block" id="textGui.isTextWidget"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.isTextWidget">[docs]</a>  <span class="k">def</span> <span class="nf">isTextWidget</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>

      <span class="sd">&#39;&#39;&#39;Return True if w is a Text widget suitable for text-oriented commands.&#39;&#39;&#39;</span>

      <span class="k">return</span> <span class="n">w</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">baseTextWidget</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.26: *3* oops</span></div>
<div class="viewcode-block" id="textGui.oops"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.oops">[docs]</a>  <span class="k">def</span> <span class="nf">oops</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot;textGui oops&quot;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(),</span> <span class="s">&quot;should be implemented&quot;</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.27: *3* runMainLoop</span></div>
<div class="viewcode-block" id="textGui.runMainLoop"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.runMainLoop">[docs]</a>  <span class="k">def</span> <span class="nf">runMainLoop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text_run</span><span class="p">()</span>
  <span class="c">#@+node:ekr.20081121105001.28: *3* runOpenFileDialog</span></div>
<div class="viewcode-block" id="textGui.runOpenFileDialog"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.runOpenFileDialog">[docs]</a>  <span class="k">def</span> <span class="nf">runOpenFileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">filetypes</span><span class="p">,</span> <span class="n">defaultextension</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">os</span>

    <span class="n">initialdir</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">globalOpenDir</span> <span class="ow">or</span> <span class="n">g</span><span class="o">.</span><span class="n">os_path_abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">isPython3</span><span class="p">:</span> <span class="n">get_input</span> <span class="o">=</span> <span class="nb">input</span>
    <span class="k">else</span><span class="p">:</span>           <span class="n">get_input</span> <span class="o">=</span> <span class="nb">raw_input</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">get_input</span><span class="p">(</span><span class="s">&quot;Open which </span><span class="si">%s</span><span class="s"> file (from </span><span class="si">%s</span><span class="s">?) &gt; &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">filetypes</span><span class="p">),</span> <span class="n">initialdir</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">multiple</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">[</span><span class="n">ret</span><span class="p">,]</span>
    <span class="k">return</span> <span class="n">ret</span>
  <span class="c">#@+node:ekr.20081121105001.29: *3* get/set_focus</span></div>
<div class="viewcode-block" id="textGui.get_focus"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.get_focus">[docs]</a>  <span class="k">def</span> <span class="nf">get_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="textGui.set_focus"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.set_focus">[docs]</a>  <span class="k">def</span> <span class="nf">set_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">w</span><span class="p">):</span>
    <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.30: *3* text_run &amp; helper</span></div>
<div class="viewcode-block" id="textGui.text_run"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.text_run">[docs]</a>  <span class="k">def</span> <span class="nf">text_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">frame_idx</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">isPython3</span><span class="p">:</span> <span class="n">get_input</span> <span class="o">=</span> <span class="nb">input</span>
    <span class="k">else</span><span class="p">:</span>           <span class="n">get_input</span> <span class="o">=</span> <span class="nb">raw_input</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">killed</span><span class="p">:</span>

      <span class="c"># Frames can come and go.</span>
      <span class="k">if</span> <span class="n">frame_idx</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">frame_idx</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">frame_idx</span><span class="p">]</span>
      <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getTitle</span><span class="p">())</span>


      <span class="n">s</span> <span class="o">=</span> <span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Do what? (menu,key,body,frames,tree,quit) &gt; &#39;</span><span class="p">)</span>

      <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doChoice</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
          <span class="n">g</span><span class="o">.</span><span class="n">es_exception</span><span class="p">()</span>
  <span class="c">#@+node:ekr.20081121105001.31: *4* doChoice</span></div>
<div class="viewcode-block" id="textGui.doChoice"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.doChoice">[docs]</a>  <span class="k">def</span> <span class="nf">doChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span><span class="s">&#39;menu&#39;</span><span class="p">):</span>
      <span class="n">f</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">show_menu</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="s">&#39;key&#39;</span><span class="p">):</span>
      <span class="n">f</span><span class="o">.</span><span class="n">text_key</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;body&#39;</span><span class="p">):</span>
      <span class="n">f</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">text_show</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;frames&#39;</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&#39;)&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">getTitle</span><span class="p">())</span>
      <span class="n">s</span> <span class="o">=</span> <span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Operate on which frame? &gt; &#39;</span><span class="p">)</span>
      <span class="k">try</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
      <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">frame_idx</span> <span class="o">=</span> <span class="n">s</span>
    <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">,</span><span class="s">&#39;tree&#39;</span><span class="p">):</span>
      <span class="n">f</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">text_draw_tree</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span><span class="s">&#39;quit&#39;</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">killed</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="c">#@+node:ekr.20081121105001.32: *3* widget_name</span></div>
<div class="viewcode-block" id="textGui.widget_name"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textGui.widget_name">[docs]</a>  <span class="k">def</span> <span class="nf">widget_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">textBodyCtrl</span><span class="p">):</span>
      <span class="k">return</span> <span class="s">&#39;body&#39;</span>
    <span class="k">return</span> <span class="n">leoGui</span><span class="o">.</span><span class="n">leoGui</span><span class="o">.</span><span class="n">widget_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.33: ** class textFrame</span></div></div>
<div class="viewcode-block" id="textFrame"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame">[docs]</a><span class="k">class</span> <span class="nc">textFrame</span><span class="p">(</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">leoFrame</span><span class="p">):</span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.34: *3* __init__</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gui</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>

    <span class="n">leoFrame</span><span class="o">.</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gui</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span> <span class="c"># Per leoFrame.__init__</span>
  <span class="c">#@+node:ekr.20081121105001.35: *3* createFirstTreeNode</span>
  <span class="c"># From leoTkinterFrame.py</span>
<div class="viewcode-block" id="textFrame.createFirstTreeNode"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.createFirstTreeNode">[docs]</a>  <span class="k">def</span> <span class="nf">createFirstTreeNode</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span>

    <span class="n">v</span> <span class="o">=</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">vnode</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">leoNodes</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="n">v</span><span class="o">.</span><span class="n">initHeadString</span><span class="p">(</span><span class="s">&quot;NewHeadline&quot;</span><span class="p">)</span>
    <span class="c"># New in Leo 4.5: p.moveToRoot would be wrong: the node hasn&#39;t been linked yet.</span>
    <span class="n">p</span><span class="o">.</span><span class="n">_linkAsRoot</span><span class="p">(</span><span class="n">oldRoot</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="c"># c.setRootPosition(p) # New in 4.4.2.</span>
    <span class="n">c</span><span class="o">.</span><span class="n">editPosition</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.36: *3* deiconify</span></div>
<div class="viewcode-block" id="textFrame.deiconify"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.deiconify">[docs]</a>  <span class="k">def</span> <span class="nf">deiconify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span></div>
<div class="viewcode-block" id="textFrame.lift"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.lift">[docs]</a>  <span class="k">def</span> <span class="nf">lift</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span>
  <span class="c">#@+node:ekr.20081121105001.37: *3* destroySelf</span></div>
<div class="viewcode-block" id="textFrame.destroySelf"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.destroySelf">[docs]</a>  <span class="k">def</span> <span class="nf">destroySelf</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.38: *3* finishCreate</span></div>
<div class="viewcode-block" id="textFrame.finishCreate"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.finishCreate">[docs]</a>  <span class="k">def</span> <span class="nf">finishCreate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span> <span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>

    <span class="n">f</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">textTree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">textBody</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentFrame</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>    
    <span class="n">f</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">textLog</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentFrame</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="n">textLeoMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">use_chapters</span><span class="p">:</span>
      <span class="n">c</span><span class="o">.</span><span class="n">chapterController</span> <span class="o">=</span> <span class="n">leoChapters</span><span class="o">.</span><span class="n">chapterController</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">createFirstTreeNode</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">initVersion</span><span class="p">()</span>

    <span class="c"># (*after* setting self.log)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setLog</span><span class="p">()</span> <span class="c"># writeWaitingLog hangs without this(!)</span>

    <span class="c"># So updateRecentFiles will update our menus.</span>
    <span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">windowList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.39: *3* setInitialWindowGeometry</span></div>
<div class="viewcode-block" id="textFrame.setInitialWindowGeometry"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.setInitialWindowGeometry">[docs]</a>  <span class="k">def</span> <span class="nf">setInitialWindowGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span>
  <span class="c">#@+node:ekr.20081121105001.40: *3* setMinibufferBindings</span></div>
<div class="viewcode-block" id="textFrame.setMinibufferBindings"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.setMinibufferBindings">[docs]</a>  <span class="k">def</span> <span class="nf">setMinibufferBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="textFrame.setTopGeometry"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.setTopGeometry">[docs]</a>  <span class="k">def</span> <span class="nf">setTopGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># N/A</span>
  <span class="c">#@+node:ekr.20081121105001.41: *3* text_key</span></div>
<div class="viewcode-block" id="textFrame.text_key"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.text_key">[docs]</a>  <span class="k">def</span> <span class="nf">text_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">k</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span> <span class="p">;</span> <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>

    <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">isPython3</span><span class="p">:</span> <span class="n">get_input</span> <span class="o">=</span> <span class="nb">input</span>
    <span class="k">else</span><span class="p">:</span>           <span class="n">get_input</span> <span class="o">=</span> <span class="nb">raw_input</span>

    <span class="n">key</span> <span class="o">=</span> <span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Keystroke &gt; &#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span> <span class="k">return</span>

    <span class="k">class</span> <span class="nc">leoTypingEvent</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">char</span><span class="p">,</span><span class="n">keysym</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">char</span> <span class="o">=</span> <span class="n">char</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">keysym</span> <span class="o">=</span> <span class="n">keysym</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leoWidget</span> <span class="o">=</span> <span class="n">w</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">w</span>

    <span class="c"># Leo uses widget_name(event.widget) to decide if a &#39;default&#39; keystroke belongs</span>
    <span class="c"># to typing in the body text, in the tree control, or whereever. </span>

    <span class="c"># Canonicalize the setting.</span>
    <span class="n">char</span> <span class="o">=</span> <span class="n">key</span>
    <span class="n">stroke</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">k</span><span class="o">.</span><span class="n">shortcutFromSetting</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s">&#39;char&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">char</span><span class="p">),</span><span class="s">&#39;stroke&#39;</span><span class="p">,</span><span class="nb">repr</span><span class="p">(</span><span class="n">stroke</span><span class="p">))</span>

    <span class="n">e</span> <span class="o">=</span> <span class="n">leoTypingEvent</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">char</span><span class="p">,</span><span class="n">stroke</span><span class="p">)</span>
    <span class="n">k</span><span class="o">.</span><span class="n">masterKeyHandler</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">e</span><span class="p">)</span> <span class="c">## ,stroke=key)</span>
  <span class="c">#@+node:ekr.20081121105001.42: *3* update</span></div>
<div class="viewcode-block" id="textFrame.update"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.update">[docs]</a>  <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="textFrame.resizePanesToRatio"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textFrame.resizePanesToRatio">[docs]</a>  <span class="k">def</span> <span class="nf">resizePanesToRatio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">ratio2</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.43: ** class textBody</span></div></div>
<div class="viewcode-block" id="textBody"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBody">[docs]</a><span class="k">class</span> <span class="nc">textBody</span><span class="p">(</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">leoBody</span><span class="p">):</span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.44: *3* __init__</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">parentFrame</span><span class="p">):</span>
    <span class="n">leoFrame</span><span class="o">.</span><span class="n">leoBody</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">parentFrame</span><span class="p">)</span>

    <span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;body&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span> <span class="o">=</span> <span class="n">textBodyCtrl</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">colorizer</span> <span class="o">=</span> <span class="n">leoColor</span><span class="o">.</span><span class="n">nullColorizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.45: *3* bind</span>
  <span class="c"># undoc: newLeoCommanderAndFrame -&gt; c.finishCreate -&gt; k.finishCreate -&gt; k.completeAllBindings -&gt; k.makeMasterGuiBinding -&gt; 2156 w.bind ; nullBody </span>
<div class="viewcode-block" id="textBody.bind"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBody.bind">[docs]</a>  <span class="k">def</span> <span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bindStroke</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span> 
    <span class="c"># Quiet, please.    </span>
    <span class="c">##self.oops()</span>
    <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.46: *3* setEditorColors</span>
  <span class="c"># TODO Tkinter onBodyChanged undo call and many others. =(</span>
</div>
<div class="viewcode-block" id="textBody.setEditorColors"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBody.setEditorColors">[docs]</a>  <span class="k">def</span> <span class="nf">setEditorColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">fg</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span></div>
<div class="viewcode-block" id="textBody.createBindings"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBody.createBindings">[docs]</a>  <span class="k">def</span> <span class="nf">createBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.47: *3* text_show</span></div>
<div class="viewcode-block" id="textBody.text_show"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBody.text_show">[docs]</a>  <span class="k">def</span> <span class="nf">text_show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bodyCtrl</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;--- body ---&#39;</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;ins&#39;</span><span class="p">,</span><span class="n">w</span><span class="o">.</span><span class="n">ins</span><span class="p">,</span><span class="s">&#39;sel&#39;</span><span class="p">,</span><span class="n">w</span><span class="o">.</span><span class="n">sel</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.48: ** class textBodyCtrl (stringTextWidget)</span></div></div>
<div class="viewcode-block" id="textBodyCtrl"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textBodyCtrl">[docs]</a><span class="k">class</span> <span class="nc">textBodyCtrl</span> <span class="p">(</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">stringTextWidget</span><span class="p">):</span>
  <span class="k">pass</span>
<span class="c">#@+node:ekr.20081121105001.49: ** class textMenuCascade</span></div>
<div class="viewcode-block" id="textMenuCascade"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuCascade">[docs]</a><span class="k">class</span> <span class="nc">textMenuCascade</span><span class="p">:</span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.50: *3* __init__</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">underline</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="n">menu</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">underline</span> <span class="o">=</span> <span class="n">underline</span>
  <span class="c">#@+node:ekr.20081121105001.51: *3* display</span>
<div class="viewcode-block" id="textMenuCascade.display"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuCascade.display">[docs]</a>  <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      
    <span class="n">ret</span> <span class="o">=</span> <span class="n">underline</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">underline</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">ret</span> <span class="o">+=</span> <span class="s">&#39; [Submenu with no entries]&#39;</span>
    <span class="k">return</span> <span class="n">ret</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.52: ** class textMenuEntry</span></div></div>
<div class="viewcode-block" id="textMenuEntry"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuEntry">[docs]</a><span class="k">class</span> <span class="nc">textMenuEntry</span><span class="p">:</span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.53: *3* __init__</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">underline</span><span class="p">,</span> <span class="n">accel</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">underline</span> <span class="o">=</span> <span class="n">underline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">accel</span> <span class="o">=</span> <span class="n">accel</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">callback</span>
  <span class="c">#@+node:ekr.20081121105001.54: *3* display</span>
<div class="viewcode-block" id="textMenuEntry.display"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuEntry.display">[docs]</a>  <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">underline</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">underline</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">accel</span><span class="p">,)</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.55: ** class textMenuSep</span></div></div>
<div class="viewcode-block" id="textMenuSep"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuSep">[docs]</a><span class="k">class</span> <span class="nc">textMenuSep</span><span class="p">:</span>  
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.56: *3* display</span>
<div class="viewcode-block" id="textMenuSep.display"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textMenuSep.display">[docs]</a>  <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="k">return</span> <span class="s">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">5</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.57: ** class textLeoMenu (leoMenu)</span></div></div>
<div class="viewcode-block" id="textLeoMenu"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu">[docs]</a><span class="k">class</span> <span class="nc">textLeoMenu</span><span class="p">(</span><span class="n">leoMenu</span><span class="o">.</span><span class="n">leoMenu</span><span class="p">):</span>

  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.58: *3* ctor (textLeoMenu)</span>
  <span class="k">def</span> <span class="nf">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">):</span>


      <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">c</span>

      <span class="c"># Init the base class</span>
      <span class="n">leoMenu</span><span class="o">.</span><span class="n">leoMenu</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">frame</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.59: *3* createMenuBar</span>
<div class="viewcode-block" id="textLeoMenu.createMenuBar"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.createMenuBar">[docs]</a>  <span class="k">def</span> <span class="nf">createMenuBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>

    <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_top_menu</span> <span class="o">=</span> <span class="n">textLeoMenu</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">createMenusFromTables</span><span class="p">()</span>
  <span class="c">#@+node:ekr.20081121105001.60: *3* new_menu</span></div>
<div class="viewcode-block" id="textLeoMenu.new_menu"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.new_menu">[docs]</a>  <span class="k">def</span> <span class="nf">new_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">tearoff</span> <span class="o">!=</span> <span class="bp">False</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">tearoff</span><span class="p">))</span>

    <span class="c"># I don&#39;t know what the &#39;parent&#39; argument is for; neither does the wx GUI.</span>

    <span class="c">### return textMenu()</span>
    <span class="n">menu</span> <span class="o">=</span> <span class="n">textLeoMenu</span><span class="p">(</span><span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">menu</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">menu</span>
  <span class="c">#@+node:ekr.20081121105001.61: *3* add_cascade</span></div>
<div class="viewcode-block" id="textLeoMenu.add_cascade"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.add_cascade">[docs]</a>  <span class="k">def</span> <span class="nf">add_cascade</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">underline</span><span class="p">):</span>

    <span class="c"># g.trace(&#39;parent&#39;,parent)</span>

    <span class="k">if</span> <span class="n">parent</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top_menu</span>
    <span class="n">parent</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">textMenuCascade</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">underline</span><span class="p">,))</span>
  <span class="c">#@+node:ekr.20081121105001.62: *3* add_command</span>
  <span class="c">### def add_command(self, menu, label, underline, command, accelerator=&#39;&#39;):</span>
</div>
<div class="viewcode-block" id="textLeoMenu.add_command"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.add_command">[docs]</a>  <span class="k">def</span> <span class="nf">add_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
    <span class="c"># ?</span>
    <span class="c"># underline - Offset into label. For those who memorised Alt, F, X rather than Alt+F4.</span>
    <span class="c"># accelerator - For display only; these are implemented by Leo&#39;s key handling.</span>

    <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="c"># g.trace(keys)</span>

    <span class="k">def</span> <span class="nf">doNothingCallback</span><span class="p">():</span>
      <span class="k">pass</span>

    <span class="n">label</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;label&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;no label&#39;</span>
    <span class="n">underline</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;underline&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
    <span class="n">accelerator</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;accelerator&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;command&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">doNothingCallback</span>


    <span class="n">entry</span> <span class="o">=</span> <span class="n">textMenuEntry</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">underline</span><span class="p">,</span> <span class="n">accelerator</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>
    <span class="n">menu</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.63: *3* add_separator</span></div>
<div class="viewcode-block" id="textLeoMenu.add_separator"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.add_separator">[docs]</a>  <span class="k">def</span> <span class="nf">add_separator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu</span><span class="p">):</span>
    <span class="n">menu</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">textMenuSep</span><span class="p">())</span>
  <span class="c">#@+node:ekr.20081121105001.64: *3* delete_range</span></div>
<div class="viewcode-block" id="textLeoMenu.delete_range"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.delete_range">[docs]</a>  <span class="k">def</span> <span class="nf">delete_range</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>

    <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.65: *3* show_menu</span></div>
<div class="viewcode-block" id="textLeoMenu.show_menu"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLeoMenu.show_menu">[docs]</a>  <span class="k">def</span> <span class="nf">show_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">last_menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top_menu</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
      <span class="n">entries</span> <span class="o">=</span> <span class="n">last_menu</span><span class="o">.</span><span class="n">entries</span>

      <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
        <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&#39;)&#39;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">display</span><span class="p">())</span>
      <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">last_menu</span><span class="o">.</span><span class="n">entries</span><span class="p">),</span> <span class="s">&#39;)&#39;</span><span class="p">,</span> <span class="s">&#39;[Prev]&#39;</span><span class="p">)</span>

      <span class="n">which</span> <span class="o">=</span> <span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Which menu entry? &gt; &#39;</span><span class="p">)</span>
      <span class="n">which</span> <span class="o">=</span> <span class="n">which</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>      
      <span class="k">if</span> <span class="ow">not</span> <span class="n">which</span><span class="p">:</span> <span class="k">continue</span>

      <span class="k">try</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">which</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="c"># Look for accelerator character.</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">which</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">z</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
          <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="s">&#39;underline&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ch</span> <span class="o">==</span> <span class="n">z</span><span class="o">.</span><span class="n">label</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">underline</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
              <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">continue</span>

      <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
        <span class="k">return</span>
      <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">continue</span>

      <span class="n">menu</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">textMenuEntry</span><span class="p">):</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">callback</span><span class="p">()</span>
        <span class="k">return</span>
      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">textMenuCascade</span><span class="p">):</span>
        <span class="n">last_menu</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">menu</span>
      <span class="k">else</span><span class="p">:</span>        
        <span class="k">pass</span>
  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.66: ** class textLog</span></div></div>
<div class="viewcode-block" id="textLog"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog">[docs]</a><span class="k">class</span> <span class="nc">textLog</span><span class="p">(</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">leoLog</span><span class="p">):</span>
	<span class="c"># undoc: leoKeys.py makeAllBindings c.frame.log.setTabBindings(&#39;Log&#39;) ; nullLog </span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.67: *3* setTabBindings</span>
<div class="viewcode-block" id="textLog.setTabBindings"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.setTabBindings">[docs]</a>  <span class="k">def</span> <span class="nf">setTabBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tabName</span><span class="p">):</span>
    <span class="k">pass</span>  
  <span class="c">#@+node:ekr.20081121105001.68: *3* put</span></div>
<div class="viewcode-block" id="textLog.put"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.put">[docs]</a>  <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tabName</span><span class="o">=</span><span class="s">&#39;log&#39;</span><span class="p">):</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">newline</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.69: *3* putnl</span></div>
<div class="viewcode-block" id="textLog.putnl"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.putnl">[docs]</a>  <span class="k">def</span> <span class="nf">putnl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tabName</span><span class="o">=</span><span class="s">&#39;log&#39;</span><span class="p">):</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.70: *3* createControl</span>
  <span class="c"># &lt; &lt; HACK Quiet, oops. &gt;&gt;</span></div>
<div class="viewcode-block" id="textLog.createControl"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.createControl">[docs]</a>  <span class="k">def</span> <span class="nf">createControl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentFrame</span><span class="p">):</span> <span class="k">pass</span></div>
<div class="viewcode-block" id="textLog.setFontFromConfig"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.setFontFromConfig">[docs]</a>  <span class="k">def</span> <span class="nf">setFontFromConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span> <span class="c"># N/A</span>
  <span class="c">#@+node:ekr.20081121105001.71: *3* setColorFromConfig</span></div>
<div class="viewcode-block" id="textLog.setColorFromConfig"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textLog.setColorFromConfig">[docs]</a>  <span class="k">def</span> <span class="nf">setColorFromConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>

  <span class="c">#@-others</span>
<span class="c">#@+node:ekr.20081121105001.72: ** class textTree</span></div></div>
<div class="viewcode-block" id="textTree"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree">[docs]</a><span class="k">class</span> <span class="nc">textTree</span><span class="p">(</span><span class="n">leoFrame</span><span class="o">.</span><span class="n">leoTree</span><span class="p">):</span>
	<span class="c"># undoc: k.makeAllBindings ; nullTree </span>
  <span class="c">#@+others</span>
  <span class="c">#@+node:ekr.20081121105001.73: *3* setBindings</span>
<div class="viewcode-block" id="textTree.setBindings"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.setBindings">[docs]</a>  <span class="k">def</span> <span class="nf">setBindings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
  <span class="c">#@+node:ekr.20081121105001.74: *3* begin/endUpdate &amp; redraw/now</span></div>
<div class="viewcode-block" id="textTree.beginUpdate"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.beginUpdate">[docs]</a>  <span class="k">def</span> <span class="nf">beginUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># N/A</span>
</div>
<div class="viewcode-block" id="textTree.endUpdate"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.endUpdate">[docs]</a>  <span class="k">def</span> <span class="nf">endUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">flag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="textTree.redraw"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.redraw">[docs]</a>  <span class="k">def</span> <span class="nf">redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text_draw_tree</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="textTree.redraw_now"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.redraw_now">[docs]</a>  <span class="k">def</span> <span class="nf">redraw_now</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">forceDraw</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">forceDraw</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
  <span class="c">#@+node:ekr.20081121105001.75: *3* endUpdate</span>
  <span class="c">#@+node:ekr.20081121105001.76: *3* __init__</span></div>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
    <span class="c"># undoc: openWithFileName -&gt; treeWantsFocus -&gt; c.frame.tree.canvas</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">leoFrame</span><span class="o">.</span><span class="n">leoTree</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
  <span class="c">#@+node:ekr.20081121105001.77: *3* select</span>
<div class="viewcode-block" id="textTree.select"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.select">[docs]</a>  <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">scroll</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="c"># TODO Much more here: there&#39;s four hooks and all sorts of other things called in the TK version. </span>

    <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="p">;</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">w</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">bodyCtrl</span>

    <span class="n">c</span><span class="o">.</span><span class="n">setCurrentPosition</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

    <span class="c"># This is also where the body-text control is given the text of the selected node...</span>
    <span class="c"># Always do this.  Otherwise there can be problems with trailing hewlines.</span>
    <span class="n">w</span><span class="o">.</span><span class="n">setAllText</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
    <span class="c"># and something to do with undo?</span>
  <span class="c">#@+node:ekr.20081121105001.78: *3* editLabel &amp; edit_widget</span></div>
<div class="viewcode-block" id="textTree.editLabel"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.editLabel">[docs]</a>  <span class="k">def</span> <span class="nf">editLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">selectAll</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c"># N/A?</span>
</div>
<div class="viewcode-block" id="textTree.edit_widget"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.edit_widget">[docs]</a>  <span class="k">def</span> <span class="nf">edit_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">None</span>
  <span class="c">#@+node:ekr.20081121105001.79: *3* text_draw_tree &amp; helper</span></div>
<div class="viewcode-block" id="textTree.text_draw_tree"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.text_draw_tree">[docs]</a>  <span class="k">def</span> <span class="nf">text_draw_tree</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="c"># g.trace(g.callers())</span>
    <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&#39;--- tree ---&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">draw_tree_helper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">rootPosition</span><span class="p">(),</span><span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="textTree.draw_tree_helper"><a class="viewcode-back" href="../../../leo.plugins.html#leo.plugins.cursesGui.textTree.draw_tree_helper">[docs]</a>  <span class="k">def</span> <span class="nf">draw_tree_helper</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">indent</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">self_and_siblings</span><span class="p">():</span>

      <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">():</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">(),</span><span class="s">&#39;+&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">box</span> <span class="o">=</span> <span class="s">&#39; &#39;</span>

      <span class="n">icons</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s%s%s%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="n">hasBody</span><span class="p">(),</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">),</span>
        <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">isMarked</span><span class="p">(),</span><span class="s">&#39;m&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">),</span>
        <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">isCloned</span><span class="p">(),</span><span class="s">&#39;@&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">),</span>
        <span class="n">g</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">isDirty</span><span class="p">(),</span><span class="s">&#39;*&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">))</span>

      <span class="n">g</span><span class="o">.</span><span class="n">pr</span><span class="p">(</span><span class="s">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">icons</span><span class="p">,</span> <span class="n">box</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isExpanded</span><span class="p">()</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">hasChildren</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_tree_helper</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">firstChild</span><span class="p">(),</span><span class="n">indent</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
  <span class="c">#@-others</span>
<span class="c">#@-others</span>
<span class="c">#@-leo</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">Leo API 4.11dev documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ed K. Ream.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>