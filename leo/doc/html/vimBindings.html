<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Chapter 22: Using Vim with Leo</title>
<style type="text/css">

/*ORIGINAL GOODGER + changes; up to line 224 it's standard reST stylesheet
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:date: $Date: 2006/10/19 13:23:15 $
:version: $Revision: 1.2 $
:copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
*/

/* EKR 10/19/06 */
/* some browsers require imported rules to precede all rulesets */
@import url(leo_rst.css);
@import url(silver_city.css);

.first {
  margin-top: 0 }

.last {
  margin-bottom: 0 }

a.toc-backref {
  text-decoration: none ;
  color: black }

dd {
  margin-bottom: 0.5em }

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.attention, div.caution, div.danger, div.error, div.hint,
div.important, div.note, div.tip, div.warning, div.admonition {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

div.hint p.admonition-title, div.important p.admonition-title,
div.note p.admonition-title, div.tip p.admonition-title,
div.admonition p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em }

div.footer, div.header {
  font-size: smaller }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 0em 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.line-block {
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;}
  /*background-color: #eeeeee }*/
  /*for some reason i can't overide in an import*/

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.option-argument {
  font-style: italic }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

table {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.citation {
  border-left: solid thin gray ;
  padding-left: 0.5ex }

table.docinfo {
  margin: 2em 4em }

table.footnote {
  border-left: solid thin black ;
  padding-left: 0.5ex }

td, th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

th.docinfo-name, th.field-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap }

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
  font-size: 100% }

/*for some reason, the following isn't being overridden by the imports
at the end of this style sheet so I've commented it out*/
/*tt {
  background-color: #eeeeee }*/

ul.auto-toc {
  list-style-type: none }
  
hr { /* EKR */
  width: 100%;
  height: 1pt;
  color: gray;
}



</style>
</head>
<body>
<div class="document">


<!-- rst3: filename: html\vimBindings.html -->
<!-- June 11, 2008 -->
<p><a class="reference" href="IPythonBridge.html"><img alt="back" src="arrow_lt.gif" /></a> <a class="reference" href="front.html"><img alt="leo" src="leo.gif" /></a> <a class="reference" href="appendices.html"><img alt="next" src="arrow_rt.gif" /></a></p>
<div class="section" id="chapter-22-using-vim-with-leo">
<h1><a class="toc-backref" href="#id1">Chapter 22: Using Vim with Leo</a></h1>
<p>This chapter describes how to use Leo with vim.
Most of the chapter tells how to install and use vim-like bindings in Leo.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference" href="#chapter-22-using-vim-with-leo" id="id1" name="id1">Chapter 22: Using Vim with Leo</a><ul>
<li><a class="reference" href="#vim-bindings" id="id2" name="id2">Vim bindings</a><ul>
<li><a class="reference" href="#installing-vim-bindings" id="id3" name="id3">Installing vim bindings</a></li>
<li><a class="reference" href="#general-commands" id="id4" name="id4">General commands</a></li>
<li><a class="reference" href="#body-pane-commands" id="id5" name="id5">Body pane commands</a></li>
<li><a class="reference" href="#outline-commands" id="id6" name="id6">Outline commands</a></li>
</ul>
</li>
<li><a class="reference" href="#using-vim-s-modeline-features" id="id7" name="id7">Using vim's modeline features</a></li>
</ul>
</li>
</ul>
</div>
<!-- Links -->
<!-- .. _`Chapter 7\: Scripting Leo with Python`:    scripting.html -->
<!-- WARNING: image targets may not have upper case letters! -->
<div class="section" id="vim-bindings">
<h2><a class="toc-backref" href="#id2">Vim bindings</a></h2>
<div class="section" id="installing-vim-bindings">
<h3><a class="toc-backref" href="#id3">Installing vim bindings</a></h3>
<p>To install vim bindings, move the node in leoSettings.leo called &quot;Vim bindings by TL&quot;
so that it is not a descendant of the &quot;&#64;ignore Unused key bindings&quot; node.
Then restart Leo.</p>
</div>
<div class="section" id="general-commands">
<h3><a class="toc-backref" href="#id4">General commands</a></h3>
<p>The following commands are always available.</p>
<p>State change commands:</p>
<pre class="literal-block">
i           Change state to insert from command state
Esc         Change state to command from insert state
Ctrl-[      Change state to command from insert state
</pre>
<p>Miscellaneous commands:</p>
<pre class="literal-block">
:e          Revert
:w&lt;return&gt;  Save '.leo' file
:wq&lt;return&gt; Save '.leo' file and quit Leo
:q&lt;return&gt;  Quit Leo   (Leo will prompt if file not saved)
ZZ          Save leo file and exit

u           Undo previous command
Ctrl-r      Redo previous command

Tab         Toggle focus between Outline and Body pane
=           Simulate double-click on current node's icon box
Alt-G       Go to specified line number (relative to derived file)
</pre>
</div>
<div class="section" id="body-pane-commands">
<h3><a class="toc-backref" href="#id5">Body pane commands</a></h3>
<p>Move cursor commands:</p>
<pre class="literal-block">
h           Go back 1 character
   LtArrow  Mapped to &quot;h&quot; for convenience
j           Go down 1 line
   DnArrow  Mapped to &quot;j&quot; for convenience
k           Go up 1 line
   UpArrow  Mapped to &quot;k&quot; for convenience
l           Go forward 1 character
   RtArrow  Mapped to &quot;l&quot; for convenience

w           Go to the next word (stop at non-alpha characters)
   W        Mapped to &quot;w&quot; until &quot;stop after blank characters&quot; supported
b           Go to beginning of word (stop at non-alpha characters)
   B        Mapped to &quot;b&quot; until &quot;stop at blank character&quot; supported
e           Go to end of word (stop at non-alpha characters)
   E        Mapped to &quot;e&quot; until &quot;stop at blank character&quot; supported

|           Goto beginning of current line
^           Go to 1st non-blank character on current line
$           Goto end of current line

(           Go to beginning of current sentence
)           Go to beginning of next sentence
{           Go to beginning of current paragraph
}           Go to beginning of next paragraph

%           Go to matching bracket

gg          Go to the first line (Cursor at column 1)
G           Go to the last line  (Cursor at column 1)

`.          Go to location of last edit (regardless of buffer)
'.          Go to beginning of line of last edit (regardless of buffer)
</pre>
<p>Insert/substitute commands:</p>
<pre class="literal-block">
a           Insert at cursor
i           Mapped to &quot;a&quot; until &quot;cursor on a character&quot; supported
A           Insert at end of line
I           Insert at first non-space
o           Open new line below current line
O           Open new line above current line
R           Overwrite text
s           Substitute character (Delete character, enter insert state)
S           Substitute line (Delete line, enter insert state)
</pre>
<p>Change commands:</p>
<pre class="literal-block">
C           Change to end of line
cc          Change all of current line
cw          Change to end of word
cb          Change to beginning of word
c)          Delete to end of sentence
c(          Delete to beginning of sentence
c}          Delete to end of paragraph
c{          Delete to beginning of paragraph
c%          Change from current bracket type its matching bracket type
ct&lt;char&gt;    Selects forward to &lt;char&gt; (follow with 'i' to change selection)
cT&lt;char&gt;    Selects backward to &lt;char&gt; (follow with 'i' to change selection)
</pre>
<p>Delete commands:</p>
<pre class="literal-block">
x           Delete next character
delete      Delete next character
D           Delete to the end of the current line
dd          Delete current line
dw          Delete to end of word
db          Delete to beginning of word
d)          Delete to end of sentence
d(          Delete to beginning of sentence
d}          Delete to end of paragraph
d{          Delete to start of paragraph
d%          Delete from current bracket type to its apposing bracket
dt&lt;ch&gt;      Delete to character (not limited to current line)
J           Join next line to end of current line (deletes carriage return)
</pre>
<p>Yank text commands:</p>
<pre class="literal-block">
Y           Yank to end of line
yy          Yank line
yw          Yank to beginning of next word
yb          Yank to beginning of current word
y)          Yank to end of sentence
y(          Yank to beginning of sentence
y}          Yank to end of paragraph
y{          Yank to beginning of paragraph
y%          Yank from current bracket type to its opposing bracket
yt&lt;char&gt;    Select forward to &lt;char&gt;  (use 'y&lt;cr&gt;' to yank selection)
yT&lt;char&gt;    Select backward to &lt;char&gt; (use 'y&lt;cr&gt;' to yank selection)

v           Toggle text select mode (Vim's &quot;visual&quot; mode)
y&lt;cr&gt;       Yank selected text (Vim uses 'y')
</pre>
<p>Paste text commands:</p>
<pre class="literal-block">
Paste commands do not differentiate between yanked lines or partial lines.
Put cursor at beginning of line (key '|') before pasting full lines.

P           Paste text in clipboard before cursor location
  p         Mapped to &quot;P&quot; until character based cursor supported.
</pre>
<p>Find commands:</p>
<pre class="literal-block">
/           Find next occurrence of user specified string
?           Find previous occurrence of user specified string
f           Find next occurrence of user specified character
F           Find previous occurrence of user specified character
n           Find next occurrence of string specified by '/' command
N           Find previous occurrence of string specified by '/' command
</pre>
<p>Indent line commands:</p>
<pre class="literal-block">
&gt;&gt;          Indent the current line
&gt;)          Indent to the end of sentence
&gt;(          Indent to the beginning of sentence
&gt;}          Indent to the end of paragraph
&gt;{          Indent to the beginning of paragraph
&gt;g          Indent to the start of buffer
&gt;G          Indent to the end of buffer
&lt;&lt;          Remove all indentation on the current line
&lt;)          Remove all indentation to the end of sentence
&lt;(          Remove all indentation to the beginning of sentence
&lt;}          Remove all indentation to the end of paragraph
&lt;{          Remove all indentation to the beginning of paragraph
</pre>
<p>Scroll commands:</p>
<pre class="literal-block">
Ctrl-b      Scroll text up by pane's height
Ctrl-f      Scroll text down by pane's height
   Ctrl-y   Mapped to Ctrl-b until scroll up one line is supported
   Ctrl-e   Mapped to Ctrl-f until scroll down one line is supported
   Ctrl-u   Mapped to Ctrl-b until scroll up half a pane height is supported
   Ctrl-d   Mapped to Ctrl-f until scroll down half a pane height is supported
</pre>
<p>Window commands:</p>
<pre class="literal-block">
Ctrl-w s    Open another view into current node's body (Vim: Split window)
   Ctrl-w n Mapped to &quot;Ctrl-w s&quot; (Vim: New buffer in split window)
Ctrl-w w    Switch to next view (Vim: Go to up/left window w/wrapping)
   Ctrl-w p Mapped to &quot;Ctrl-w w&quot; (Vim: Cycle through windows)
   Ctrl-w k Mapped to &quot;Ctrl-w w&quot; (Vim: Go to window above current window)
   Ctrl-w j Mapped to &quot;Ctrl-w w&quot; (Vim: Go to window below current window)
Ctrl-w c    Close current view in body pane (Vim: Close current window)
   Ctrl-w q Mapped to &quot;Ctrl-w c&quot; (Vim: Quit current window)
</pre>
<p>Node commands:</p>
<pre class="literal-block">
Ctrl-j      Go to next visible node
Ctrl-k      Go to previous visible node
Ctrl-h      Hide sub-nodes or, if hidden, go up 1 level
Ctrl-l      Display sub-nodes or, if displayed, go down 1 level

   Ctrl-DnArrow  Mapped to &quot;Ctrl-j&quot; for convenience
   Ctrl-UpArrow  Mapped to &quot;Ctrl-k&quot; for convenience
   Ctrl-LtArrow  Mapped to &quot;Ctrl-h&quot; for convenience
   Ctrl-RtArrow  Mapped to &quot;Ctrl-l&quot; for convenience
</pre>
<p>Notable vi commands <strong>not</strong> supported in the Body pane:</p>
<pre class="literal-block">
t&lt;char&gt;     Move cursor to character before specified character
r           Replace a single character with a single character
&lt;num&gt;G      Go to specified line number
0           Go to 1st column in current line (Use '|' instead)
bksp        Move one character to the left
m&lt;label&gt;    Mark cursor location (and &quot;'&quot; and &quot;`&quot; to return to mark)
~           Toggle character's case
.           Repeat last editing command
;           Repeat last cursor movement command
&lt;n&gt;&lt;cmd&gt;    Perform command 'n' number of times
&lt;cmd&gt;&lt;n&gt;&lt;object&gt;    Perform the command on the n'th or up to the n'th object
z&lt;movement&gt; Slide buffer to put current line at top/middle/bottom of pane
</pre>
</div>
<div class="section" id="outline-commands">
<h3><a class="toc-backref" href="#id6">Outline commands</a></h3>
<p>The following commands are supported when in a headline's command mode.</p>
<p>State change commands:</p>
<pre class="literal-block">
Ctrl-i          Change state to command from grayed state
return          Change state to command from insert state
Ctrl-]          Change state to grayed from command state
</pre>
<p>Headline editing commands:</p>
<pre class="literal-block">
|               Go to Beginning of line
$               Go to end of line
%               Go to matching bracket
e               Go to end of word (stop at non-alpha characters)
E               Select to end of word
w               Go to beginning of next word
W               Select to beginning of next word

h               Go to previous character
   LtArrow      Mapped to 'h' for convenience
l               Go to next character
   RtArrow      Mapped to &quot;l&quot; for convenience

f               Find next occurrence of user specified character
/               Find next occurrence of user specified string
n               Find next occurrence of last search string
N               Find previous occurrence of last search string

x               Delete next character
delete          Delete next character
dd              kill-line

s               Select current character

C               Select to end of line (follow with 'i' to change text)
cc              Delete line (follow with 'i' to change text)

D               Select to end of line (follow with 'x' to delete text)
dd              Delete line

Y               Select to end of line (follow with 'y&lt;return&gt;' to yank text)
yy              Select line (follow with 'y&lt;return&gt;' to yank text)

v               Toggle text select mode
y&lt;return&gt;       Yank selected text
</pre>
<p>Node commands:</p>
<pre class="literal-block">
G               Go to the outline's last node
gg              Go to the outline's first node

Ctrl-j          Go to next visible node
Ctrl-k          Go to previous visible node
Ctrl-h          Hide sub-nodes or, if hidden, go up 1 level
Ctrl-l          Display sub-nodes or, if displayed, go down 1 level

   j            Mapped to &quot;Ctrl-j&quot; for convenience
   DnArrow      Mapped to &quot;Ctrl-j&quot; for convenience
   k            Mapped to &quot;Ctrl-k&quot; for convenience
   UpArrow      Mapped to &quot;Ctrl-k&quot; for convenience

   Ctrl-DnArrow Mapped to &quot;Ctrl-j&quot; for convenience
   Ctrl-UpArrow Mapped to &quot;Ctrl-k&quot; for convenience
   Ctrl-LtArrow Mapped to &quot;Ctrl-h&quot; for convenience
   Ctrl-RtArrow Mapped to &quot;Ctrl-l&quot; for convenience

Shift-Ctrl-k    Move node down
Shift-Ctrl-h    Move node left
Shift-Ctrl-l    Move node right
Shift-Ctrl-j    Move node up

   Shift-Ctrl-DnArrow    Mapped to &quot;Shift-Ctrl-k&quot; for convenience
   Shift-Ctrl-LtArrow    Mapped to &quot;Shift-Ctrl-h&quot; for convenience
   Shift-Ctrl-RtArrow    Mapped to &quot;Shift-Ctrl-l&quot; for convenience
   Shift-Ctrl-UpArrow    Mapped to &quot;Shift-Ctrl-j&quot; for convenience

m               Toggle node mark
Ctrl-m          Go to next marked node
Alt-m           Clear all marked nodes

t               Clone the current node (transclude)
Ctrl-t          Go to next clone of current node

Ctrl-o          Insert-node

Ctrl-x          Delete node
Ctrl-c          Yank node
Ctrl-v          Paste node
</pre>
<p>Scroll commands:</p>
<pre class="literal-block">
Ctrl-y          Scroll outline up one line
Ctrl-e          scroll outline down one line
    Ctrl-u       Mapped to Ctrl-y until scroll up by half a pane supported
    Ctrl-d       Mapped to Ctrl-e until scroll down by half a pane supported
    Ctrl-b       Mapped to Ctrl-y until scroll up by pane's height supported
    Ctrl-f       Mapped to Ctrl-e until scroll down by pane's height supported
</pre>
</div>
</div>
<div class="section" id="using-vim-s-modeline-features">
<h2><a class="toc-backref" href="#id7">Using vim's modeline features</a></h2>
<p>If you use the open-with plugin to open node text in Vim and your Vim's &quot;tag&quot;
file refers to derived files then there is a risk that a derived file that is
initially displayed via the &quot;tag&quot; command&quot; in Vim is accidentally edited and
saved from the external Vim editor while your Leo session still contains the
derived file's original text that may later recreate the original derived file
during a Leo save operation (overwriting the changes saved from the Vim editor).</p>
<p>To prevent this problem, modifications to derived files can be avoided by using
Vim's &quot;modeline&quot; feature to disable editing of derived files.</p>
<p>Vim's &quot;modeline&quot; feature scans each loaded buffer for text at the top or bottom
of the file containing &quot; vim:&quot; followed by a series of Vim options. The text is
usually embedded within a comment. The following example prevents modifications
to a buffer in a Python file:</p>
<pre class="literal-block">
# vim:noma (A space is required between the '#' and &quot;vim:noma&quot;)
</pre>
<p>If this line is placed in a separate Leo node at the top or bottom of the list
of nodes under a derived file node (ex: &#64;thin) then any derived file saved and
then later loaded into Vim will, by default, not be modifiable. If a derived
file does need to be edited then modifications can be re-enabled on a
file-by-file basis by issuing Vim's &quot;:ma&quot; command while viewing the derived
file.</p>
<p>The number of lines that Vim checks at the top and bottom of the buffer is
configurable. The following Vim command must be placed in the vimrc file to
allow for Leo's trailing sentinel lines:</p>
<pre class="literal-block">
set modelines=8
</pre>
<p>Issue the &quot;:help modeline&quot; command within Vim for the more information about
modelines.</p>
<hr class="docutils" />
<p><a class="reference" href="IPythonBridge.html"><img alt="back" src="arrow_lt.gif" /></a> <a class="reference" href="front.html"><img alt="leo" src="leo.gif" /></a> <a class="reference" href="appendices.html"><img alt="next" src="arrow_rt.gif" /></a></p>
</div>
</div>
</div>
</body>
</html>
