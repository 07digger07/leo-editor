

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ILeo: Leo’s IPython Bridge &mdash; Leo 6.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using ZODB with Leo" href="zodb.html" />
    <link rel="prev" title="Embedding Leo with the leoBridge module" href="leoBridge.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="leo_toc.html" class="icon icon-home"> Leo
          

          
            
            <img src="_static/Leo4-80-border.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="preliminaries.html">Preliminaries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Downloading, Installing &amp; Running Leo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheat Sheet</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="screencasts.html">Videos about Leo</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="usersguide.html">Users Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="leoandotherprograms.html">Leo and Other Programs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="emacs.html">Leo and Emacs, including org mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="vimBindings.html">Using Vim with Leo</a></li>
<li class="toctree-l2"><a class="reference internal" href="leoBridge.html">Embedding Leo with the leoBridge module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ILeo: Leo’s IPython Bridge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-ileo">Starting ILeo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-leo-scripts-from-ipython">Running Leo scripts from IPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-ipython-scripts-from-leo">Running IPython scripts from Leo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ileo-as-an-ipython-notebook">ILeo as an IPython notebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ileo-and-the-valuespace-plugin">ILeo and the valuespace plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#acknowledgements-and-history">Acknowledgements and history</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zodb.html">Using ZODB with Leo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intermediatetopics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="history.html">History of Leo</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="what-is-new.html">What's New</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="slides.html">Slides</a></li>
<li class="toctree-l1"><a class="reference internal" href="leoLinks.html">More Leo Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen-shots.html">Leo screen shots</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="leo_toc.html">Leo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="leo_toc.html">Docs</a> &raquo;</li>
        
          <li><a href="leoandotherprograms.html">Leo and Other Programs</a> &raquo;</li>
        
      <li>ILeo: Leo’s IPython Bridge</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ileo-leo-s-ipython-bridge">
<h1>ILeo: Leo’s IPython Bridge<a class="headerlink" href="#ileo-leo-s-ipython-bridge" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#starting-ileo" id="id2">Starting ILeo</a></p></li>
<li><p><a class="reference internal" href="#running-leo-scripts-from-ipython" id="id3">Running Leo scripts from IPython</a></p></li>
<li><p><a class="reference internal" href="#running-ipython-scripts-from-leo" id="id4">Running IPython scripts from Leo</a></p></li>
<li><p><a class="reference internal" href="#ileo-as-an-ipython-notebook" id="id5">ILeo as an IPython notebook</a></p></li>
<li><p><a class="reference internal" href="#ileo-and-the-valuespace-plugin" id="id6">ILeo and the valuespace plugin</a></p></li>
<li><p><a class="reference internal" href="#acknowledgements-and-history" id="id7">Acknowledgements and history</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Leo’s <code class="docutils literal notranslate"><span class="pre">--ipython</span></code> command-line option enables two-way communication (<strong>ILeo</strong>, the <strong>IPython bridge</strong>) between Leo and IPython: you can run Leo scripts from IPython, and IPython scripts from Leo.</p>
<p>The level of integration is much deeper than conventional integration in IDEs. Most notably, you are able to store and manipulate <em>data</em> in Leo nodes, in addition to mere program code–essentially making ILeo a hierarchical spreadsheet, albeit with non-grid view of the data. The possibilities of this are endless, and the approach can be applied in wide range of problem domains with very little actual coding.</p>
</div>
<div class="section" id="starting-ileo">
<h2><a class="toc-backref" href="#id2">Starting ILeo</a><a class="headerlink" href="#starting-ileo" title="Permalink to this headline">¶</a></h2>
<p>To run Leo’s IPython bridge:</p>
<ol class="arabic simple">
<li><p>Install IPython 4.0 and above and Jupyter.</p></li>
<li><p><a class="reference external" href="installing.html#running-leo-from-a-console-window">run Leo in a console window</a> with the <code class="docutils literal notranslate"><span class="pre">--ipython</span></code> command-line option enabled. This option starts an instance of the IPython shell in the console. Leo and IPython run simultaneously and independently. Their separate event loops do not interfere with each other. The ipython-new command launches new terminals connected to the same IPython kernel.</p></li>
</ol>
</div>
<div class="section" id="running-leo-scripts-from-ipython">
<h2><a class="toc-backref" href="#id3">Running Leo scripts from IPython</a><a class="headerlink" href="#running-leo-scripts-from-ipython" title="Permalink to this headline">¶</a></h2>
<p><em>You can run any Leo script from IPython</em>. The IPython bridge injects an object called _leo into IPython’s namespace. IPython scripts may access Leo’s c and g objects as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">,</span><span class="n">g</span> <span class="o">=</span> <span class="n">_leo</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">_leo</span><span class="o">.</span><span class="n">g</span>
</pre></div>
</div>
<p>This allows IPython scripts to do <em>anything</em> that a Leo script can do. Scripts run from IPython <em>immediately</em> change Leo, <em>exactly</em> as if the script were run from Leo.</p>
<p><strong>Important</strong>: the _leo object is an instance of LeoNameSpace class, defined in leo.core.leoIPython.py. This class allows IPython scripts to access multiple Leo outlines at once. See the actual code for details.</p>
<p><strong>Note</strong>: _leo.c is a property which can return None in some situations. Here is its definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__get_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Return the designated commander, or the only open commander.&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">commander</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">commander</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">commanders_list</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commander</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commanders_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commanders_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">__set_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Designate the commander to be returned by the getter.&#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">commanders_list</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commander</span> <span class="o">=</span> <span class="n">c</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
    <span class="n">__get_c</span><span class="p">,</span> <span class="n">__set_c</span><span class="p">,</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="s2">&quot;LeoNameSpace c property&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="running-ipython-scripts-from-leo">
<h2><a class="toc-backref" href="#id4">Running IPython scripts from Leo</a><a class="headerlink" href="#running-ipython-scripts-from-leo" title="Permalink to this headline">¶</a></h2>
<p><em>You can run any IPython script from Leo</em>. Leo’s ipython-exec command executes the body text of the presently selected Leo node in the address space of the IPython shell. Such scripts <em>immediately</em> affect the IPython interpreter.</p>
<p>The IPython bridge sets several global variables <em>within Leo</em>, allowing Leo scripts <em>complete</em> access to all of IPython’s code and data:</p>
<ul class="simple">
<li><p>g.app.ipk is a <em>singleton</em> instance of the InternalIPKernel class,
defined in leoIPython.py.</p></li>
<li><p>g.app.ipk.namespace is IPython’s namespace.</p></li>
<li><p>g.app.ipk.kernelApp is an IPython IPKernelApp object.</p></li>
<li><p>g.app.ipk.kernelApp.shell is an IPython InteractiveShell object.
Depending on your installation, this may be a ZMQInteractiveShell.</p></li>
</ul>
</div>
<div class="section" id="ileo-as-an-ipython-notebook">
<h2><a class="toc-backref" href="#id5">ILeo as an IPython notebook</a><a class="headerlink" href="#ileo-as-an-ipython-notebook" title="Permalink to this headline">¶</a></h2>
<p>The IPython bridge turns Leo into another kind of <a class="reference external" href="http://projects.scipy.org/ipython/ipython/wiki/NoteBook">IPython Notebook</a>. IPython users typically use %edit to produce non-trivial functions/classes instead of entering them directly on the interactive prompt. But this is a bit clumsy. With Leo, <em>every Leo node works like an IPython %edit file</em>:</p>
<ul class="simple">
<li><p>You can execute any Leo node in IPython with ipython-exec.</p></li>
<li><p>Saving your Leo outline saves all your IPython scripts.</p></li>
<li><p>You can use Leo as always to organize all your IPython scripts.</p></li>
</ul>
</div>
<div class="section" id="ileo-and-the-valuespace-plugin">
<h2><a class="toc-backref" href="#id6">ILeo and the valuespace plugin</a><a class="headerlink" href="#ileo-and-the-valuespace-plugin" title="Permalink to this headline">¶</a></h2>
<p>Leo’s valuespace.py plugin uses the ipython namespace when the <code class="docutils literal notranslate"><span class="pre">--ipython</span></code> command line switch is in effect.</p>
<p>This plugin provides a “workbook” like way to get data from Leo document to the namespace, and do calculations based on that data. Having this data be accessible to the ipython instance makes it convenient to interact and poke around with the same data.</p>
</div>
<div class="section" id="acknowledgements-and-history">
<h2><a class="toc-backref" href="#id7">Acknowledgements and history</a><a class="headerlink" href="#acknowledgements-and-history" title="Permalink to this headline">¶</a></h2>
<p>This idea got started when I (Ville M. Vainio) saw this post by Edward Ream on IPython developer mailing list: <a class="reference external" href="http://lists.ipython.scipy.org/pipermail/ipython-dev/2008-January/003551.html">http://lists.ipython.scipy.org/pipermail/ipython-dev/2008-January/003551.html</a></p>
<p>I was using FreeMind as mind mapping software, and so I had an immediate use case for Leo (which, incidentally, is superior to FreeMind as mind mapper). The wheels started rolling, I got obsessed with the power of this concept (everything clicked together), and Edwards excitement paralleled mine. Everything was mind-bogglingly easy/trivial, something that is typical of all promising technologies.</p>
<p>The goal of close cooperation between Leo and IPython went from vague dream to completed reality over the span of about 10 days. The IPython bridge has continued to evolve since then.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="zodb.html" class="btn btn-neutral float-right" title="Using ZODB with Leo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="leoBridge.html" class="btn btn-neutral float-left" title="Embedding Leo with the leoBridge module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1997-2019, Edward K. Ream
      <span class="lastupdated">
        Last updated on Jul 13, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>